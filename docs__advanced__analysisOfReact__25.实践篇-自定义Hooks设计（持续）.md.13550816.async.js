(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[869],{18325:function(e,n,t){"use strict";t.r(n);var l=t(67294),a=t(96089),c=t(65659),u=l.memo((e=>{e.demos;return l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("h2",{id:"\u4e00-\u524d\u8a00"},l.createElement(a.AnchorLink,{to:"#\u4e00-\u524d\u8a00","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e00 \u524d\u8a00"),l.createElement("p",null,"\u672c\u7ae0\u8282\u5c06\u56f4\u7ed5\u81ea\u5b9a\u4e49 hooks \u5c55\u5f00\uff0c\u672c\u7ae0\u8282\u542b\u7684\u77e5\u8bc6\u70b9\u5982\u4e0b\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u81ea\u5b9a\u4e49 hooks \u7684\u8bbe\u8ba1\u548c\u7f16\u5199\u3002"),l.createElement("li",null,"\u51e0\u4e2a\u81ea\u5b9a\u4e49 hooks \u5b9e\u6218\u3002")),l.createElement("h2",{id:"\u4e8c-\u5168\u9762\u7406\u89e3\u81ea\u5b9a\u4e49-hooks"},l.createElement(a.AnchorLink,{to:"#\u4e8c-\u5168\u9762\u7406\u89e3\u81ea\u5b9a\u4e49-hooks","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e8c \u5168\u9762\u7406\u89e3\u81ea\u5b9a\u4e49 hooks"),l.createElement("p",null,"\u5728 hooks \u539f\u7406\u7ae0\u8282\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u4e86 ",l.createElement("code",null,"React Hooks")," \u539f\u7406\uff0c\u5728\u5176\u4ed6\u7684\u7ae0\u8282\uff0c\u4e5f\u9646\u7eed\u8bb2\u89e3\u4e86\u6240\u6709\u5e38\u7528\u7684 hooks \u7528\u6cd5\u3002\u63a5\u4e0b\u6765\u9488\u5bf9 hooks \u8fdb\u884c\u529f\u80fd\u6027\u62d3\u5c55\uff0c\u6765\u7814\u7a76\u4e00\u4e0b\u5728 React \u4e2d\u4e00\u79cd\u903b\u8f91\u590d\u7528\uff0c\u7ec4\u4ef6\u5f3a\u5316\u65b9\u5f0f\u2014\u2014\u81ea\u5b9a\u4e49 hooks \u3002"),l.createElement("h3",{id:"1-\u6982\u5ff5"},l.createElement(a.AnchorLink,{to:"#1-\u6982\u5ff5","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 \u6982\u5ff5"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u662f\u5728 React Hooks \u57fa\u7840\u4e0a\u7684\u4e00\u4e2a\u62d3\u5c55\uff0c\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5236\u5b9a\u6ee1\u8db3\u4e1a\u52a1\u9700\u8981\u7684\u7ec4\u5408 hooks \uff0c\u66f4\u6ce8\u91cd\u7684\u662f\u903b\u8f91\u5355\u5143\u3002\u901a\u8fc7\u4e1a\u52a1\u573a\u666f\u4e0d\u540c\uff0c\u5230\u5e95\u9700\u8981React Hooks \u505a\u4ec0\u4e48\uff0c\u600e\u4e48\u6837\u628a\u4e00\u6bb5\u903b\u8f91\u5c01\u88c5\u8d77\u6765\uff0c\u505a\u5230\u590d\u7528\uff0c\u8fd9\u662f\u81ea\u5b9a\u4e49 hooks \u4ea7\u751f\u7684\u521d\u8877\u3002"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u4e5f\u53ef\u4ee5\u8bf4\u662f React Hooks \u805a\u5408\u4ea7\u7269\uff0c\u5176\u5185\u90e8\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2a React Hooks \u7ec4\u6210\uff0c\u7528\u4e8e\u89e3\u51b3\u4e00\u4e9b\u590d\u6742\u903b\u8f91\u3002"),l.createElement("p",null,"\u4e00\u4e2a\u4f20\u7edf\u81ea\u5b9a\u4e49 hooks \u957f\u5982\u4e0b\u7684\u6837\u5b50\uff1a"),l.createElement("p",null,"\u7f16\u5199\uff1a"),l.createElement(c.Z,{code:"function useXXX(\u53c2\u6570A,\u53c2\u6570B){\n    /*  \n     ...\u81ea\u5b9a\u4e49 hooks \u903b\u8f91\n     \u5185\u90e8\u5e94\u7528\u4e86\u5176\u4ed6 React Hooks \u2014\u2014 useState | useEffect | useRef ...\n    */\n    return [xxx,...]\n}",lang:"js"}),l.createElement("p",null,"\u4f7f\u7528\uff1a"),l.createElement(c.Z,{code:"const [ xxx , ... ] = useXXX(\u53c2\u6570A,\u53c2\u6570B...)",lang:"js"}),l.createElement("p",null,"\u5b9e\u9645\u4e0a\u81ea\u5b9a\u4e49 hooks \u7684\u7f16\u5199\u5f88\u7b80\u5355\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5173\u5fc3\uff0c\u4f20\u5165\u4ec0\u4e48\u53c2\u6570\uff08\u4e5f\u53ef\u4ee5\u6ca1\u6709\u53c2\u6570\uff09\uff0c\u548c\u8fd4\u56de\u4ec0\u4e48\u5185\u5bb9\u5c31\u53ef\u4ee5\u4e86\uff0c\u5f53\u7136\u6709\u4e00\u4e9b\u76d1\u542c\u548c\u6267\u884c\u526f\u4f5c\u7528\u7684\u81ea\u5b9a\u4e49 hooks \uff0c\u6839\u672c\u65e0\u9700\u8fd4\u56de\u503c\u3002"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u53c2\u6570\u53ef\u80fd\u662f\u4ee5\u4e0b\u5185\u5bb9\uff1a"),l.createElement("ul",null,l.createElement("li",null,"hooks \u521d\u59cb\u5316\u503c\u3002"),l.createElement("li",null,"\u4e00\u4e9b\u526f\u4f5c\u7528\u6216\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u3002"),l.createElement("li",null,"\u53ef\u4ee5\u662f useRef \u83b7\u53d6\u7684 DOM \u5143\u7d20\u6216\u8005\u7ec4\u4ef6\u5b9e\u4f8b\u3002"),l.createElement("li",null,"\u4e0d\u9700\u8981\u53c2\u6570")),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u8fd4\u56de\u503c\u53ef\u80fd\u662f\u4ee5\u4e0b\u5185\u5bb9\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u8d1f\u8d23\u6e32\u67d3\u89c6\u56fe\u83b7\u53d6\u7684\u72b6\u6001\u3002"),l.createElement("li",null,"\u66f4\u65b0\u51fd\u6570\u7ec4\u4ef6\u65b9\u6cd5\uff0c\u672c\u8d28\u4e0a\u662f useState \u6216\u8005 useReducer\u3002"),l.createElement("li",null,"\u4e00\u4e9b\u4f20\u9012\u7ed9\u5b50\u5b59\u7ec4\u4ef6\u7684\u72b6\u6001\u3002"),l.createElement("li",null,"\u6ca1\u6709\u8fd4\u56de\u503c\u3002")),l.createElement("h3",{id:"2-\u7279\u6027"},l.createElement(a.AnchorLink,{to:"#2-\u7279\u6027","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u7279\u6027"),l.createElement("p",null,"\u4e0a\u8ff0\u8bb2\u5230\u4e86\u81ea\u5b9a\u4e49 hooks \u57fa\u672c\u6982\u5ff5\uff0c\u63a5\u4e0b\u6765\u5206\u6790\u4e00\u4e0b\u5b83\u7684\u7279\u6027\u3002"),l.createElement("h4",{id:"-\u9a71\u52a8\u6761\u4ef6"},l.createElement(a.AnchorLink,{to:"#-\u9a71\u52a8\u6761\u4ef6","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u2460 \u9a71\u52a8\u6761\u4ef6"),l.createElement("p",null,"\u9996\u5148\u8981\u660e\u767d\u4e00\u70b9\uff0c\u5f00\u53d1\u8005\u5199\u7684\u81ea\u5b9a\u4e49 hooks \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e14\u51fd\u6570\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u88ab\u6267\u884c\u3002\u90a3\u4e48",l.createElement("strong",null,"\u81ea\u5b9a\u4e49 hooks \u9a71\u52a8\u672c\u8d28\u4e0a\u5c31\u662f\u51fd\u6570\u7ec4\u4ef6\u7684\u6267\u884c"),"\u3002"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u9a71\u52a8\u6761\u4ef6\uff1a"),l.createElement("ul",null,l.createElement("li",null,"props \u6539\u53d8\u5e26\u6765\u7684\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u3002"),l.createElement("li",null,"useState | useReducer \u6539\u53d8 state \u5f15\u8d77\u51fd\u6570\u7ec4\u4ef6\u7684\u66f4\u65b0\u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9fca8bd0234c43fda413c71b2023d8a2~tplv-k3u1fbpfcp-watermark.awebp",alt:"1.jpg"})),l.createElement("h4",{id:"-\u987a\u5e8f\u539f\u5219"},l.createElement(a.AnchorLink,{to:"#-\u987a\u5e8f\u539f\u5219","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u2461 \u987a\u5e8f\u539f\u5219"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u5185\u90e8\u81f3\u5c11\u6709\u4e00\u4e2a React Hooks \uff0c\u90a3\u4e48\u81ea\u5b9a\u4e49 hooks \u4e5f\u8981\u9075\u5faa hooks \u7684\u89c4\u5219\uff0c",l.createElement("strong",null,"\u4e0d\u80fd\u653e\u5728\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u800c\u4e14\u8981\u4fdd\u6301\u6267\u884c\u987a\u5e8f\u7684\u4e00\u81f4\u6027\u3002")," \u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff1f \u5728 hooks \u539f\u7406\u7ae0\u8282\u5df2\u7ecf\u8bb2\u8fc7\u4e86\u3002"),l.createElement("h4",{id:"-\u6761\u4ef6\u9650\u5b9a"},l.createElement(a.AnchorLink,{to:"#-\u6761\u4ef6\u9650\u5b9a","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u2462 \u6761\u4ef6\u9650\u5b9a"),l.createElement("p",null,"\u5728\u81ea\u5b9a\u4e49 hooks \u4e2d\uff0c\u6761\u4ef6\u9650\u5b9a",l.createElement("strong",null,"\u7279\u522b\u91cd\u8981"),"\u3002\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bf4\u5462\uff0c\u56e0\u4e3a\u8003\u8651 hooks \u7684\u9650\u5b9a\u6761\u4ef6\uff0c\u662f\u4e00\u4e2a\u51fa\u8272\u7684\u81ea\u5b9a\u4e49 hooks \u91cd\u8981\u56e0\u7d20\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),l.createElement("p",null,"\u4e00\u4e9b\u540c\u5b66\u5bb9\u6613\u6ee5\u7528\u81ea\u5b9a\u4e49 hooks \u5bfc\u81f4\u4e00\u4e9b\u95ee\u9898\u7684\u53d1\u751f \uff0c\u6bd4\u5982\u5728\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8fd9\u91cc\u5199\uff1a"),l.createElement(c.Z,{code:"function useXXX(){\n    const value = React.useContext(defaultContext)\n    /* .....\u7528\u4e0a\u4e0b\u6587\u4e2d value \u4e00\u6bb5\u521d\u59cb\u5316\u903b\u8f91  */\n    const newValue = initValueFunction(value) /* \u521d\u59cb\u5316 value \u5f97\u5230\u65b0\u7684 newValue  */\n    /* ...... */\n    return newValue\n}",lang:"js"}),l.createElement("p",null,"\u6bd4\u5982\u4e0a\u8ff0\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u81ea\u5b9a\u4e49 hooks \uff0c\u4ece ",l.createElement("code",null,"context")," \u53d6\u51fa\u72b6\u6001 value \uff0c\u901a\u8fc7 ",l.createElement("code",null,"initValueFunction")," \u52a0\u5de5 value \uff0c\u5f97\u5230\u5e76\u8fd4\u56de\u6700\u65b0\u7684 newValue \u3002\u5982\u679c\u76f4\u63a5\u6309\u7167\u4e0a\u8ff0\u8fd9\u4e48\u5199\uff0c\u4f1a\u5bfc\u81f4\u4ec0\u4e48\u53d1\u751f\u5462\uff1f"),l.createElement("p",null,"\u9996\u5148\u6bcf\u4e00\u6b21\u51fd\u6570\u7ec4\u4ef6\u66f4\u65b0\uff0c\u5c31\u4f1a\u6267\u884c\u6b64\u81ea\u5b9a\u4e49 hooks \uff0c\u90a3\u4e48\u5c31\u4f1a\u91cd\u590d\u6267\u884c\u521d\u59cb\u5316\u903b\u8f91\uff0c\u91cd\u590d\u6267\u884c",l.createElement("code",null,"initValueFunction")," \uff0c\u6bcf\u4e00\u6b21\u90fd\u4f1a\u5f97\u5230\u4e00\u4e2a\u6700\u65b0\u7684 newValue \u3002 \u5982\u679c newValue \u4f5c\u4e3a ",l.createElement("code",null,"useMemo")," \u548c ",l.createElement("code",null,"useEffect")," \u7684 deps \uff0c\u6216\u8005\u4f5c\u4e3a\u5b50\u7ec4\u4ef6\u7684 props \uff0c\u90a3\u4e48\u5b50\u7ec4\u4ef6\u7684\u6d45\u6bd4\u8f83 props \u5c06\u5931\u53bb\u4f5c\u7528\uff0c\u90a3\u4e48\u4f1a\u5e26\u6765\u4e00\u4e32\u9ebb\u70e6\u3002"),l.createElement("p",null,"\u90a3\u4e48\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u7b54\u6848\u5f88\u7b80\u5355\uff0c\u53ef\u4ee5\u901a\u8fc7 useRef \u5bf9 newValue \u7f13\u5b58\uff0c\u7136\u540e\u6bcf\u6b21\u6267\u884c\u81ea\u5b9a\u4e49 hooks \u5224\u65ad\u6709\u65e0\u7f13\u5b58\u503c\u3002\u5982\u4e0b\uff1a"),l.createElement(c.Z,{code:"function useXXX(){\n    const newValue =  React.useRef(null)  /* \u521b\u5efa\u4e00\u4e2a value \u4fdd\u5b58\u72b6\u6001\u3002  */\n    const value = React.useContext(defaultContext)\n    if(!newValue.current){  /* \u5982\u679c newValue \u4e0d\u5b58\u5728 */\n          newValue.current = initValueFunction(value)\n    }\n    return newValue.current\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u7528\u4e00\u4e2a useRef \u4fdd\u5b58\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684 value \u503c \u3002"),l.createElement("li",null,"\u5224\u65ad\u5982\u679c value \u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u901a\u8fc7 initValueFunction \u521b\u5efa\uff0c\u5982\u679c\u5b58\u5728\u76f4\u63a5\u8fd4\u56de newValue.current \u3002")),l.createElement("p",null,"\u5982\u4e0a\u52a0\u4e86\u6761\u4ef6\u5224\u65ad\u4e4b\u540e\uff0c\u4f1a\u8ba9\u81ea\u5b9a\u4e49 hooks \u5185\u90e8\u6309\u7167\u671f\u671b\u7684\u65b9\u5411\u53d1\u5c55\u3002\u6761\u4ef6\u9650\u5b9a\u662f\u7f16\u5199\u51fa\u8272\u7684 hooks \u91cd\u8981\u7684\u56e0\u7d20\u3002"),l.createElement("h4",{id:"-\u8003\u8651\u53ef\u53d8\u6027"},l.createElement(a.AnchorLink,{to:"#-\u8003\u8651\u53ef\u53d8\u6027","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u2463 \u8003\u8651\u53ef\u53d8\u6027"),l.createElement("p",null,"\u5728\u7f16\u5199\u81ea\u5b9a\u4e49 hooks \u7684\u65f6\u5019\uff0c\u53ef\u53d8\u6027\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684 hooks \u7279\u6027\u3002\u4ec0\u4e48\u53eb\u505a\u53ef\u53d8\u6027\uff0c",l.createElement("strong",null,"\u5c31\u662f\u8003\u8651\u4e00\u4e9b\u72b6\u6001\u503c\u53d1\u751f\u53d8\u5316\uff0c\u662f\u5426\u6709\u4f9d\u8d56\u4e8e\u5f53\u524d\u503c\u53d8\u5316\u7684\u6267\u884c\u903b\u8f91\u6216\u6267\u884c\u526f\u4f5c\u7528\u3002")),l.createElement("p",null,"\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\ud83c\udf30\u4e2d\uff0c\u5982\u679c defaultContext \u4e2d\u7684 value \u662f\u53ef\u53d8\u7684\uff0c\u90a3\u4e48\u5982\u679c\u8fd8\u50cf\u4e0a\u8ff0\u7528 useRef \u8fd9\u4e48\u5199\uff0c\u5c31\u4f1a\u9020\u6210 context \u53d8\u5316\uff0c\u5f97\u4e0d\u5230\u6700\u65b0\u7684 value \u503c\u7684\u60c5\u51b5\u53d1\u751f\u3002"),l.createElement("p",null,"\u6240\u4ee5\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u53ef\u53d8\u6027\u7684\u95ee\u9898\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u5bf9\u4e8e\u4f9d\u8d56\u4e8e\u53ef\u53d8\u6027\u72b6\u6001\u7684\u6267\u884c\u903b\u8f91\uff0c\u53ef\u4ee5\u7528 ",l.createElement("code",null,"useMemo")," \u6765\u5904\u7406\u3002"),l.createElement("li",null,"\u5bf9\u4e8e\u53ef\u53d8\u6027\u72b6\u6001\u7684\u6267\u884c\u526f\u4f5c\u7528\uff0c\u53ef\u4ee5\u7528 ",l.createElement("code",null,"useEffect")," \u6765\u5904\u7406\u3002"),l.createElement("li",null,"\u5bf9\u4e8e\u4f9d\u8d56\u53ef\u53d8\u6027\u72b6\u6001\u7684\u51fd\u6570\u6216\u8005\u5c5e\u6027\uff0c\u53ef\u4ee5\u7528",l.createElement("code",null,"useCallback"),"\u6765\u5904\u7406\u3002")),l.createElement("p",null,"\u4e8e\u662f\u9700\u8981\u628a\u4e0a\u8ff0\u81ea\u5b9a\u4e49 hooks \u6539\u7248\u3002"),l.createElement(c.Z,{code:"function useXXX(){\n    const value = React.useContext(defaultContext)\n    const newValue = React.useMemo(()=> initValueFunction(value) ,[  value  ] )  \n    return  newValue\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u7528 React.useMemo \u6765\u5bf9 initValueFunction \u521d\u59cb\u5316\u903b\u8f91\u505a\u7f13\u5b58\uff0c\u5f53\u4e0a\u4e0b\u6587 value \u6539\u53d8\u7684\u65f6\u5019\uff0c\u91cd\u65b0\u751f\u6210\u65b0\u7684 newValue \u3002")),l.createElement("p",null,"\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u8981\u6bd4\u8fd9\u79cd\u60c5\u51b5\u590d\u6742\u3002\u5f00\u53d1\u8005\u5e94\u8be5\u6ce8\u610f\u5728\u81ea\u5b9a\u4e49 hooks \u4e2d\uff0c\u54ea\u4e9b\u72b6\u6001\u662f\u53ef\u53d8\u7684\uff0c\u72b6\u6001\u6539\u53d8\uff0c\u53c8\u4f1a\u7d27\u8ddf\u7740\u54ea\u4e9b\u5f71\u54cd\u3002"),l.createElement("h4",{id:"-\u95ed\u5305\u6548\u5e94"},l.createElement(a.AnchorLink,{to:"#-\u95ed\u5305\u6548\u5e94","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u2464 \u95ed\u5305\u6548\u5e94"),l.createElement("p",null,"\u95ed\u5305\u4e5f\u662f\u81ea\u5b9a\u4e49 hooks \u5e94\u8be5\u6ce8\u610f\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u95ee\u9898\u548c \u2463 \u672c\u8d28\u4e00\u6837\u3002\u9996\u5148\u51fd\u6570\u7ec4\u4ef6\u66f4\u65b0\u5c31\u662f\u51fd\u6570\u672c\u8eab\u6267\u884c\uff0c\u4e00\u6b21\u66f4\u65b0\u6240\u6709\u542b\u6709\u72b6\u6001\u7684 hooks \uff08 ",l.createElement("code",null,"useState")," \u548c ",l.createElement("code",null,"useReducer")," \uff09\u4ea7\u751f\u7684\u72b6\u6001 state \u662f\u91cd\u65b0\u58f0\u660e\u7684\u3002\u4f46\u662f\u5982\u679c\u50cf ",l.createElement("code",null,"useEffect")," \uff0c ",l.createElement("code",null,"useMemo")," \uff0c",l.createElement("code",null,"useCallback")," \u7b49\uff0c\u5b83\u4eec\u5185\u90e8\u5982\u679c\u5f15\u7528\u4e86 state \u6216 props \u7684\u503c\uff0c\u800c\u4e14\u8fd9\u4e9b\u72b6\u6001\u6700\u540e\u4fdd\u5b58\u5728\u4e86\u51fd\u6570\u7ec4\u4ef6\u5bf9\u5e94\u7684 fiber \u4e0a\uff0c\u90a3\u4e48\u6b64\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u8fd9\u4e9b\u72b6\u6001\u5c31\u4e0d\u4f1a\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u56de\u6536\u91ca\u653e\u3002\u8fd9\u6837\u9020\u6210\u7684\u5f71\u54cd\u662f\uff0c\u4e0a\u8ff0 hooks \u5982\u679c\u6ca1\u6709\u628a\u5185\u90e8\u4f7f\u7528\u7684 state \u6216 props \u4f5c\u4e3a\u4f9d\u8d56\u9879\uff0c\u90a3\u4e48\u5185\u90e8\u5c31\u4e00\u76f4\u65e0\u6cd5\u4f7f\u7528\u6700\u65b0\u7684 props \u6216\u8005 state \u3002"),l.createElement("p",null,"\u6bd4\u5982\u6211\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u3002"),l.createElement(c.Z,{code:"function useTest(){\n    const [ number ] = React.useState(0)\n    const value = React.useMemo(()=>{\n         // \u5185\u90e8\u5f15\u7528\u4e86 number \u8fdb\u884c\u8ba1\u7b97\n    },[])\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a useMemo \u5185\u90e8\u4f7f\u7528\u4e86 state \u4e2d\u7684 number \u8fdb\u884c\u8ba1\u7b97\uff0c\u5f53 number \u6539\u53d8\u4f46\u662f\u65e0\u6cd5\u5f97\u5230\u6700\u65b0\u7684 value \u3002\u8fd9\u5c31\u662f\u4e0a\u9762\u6211\u8bf4\u5230\u7684\u95ed\u5305\u95ee\u9898\u3002\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f useMemo \u7684 deps \u4e2d\u52a0\u5165 number\u3002")),l.createElement("p",null,"\u4f46\u662f\u6709\u7684\u65f6\u5019\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\u5f80\u5f80\u662f\u66f4\u590d\u6742\u7684\u3002\u6211\u5c06\u5982\u4e0a demo \u4fee\u6539\u3002"),l.createElement(c.Z,{code:"function useTest(){\n    const [ number ] = React.useState(0)\n    const value = React.useMemo(()=>{\n         // \u5185\u90e8\u5f15\u7528\u4e86 number \u8fdb\u884c\u8ba1\u7b97\n    },[ number ])\n    const callback = React.useCallback(function(){\n         // \u5185\u90e8\u5f15\u7528\u4e86 useEffect\n    },[ value ])\n    \n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\uff0c\u5728\u4e4b\u524d\u7684\u57fa\u7840\u4e0a\uff0c\u53c8\u52a0\u4e86 useCallback \u800c\u4e14\u5185\u90e8\u5f15\u7528\u4e86 useMemo \u751f\u6210\u7684 value\u3002 \u8fd9\u4e2a\u65f6\u5019\u5982\u679c useCallback \u6267\u884c\uff0c\u5185\u90e8\u60f3\u8981\u83b7\u53d6\u65b0\u7684\u72b6\u6001\u503c value\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u628a value \u653e\u5728 useCallback \u7684 deps \u4e2d\u3002")),l.createElement("p",null,l.createElement("strong",null,"\ud83e\udd14\u601d\u8003\uff1a\u5982\u4f55\u5206\u6e05\u695a\u4f9d\u8d56\u5173\u7cfb\u5462\uff1f")),l.createElement("ul",null,l.createElement("li",null,l.createElement("strong",null,"\u7b2c\u4e00\u6b65"),"\uff1a\u627e\u5230 hooks \u5185\u90e8\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u7684\u72b6\u6001 \uff0c \u8fd9\u4e2a\u72b6\u6001\u53ef\u4ee5\u662f state \u6216\u8005 props\u3002"),l.createElement("li",null,l.createElement("strong",null,"\u7b2c\u4e8c\u6b65"),"\uff1a\u5206\u6790 useMemo \u6216\u8005 useCallback \u5185\u90e8\u662f\u5426\u4f7f\u7528\u4e0a\u8ff0\u72b6\u6001\uff0c\u6216\u8005\u662f\u5426",l.createElement("strong",null,"\u5173\u8054\u4f7f\u7528")," useMemo \u6216\u8005 useCallback \u6d3e\u751f\u51fa\u6765\u7684\u72b6\u6001\uff08 \u6bd4\u5982\u4e0a\u8ff0\u7684 value \uff0c\u5c31\u662f useMemo \u6d3e\u751f\u7684\u72b6\u6001 \uff09 \uff0c\u5982\u679c\u6709\u4f7f\u7528\uff0c\u90a3\u4e48\u52a0\u5165\u5230 deps \u3002"),l.createElement("li",null,l.createElement("strong",null,"\u7b2c\u4e09\u6b65"),"\uff1a\u5206\u6790 useEffect \uff0cuseLayoutEffect \uff0cuseImperativeHandle \u5185\u90e8\u662f\u5426\u4f7f\u7528\u4e0a\u8ff0\u4e24\u4e2a\u6b65\u9aa4\u4ea7\u751f\u7684\u503c\uff0c\u800c\u4e14\u8fd8\u8981\u8fd9\u4e9b\u503c\u505a\u4e00\u4e9b\u526f\u4f5c\u7528\uff0c\u5982\u679c\u6709\uff0c\u90a3\u4e48\u52a0\u5165\u5230 deps \u3002")),l.createElement("h2",{id:"\u4e09-\u81ea\u5b9a\u4e49-hooks-\u8bbe\u8ba1"},l.createElement(a.AnchorLink,{to:"#\u4e09-\u81ea\u5b9a\u4e49-hooks-\u8bbe\u8ba1","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e09 \u81ea\u5b9a\u4e49 hooks \u8bbe\u8ba1"),l.createElement("p",null,"\u4e0a\u8ff0\u4ecb\u7ecd\u4e86\u81ea\u5b9a\u4e49 hooks \u7684\u6982\u5ff5\u548c\u7279\u6027\uff0c\u63a5\u4e0b\u6765\u91cd\u70b9\u5206\u6790\u4e00\u4e0b\uff0c\u5982\u4f55\u53bb\u8bbe\u8ba1\u4e00\u4e2a\u81ea\u5b9a\u4e49 hooks \u3002"),l.createElement("p",null,"\u9996\u5148\u660e\u786e\u7684\u4e00\u70b9\u662f\uff0c\u81ea\u5b9a\u4e49 hooks \u89e3\u51b3\u903b\u8f91\u590d\u7528\u7684\u95ee\u9898\uff0c\u90a3\u4e48\u5728\u6b63\u5e38\u7684\u4e1a\u52a1\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u8981\u660e\u767d\u54ea\u4e9b\u903b\u8f91\u662f\u91cd\u590d\u6027\u5f3a\u7684\u903b\u8f91\uff0c\u8fd9\u6bb5\u903b\u8f91\u4e3b\u8981\u529f\u80fd\u662f\u4ec0\u4e48\u3002"),l.createElement("p",null,"\u4e0b\u9762\u6211\u628a\u81ea\u5b9a\u4e49 hooks \u80fd\u5b9e\u73b0\u7684\u529f\u80fd\u5316\u6574\u4e3a\u96f6\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u53ef\u80fd\u662f\u4e0b\u9762\u4e00\u79cd\u6216\u8005\u51e0\u79cd\u7684\u7ed3\u5408\u3002"),l.createElement("h3",{id:"1-\u63a5\u6536\u72b6\u6001"},l.createElement(a.AnchorLink,{to:"#1-\u63a5\u6536\u72b6\u6001","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 \u63a5\u6536\u72b6\u6001"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \uff0c\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u53c2\u6570\u6765\u76f4\u63a5\u63a5\u6536\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684\u72b6\u6001\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 useContext \uff0c\u6765\u9690\u5f0f\u83b7\u53d6\u4e0a\u4e0b\u6587\u4e2d\u7684\u72b6\u6001\u3002\u6bd4\u5982 React Router \u4e2d\u6700\u7b80\u5355\u7684\u4e00\u4e2a\u81ea\u5b9a\u4e49 hooks \u2014\u2014 useHistory \uff0c\u7528\u4e8e\u83b7\u53d6 history \u5bf9\u8c61\u3002"),l.createElement(c.Z,{code:"export default function useHistory() {\n    return useContext(RouterContext).history\n}",lang:"js"}),l.createElement("p",null,"\u6ce8\u610f\u26a0\ufe0f\uff1a",l.createElement("strong",null,"\u5982\u679c\u4f7f\u7528\u4e86\u5185\u90e8\u542b\u6709 useContext \u7684\u81ea\u5b9a\u4e49 hooks \uff0c\u90a3\u4e48\u5f53 context \u4e0a\u4e0b\u6587\u6539\u53d8\uff0c\u4f1a\u8ba9\u4f7f\u7528\u81ea\u5b9a\u4e49 hooks \u7684\u7ec4\u4ef6\u81ea\u52a8\u6e32\u67d3\u3002")),l.createElement("h3",{id:"2-\u5b58\u50a8\u7ba1\u7406\u72b6\u6001"},l.createElement(a.AnchorLink,{to:"#2-\u5b58\u50a8\u7ba1\u7406\u72b6\u6001","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u5b58\u50a8\uff5c\u7ba1\u7406\u72b6\u6001"),l.createElement("p",null,l.createElement("strong",null,"\u50a8\u5b58\u72b6\u6001")),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u4e5f\u53ef\u4ee5\u7528\u6765\u50a8\u5b58\u548c\u7ba1\u7406\u72b6\u6001\u3002\u672c\u8d28\u4e0a\u5e94\u7528 useRef \u4fdd\u5b58\u539f\u59cb\u5bf9\u8c61\u7684\u7279\u6027\u3002"),l.createElement("p",null,"\u6bd4\u5982 ",l.createElement("code",null,"rc-form")," \u4e2d\u7684 ",l.createElement("code",null,"useForm")," \u91cc\u9762\u5c31\u662f\u7528 useRef \u6765\u4fdd\u5b58\u8868\u5355\u72b6\u6001\u7ba1\u7406 Store \u7684\u3002\u7b80\u5316\u6d41\u7a0b\u5982\u4e0b"),l.createElement(c.Z,{code:"function useForm(){\n    const formCurrent = React.useRef(null)\n    if(!formCurrent.current){\n        formCurrent.current = new FormStore()\n    }\n    return formCurrent.current\n}",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,"\u8bb0\u5f55\u72b6\u6001")),l.createElement("p",null,"\u5f53\u7136 useRef \u548c useEffect \u53ef\u4ee5\u914d\u5408\u8bb0\u5f55\u51fd\u6570\u7ec4\u4ef6\u7684\u5185\u90e8\u7684\u72b6\u6001\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u7f16\u5199\u4e00\u4e2a\u81ea\u5b9a\u4e49 hooks \u7528\u4e8e\u8bb0\u5f55\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u6b21\u6570\uff0c\u548c\u662f\u5426\u7b2c\u4e00\u6b21\u6e32\u67d3\u3002"),l.createElement(c.Z,{code:"function useRenderCount(){\n    const isFirstRender = React.useRef(true) /* \u8bb0\u5f55\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u6e32\u67d3 */\n    const renderCount = React.useRef(1)      /* \u8bb0\u5f55\u6e32\u67d3\u6b21\u6570 */\n    useEffect(()=>{\n        isFirstRender.current = false        /* \u7b2c\u4e00\u6b21\u6e32\u67d3\u5b8c\u6210\uff0c\u6539\u53d8\u72b6\u6001 */\n    },[])\n    useEffect(()=>{\n        if(!isFirstRender.current) renderCount.current++ /* \u5982\u679c\u4e0d\u662f\u7b2c\u4e00\u6b21\u6e32\u67d3\uff0c\u90a3\u4e48\u6dfb\u52a0\u6e32\u67d3\u6b21\u6570  */\n    })  \n    return [ renderCount.current , isFirstRender.current ]\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u7528 isFirstRender \u8bb0\u5f55\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u6e32\u67d3 \uff0c\u7528 renderCount \u8bb0\u5f55\u6e32\u67d3\u6b21\u6570\uff0c\u7b2c\u4e00\u4e2a useEffect \u4f9d\u8d56\u9879\u4e3a\u7a7a\uff0c\u53ea\u6267\u884c\u4e00\u6b21\uff0c\u7b2c\u4e8c\u4e2a useEffect \u6ca1\u6709\u4f9d\u8d56\u9879\uff0c\u6bcf\u4e00\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\uff0c\u90fd\u4f1a\u6267\u884c\uff0c\u7edf\u8ba1\u6e32\u67d3\u6b21\u6570\u3002")),l.createElement("p",null,"\u4e0a\u8ff0\u53ea\u662f\u4e3e\u4e86\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5f53\u7136\u5728\u5177\u4f53\u5f00\u53d1\u4e2d\uff0c\u53ef\u4ee5\u7528\u81ea\u5b9a\u4e49 hooks \u53bb\u8bb0\u5f55\u4e00\u4e9b\u5176\u4ed6\u7684\u4e1c\u897f\u3002\u6bd4\u5982\u5143\u7d20\u7684\u4fe1\u606f\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5728 useEffect \u4e2d\u83b7\u53d6\u5230\u6700\u65b0\u7684 DOM \u5143\u7d20\u4fe1\u606f\u7684\u3002"),l.createElement("h3",{id:"3-\u66f4\u65b0\u72b6\u6001"},l.createElement(a.AnchorLink,{to:"#3-\u66f4\u65b0\u72b6\u6001","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"3 \u66f4\u65b0\u72b6\u6001"),l.createElement("p",null,l.createElement("strong",null,"\u6539\u53d8\u72b6\u6001")),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u5185\u90e8\u53ef\u4ee5\u4fdd\u5b58\u72b6\u6001\uff0c\u53ef\u4ee5\u628a\u66f4\u65b0\u72b6\u6001\u7684\u65b9\u6cd5\u66b4\u9732\u51fa\u53bb\uff0c\u6765\u6539\u53d8 hooks \u5185\u90e8\u72b6\u6001\u3002\u800c\u66f4\u65b0\u72b6\u6001\u7684\u65b9\u6cd5\u53ef\u4ee5\u662f\u7ec4\u5408\u591a\u6001\u7684\u3002"),l.createElement("p",null,"\u6bd4\u5982\u5b9e\u73b0\u4e00\u4e2a\u9632\u6296\u8282\u6d41\u7684\u81ea\u5b9a\u4e49 hooks \uff1a"),l.createElement(c.Z,{code:"export function debounce(fn, time) {\n    let timer = null;\n    return function(...arg) {\n      if (timer) clearTimeout(timer);\n      timer = setTimeout(() => {\n        fn.apply(this, arg);\n      }, time);\n    };\n}\n\nfunction useDebounceState(defauleValue,time){\n    const [ value , changeValue ] = useState(defauleValue)\n    /* \u5bf9 changeValue \u505a\u9632\u6296\u5904\u7406   */\n    const newChange = React.useMemo(()=> debounce(changeValue,time) ,[ time ])\n    return [ value , newChange ]\n}",lang:"js"}),l.createElement("p",null,"\u4f7f\u7528\uff1a"),l.createElement(c.Z,{code:"export default function Index(){\n    const [ value , setValue ] = useDebounceState('',300)\n    console.log(value)\n    return <div style={{ marginTop:'50px' }} >\n        \u300aReact \u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b\n        <input placeholder=\"\" onChange={(e)=>setValue(e.target.value)}  />\n    </div>\n}",lang:"js"}),l.createElement("p",null,"\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5aa90ff8fe8f401e8ba669af510c35d3~tplv-k3u1fbpfcp-watermark.awebp",alt:"3.gif"})),l.createElement("p",null,l.createElement("strong",null,"\u7ec4\u5408state")),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u53ef\u4ee5\u7ef4\u62a4\u591a\u4e2a state \uff0c\u7136\u540e\u53ef\u4ee5\u7ec4\u5408\u66f4\u65b0\u51fd\u6570\u3002\u6211\u8fd9\u4e48\u8bf4\u53ef\u80fd\u5f88\u591a\u540c\u5b66\u4e0d\u7406\u89e3\uff0c\u4e0b\u9762\u6211\u6765\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u63a7\u5236\u6570\u636e\u52a0\u8f7d\u548cloading\u6548\u679c\uff0c"),l.createElement(c.Z,{code:"function useControlData(){\n    const [ isLoading , setLoading ] = React.useState(false)\n    const [ data,  setData ] = React.useState([])\n    const getData = (data)=> { /* \u83b7\u53d6\u5230\u6570\u636e\uff0c\u6e05\u7a7a loading \u6548\u679c  */\n        setLoading(false)\n        setData(data)\n    }  \n    // ... \u5176\u4ed6\u903b\u8f91\n    const resetData = () =>{  /* \u8bf7\u6c42\u6570\u636e\u4e4b\u524d\uff0c\u6dfb\u52a0 loading \u6548\u679c */\n        setLoading(true)\n        setData([])\n    }\n    return [ getData , resetData , ...  ] \n}",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,"\u5408\u7406state")),l.createElement("p",null,"useState \u548c useRef \u90fd\u53ef\u4ee5\u4fdd\u5b58\u72b6\u6001\uff1a"),l.createElement("ul",null,l.createElement("li",null,"useRef \u53ea\u8981\u7ec4\u4ef6\u4e0d\u9500\u6bc1\uff0c\u4e00\u76f4\u5b58\u5728\uff0c\u800c\u4e14\u53ef\u4ee5\u968f\u65f6\u8bbf\u95ee\u6700\u65b0\u72b6\u6001\u503c\u3002"),l.createElement("li",null,"useState \u53ef\u4ee5\u8ba9\u7ec4\u4ef6\u66f4\u65b0\uff0c\u4f46\u662f state \u9700\u8981\u5728\u4e0b\u4e00\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u7684\u65f6\u5019\u624d\u66f4\u65b0\uff0c\u800c\u4e14\u5982\u679c\u60f3\u8ba9 useEffect \u6216\u8005 useMemo \u8bbf\u95ee\u6700\u65b0\u7684 state \u503c\uff0c\u9700\u8981\u5c06 state \u6dfb\u52a0\u5230 deps \u4f9d\u8d56\u9879\u4e2d\u3002")),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u53ef\u4ee5\u901a\u8fc7 useState + useRef \u7684\u7279\u6027\uff0c\u53d6\u5176\u7cbe\u534e\uff0c\u66f4\u5408\u7406\u7684\u7ba1\u7406 state\u3002\u6bd4\u5982\u5982\u4e0b\u5b9e\u73b0\u4e00\u4e2a",l.createElement("strong",null,"\u540c\u6b65\u7684state")),l.createElement(c.Z,{code:"function useAsyncState(defaultValue){\n   const value = React.useRef(defaultValue)        /* useRef \u7528\u4e8e\u4fdd\u5b58\u72b6\u6001 */\n   const [ ,forceUpdate ] = React.useState(null)   /* useState \u7528\u4e8e\u66f4\u65b0\u7ec4\u4ef6 */\n   const dispatch = (fn) => {                      /* \u6a21\u62df\u4e00\u4e2a\u66f4\u65b0\u51fd\u6570 */\n       let newValue\n       if( typeof fn === 'function' ){\n            newValue = fn(value.current)           /* \u5f53\u53c2\u6570\u4e3a\u51fd\u6570\u7684\u60c5\u51b5 */\n       }else{\n           newValue = fn                           /* \u5f53\u53c2\u6570\u4e3a\u5176\u4ed6\u7684\u60c5\u51b5 */\n       }\n       value.current = newValue\n       forceUpdate({})                             /* \u5f3a\u5236\u66f4\u65b0 */\n   } \n   return [  value , dispatch  ]                   /* \u8fd4\u56de\u548c useState \u4e00\u6837\u7684\u683c\u5f0f */\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"useRef \u7528\u4e8e\u4fdd\u5b58\u72b6\u6001 \uff0cuseState \u7528\u4e8e\u66f4\u65b0\u7ec4\u4ef6\u3002"),l.createElement("li",null,"\u505a\u4e00\u4e2a ",l.createElement("code",null,"dispatch")," \u5904\u7406\u53c2\u6570\u4e3a\u51fd\u6570\u7684\u60c5\u51b5\u3002\u5728 dispatch \u5185\u90e8\u7528 forceUpdate \u89e6\u53d1\u771f\u6b63\u7684\u66f4\u65b0\u3002"),l.createElement("li",null,"\u8fd4\u56de\u7684\u7ed3\u6784\u548c useState \u7ed3\u6784\u76f8\u540c\u3002\u4e0d\u8fc7\u6ce8\u610f\u7684\u662f\u4f7f\u7528\u7684\u65f6\u5019\u8981\u7528 value.current \u3002")),l.createElement("p",null,"\u4f7f\u7528\uff1a"),l.createElement(c.Z,{code:"export default function Index(){\n    const [ data , setData  ] = useAsyncState(0)\n    return <div style={{ marginTop:'50px' }} >\n        \u300aReact \u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b \u70b9\u8d5e \ud83d\udc4d { data.current }\n       <button onClick={ ()=> {\n           setData(num => num + 1)\n           console.log(data.current) //\u6253\u5370\u5230\u6700\u65b0\u7684\u503c\n       } } >\u70b9\u51fb</button>\n    </div>\n}",lang:"js"}),l.createElement("h3",{id:"4-\u64cd\u7eb5-dom--\u7ec4\u4ef6\u5b9e\u4f8b"},l.createElement(a.AnchorLink,{to:"#4-\u64cd\u7eb5-dom--\u7ec4\u4ef6\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"4 \u64cd\u7eb5 DOM / \u7ec4\u4ef6\u5b9e\u4f8b"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u4e5f\u53ef\u4ee5\u8bbe\u8ba1\u6210\u5bf9\u539f\u751f DOM \u7684\u64cd\u7eb5\u63a7\u5236\u3002\u7a76\u5176\u539f\u7406\u7528 useRef \u83b7\u53d6\u5143\u7d20\uff0c \u5728 useEffect \u4e2d\u505a\u5143\u7d20\u7684\u76d1\u542c\u3002"),l.createElement("p",null,"\u6bd4\u5982\u5982\u4e0b\u573a\u666f\uff0c\u7528\u4e00\u4e2a\u81ea\u5b9a\u4e49 hooks \u505a\u4e00\u4e9b\u57fa\u4e8e DOM \u7684\u64cd\u4f5c \u3002"),l.createElement(c.Z,{code:"/* TODO: \u64cd\u7eb5\u539f\u751fdom  */\nfunction useGetDOM(){\n    const dom = React.useRef()\n    React.useEffect(()=>{\n       /* \u505a\u4e00\u4e9b\u57fa\u4e8e dom \u7684\u64cd\u4f5c */\n       console.log(dom.current)\n    },[])\n    return dom\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u81ea\u5b9a\u4e49 useGetDOM \uff0c\u7528 useRef \u83b7\u53d6 DOM \u5143\u7d20\uff0c\u5728 useEffect \u4e2d\u505a\u4e00\u4e9b\u57fa\u4e8e DOM \u7684\u64cd\u4f5c\u3002")),l.createElement("p",null,"\u4f7f\u7528\uff1a"),l.createElement(c.Z,{code:"export default function Index(){\n    const dom = useGetDOM()\n    return <div ref={ dom } >\n        \u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b\n        <button >\u70b9\u8d5e</button>\n    </div>\n}",lang:"js"}),l.createElement("h3",{id:"5-\u6267\u884c\u526f\u4f5c\u7528"},l.createElement(a.AnchorLink,{to:"#5-\u6267\u884c\u526f\u4f5c\u7528","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"5 \u6267\u884c\u526f\u4f5c\u7528"),l.createElement("p",null,"\u81ea\u5b9a\u4e49 hooks \u4e5f\u53ef\u4ee5\u6267\u884c\u4e00\u4e9b\u526f\u4f5c\u7528\uff0c\u6bd4\u5982\u8bf4\u76d1\u542c\u4e00\u4e9b props \u6216 state \u53d8\u5316\u800c\u5e26\u6765\u7684\u526f\u4f5c\u7528\u3002\u6bd4\u5982\u5982\u4e0b\u76d1\u542c\uff0c\u5f53 ",l.createElement("code",null,"value")," \u6539\u53d8\u7684\u65f6\u5019\uff0c\u6267\u884c ",l.createElement("code",null,"cb"),"\u3002"),l.createElement(c.Z,{code:"function useEffectProps(value,cb){\n    const isMounted = React.useRef(false)\n    React.useEffect(()=>{\n         /* \u9632\u6b62\u7b2c\u4e00\u6b21\u6267\u884c */\n        isMounted.current && cb && cb()\n    },[ value ])\n    React.useEffect(()=>{\n          /* \u7b2c\u4e00\u6b21\u6302\u8f7d */\n         isMounted.current = true\n    },[])\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u7528 useRef \u4fdd\u5b58\u662f\u5426\u7b2c\u4e00\u6b21\u7684\u72b6\u6001\u3002\u7136\u540e\u5728\u4e00\u4e2a useEffect \u6539\u53d8\u52a0\u8f7d\u5b8c\u6210\u72b6\u6001\u3002"),l.createElement("li",null,"\u53ea\u6709\u5f53\u4e0d\u662f\u7b2c\u4e00\u6b21\u52a0\u8f7d\u4e14 value \u6539\u53d8\u7684\u65f6\u5019\uff0c\u6267\u884c\u56de\u8c03\u51fd\u6570 cb \u3002"),l.createElement("li",null,"\u5f53\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5b9a\u4e49 hooks \u5c31\u53ef\u4ee5\u76d1\u542c\uff0cprops \u6216\u8005 state \u53d8\u5316\u3002\u63a5\u4e0b\u6765\u5c1d\u8bd5\u4e00\u4e0b\u3002")),l.createElement("p",null,"\u4f7f\u7528\u7ec4\u4ef6\u548c\u7236\u7ec4\u4ef6\uff1a"),l.createElement(c.Z,{code:"function Index(props){\n    useEffectProps( props.a ,()=>{/* \u76d1\u542c a \u53d8\u5316 */\n        console.log('props a \u53d8\u5316:', props.a  )\n    } )\n    return <div>\u5b50\u7ec4\u4ef6</div>\n}\nexport default function Home(){\n    const [ a , setA ] = React.useState(0)\n    const [ b , setB ] = React.useState(0)\n    return <div>\n        <Index a={a}  b={b} />\n        <button onClick={()=> setA(a+1)} >\u6539\u53d8 props a  </button>\n        <button onClick={()=> setB(b+1)} >\u6539\u53d8 props b  </button>\n    </div>\n}",lang:"js"}),l.createElement("p",null,"\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abe8ac2134bf40c890a71e0b12688879~tplv-k3u1fbpfcp-watermark.awebp",alt:"2.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u5f53\u52a8\u6001\u76d1\u542c props.a \uff0cprops.a \u53d8\u5316\uff0c\u76d1\u542c\u51fd\u6570\u6267\u884c\u3002")),l.createElement("h3",{id:"6-\u6301\u7eed\u7ef4\u62a4\u4e2d"},l.createElement(a.AnchorLink,{to:"#6-\u6301\u7eed\u7ef4\u62a4\u4e2d","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"6 \u6301\u7eed\u7ef4\u62a4\u4e2d\uff5e"),l.createElement("p",null,"\u672c\u7ae0\u8282\uff0c\u7b2c\u4e8c\u5341\u4e03\u7ae0\u8282\uff0c\u7b2c\u5341\u56db\u7ae0\u8282\u4e3a\u6301\u7eed\u7ef4\u62a4\u7ae0\u8282\uff0c\u4f1a\u6709\u66f4\u591a\u7cbe\u5f69\u7684\u81ea\u5b9a\u4e49 hooks \u8bbe\u8ba1\u573a\u666f\u3002"),l.createElement("h2",{id:"\u56db-\u603b\u7ed3"},l.createElement(a.AnchorLink,{to:"#\u56db-\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u56db \u603b\u7ed3"),l.createElement("p",null,"\u672c\u7ae0\u8282\u5b66\u4e60\u7684\u5185\u5bb9\u5982\u4e0b\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u81ea\u5b9a\u4e49 hooks \u7684\u6982\u5ff5\u4e0e\u7279\u6027\u3002"),l.createElement("li",null,"\u81ea\u5b9a\u4e49 hooks \u8bbe\u8ba1\u65b9\u5f0f\u3002"))))}));n["default"]=e=>{var n=l.useContext(a.context),t=n.demos;return l.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(u,{demos:t})}}}]);