(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[1338],{64442:function(e,t,n){"use strict";n.r(t);var o=n(67294),r=n(96089),l=n(65659),c=o.memo((e=>{e.demos;return o.createElement(o.Fragment,null,o.createElement("div",{className:"markdown"},o.createElement("h2",{id:"\u4e00-\u524d\u8a00"},o.createElement(r.AnchorLink,{to:"#\u4e00-\u524d\u8a00","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e00 \u524d\u8a00"),o.createElement("p",null,"\u672c\u7ae0\u8282\uff0c\u6211\u4eec\u4f1a\u4ece 0 \u5230 1 \u5b9e\u73b0\u4e00\u4e2a React \u8def\u7531\u529f\u80fd\uff0c\u8fd9\u91cc\u53ef\u4ee5\u79f0\u4e4b\u4e3a ",o.createElement("code",null,"mini-Router"),"\u3002\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u5305\u542b\u5982\u4e0b\u77e5\u8bc6\u70b9\uff1a"),o.createElement("ul",null,o.createElement("li",null,"\u8def\u7531\u66f4\u65b0\u6d41\u7a0b\u4e0e\u539f\u7406\uff1b"),o.createElement("li",null,"\u81ea\u5b9a\u4e49 hooks \u7f16\u5199\u4e0e\u4f7f\u7528\uff1b"),o.createElement("li",null,"context \u5b9e\u8df5\uff1b"),o.createElement("li",null,"hoc \u7f16\u5199\u4e0e\u4f7f\u7528\u3002")),o.createElement("h2",{id:"\u4e8c-\u8bbe\u8ba1\u601d\u8def"},o.createElement(r.AnchorLink,{to:"#\u4e8c-\u8bbe\u8ba1\u601d\u8def","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e8c \u8bbe\u8ba1\u601d\u8def"),o.createElement("p",null,"\u6574\u4e2a mini-Router \u8fd8\u662f\u91c7\u7528 ",o.createElement("code",null,"history")," \u5e93\uff0c\u4e5f\u5c31\u662f mini-Router \u9700\u8981\u5b8c\u6210\u7684\u662f ",o.createElement("code",null,"React-Router")," \u548c ",o.createElement("code",null,"React-Router-DOM")," \u6838\u5fc3\u90e8\u5206\u3002\u4eca\u5929\u7f16\u5199\u7684 mini-Router \u662f\u5728 BrowserHistory \u6a21\u5f0f\u4e0b\u3002"),o.createElement("h3",{id:"1-\u5efa\u7acb\u76ee\u6807"},o.createElement(r.AnchorLink,{to:"#1-\u5efa\u7acb\u76ee\u6807","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"1 \u5efa\u7acb\u76ee\u6807"),o.createElement("p",null,"\u63a5\u4e0b\u6765\u8981\u5b9e\u73b0\u7684\u5177\u4f53\u529f\u80fd\u5982\u4e0b\uff1a"),o.createElement("ul",null,o.createElement("li",null,o.createElement("strong",null,"\u7ec4\u4ef6\u5c42\u9762\uff1a")," \u5728\u7ec4\u4ef6\u5c42\u9762\uff0c\u9700\u8981\u5b9e\u73b0\u63d0\u4f9b\u8def\u7531\u72b6\u6001\u7684 Router \uff0c\u63a7\u5236\u6e32\u67d3\u7684 Route \uff0c\u5339\u914d\u552f\u4e00\u8def\u7531\u7684 Switch \u3002"),o.createElement("li",null,o.createElement("strong",null,"api\u5c42\u9762\uff1a")," \u63d0\u4f9b\u83b7\u53d6 history \u5bf9\u8c61\u7684 useHistory \u65b9\u6cd5\uff0c\u83b7\u53d6 location \u5bf9\u8c61\u7684 useLocation \u65b9\u6cd5\u3002"),o.createElement("li",null,o.createElement("strong",null,"\u9ad8\u9636\u7ec4\u4ef6\u5c42\u9762\uff1a")," \u5bf9\u4e8e\u4e0d\u662f\u8def\u7531\u7684\u9875\u9762\uff0c\u63d0\u4f9b withRouter\uff0c\u80fd\u591f\u83b7\u53d6\u5f53\u524d\u8def\u7531\u72b6\u6001\u3002"),o.createElement("li",null,o.createElement("strong",null,"\u989d\u5916\u529f\u80fd\uff1a")," \u4e4b\u524d\u6709\u5f88\u591a\u540c\u5b66\u95ee\u8fc7\u6211\uff0c\u5728 React \u5e94\u7528\u4e2d\uff0c\u53ef\u4e0d\u53ef\u4ee5\u63d0\u4f9b\u6709\u65b9\u6cd5\u76d1\u542c\u8def\u7531\u6539\u53d8\uff0c\u6240\u4ee5 mini-Router \u9700\u8981\u505a\u7684\u662f\u589e\u52a0\u8def\u7531\u76d1\u542c\u5668\uff0c\u5f53\u8def\u7531\u6539\u53d8\uff0c\u89e6\u53d1\u8def\u7531\u76d1\u542c\u5668\u3002")),o.createElement("h3",{id:"2-\u8bbe\u8ba1\u529f\u80fd\u56fe"},o.createElement(r.AnchorLink,{to:"#2-\u8bbe\u8ba1\u529f\u80fd\u56fe","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"2 \u8bbe\u8ba1\u529f\u80fd\u56fe"),o.createElement("p",null,o.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a9ca32fec8e40819afeecc05d40cdb5~tplv-k3u1fbpfcp-watermark.awebp",alt:"2.jpg"})),o.createElement("h2",{id:"\u4e09-\u4ee3\u7801\u5b9e\u73b0"},o.createElement(r.AnchorLink,{to:"#\u4e09-\u4ee3\u7801\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e09 \u4ee3\u7801\u5b9e\u73b0"),o.createElement("h3",{id:"1-\u7ec4\u4ef6\u5c42\u9762"},o.createElement(r.AnchorLink,{to:"#1-\u7ec4\u4ef6\u5c42\u9762","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"1 \u7ec4\u4ef6\u5c42\u9762"),o.createElement("p",null,o.createElement("strong",null,"\u63d0\u4f9b\u8def\u7531\u66f4\u65b0\u6d3e\u53d1\u2014\u2014Router")),o.createElement(l.Z,{code:"import React ,{ useCallback, useState , useEffect ,createContext, useMemo  } from 'react'\nimport { createBrowserHistory as createHistory  } from 'history'\n\nexport const RouterContext = createContext()\nexport let rootHistory = null\n\nexport default function Router(props){\n     /* \u7f13\u5b58history\u5c5e\u6027 */\n     const history = useMemo(() => {\n          rootHistory = createHistory()\n          return rootHistory\n     },[])\n     const [ location, setLocation ] = useState(history.location)\n     useEffect(()=>{\n          /* \u76d1\u542clocation\u53d8\u5316\uff0c\u901a\u77e5\u66f4\u65b0 */\n          const unlisten = history.listen((location)=>{\n               setLocation(location)\n          })\n          return function () {\n               unlisten && unlisten()\n          }\n     },[])\n     return <RouterContext.Provider\n         value={{\n               location,\n               history,\n               match: { path: '/', url: '/', params: {}, isExact: location.pathname === '/' }\n          }}\n            >\n          {props.children}\n     </RouterContext.Provider>\n}",lang:"js"}),o.createElement("p",null,"Router \u8bbe\u8ba1\u601d\u8def\uff1a"),o.createElement("ul",null,o.createElement("li",null,"\u521b\u5efa\u4e00\u4e2a React Context \uff0c\u7528\u4e8e\u4fdd\u5b58\u8def\u7531\u72b6\u6001\u3002\u7528 Provider \u4f20\u9012 context \u3002"),o.createElement("li",null,"\u7528\u4e00\u4e2a useMemo \u6765\u7f13\u5b58 BrowserHistory \u6a21\u5f0f\u4e0b\u7684\u4ea7\u751f\u7684\u8def\u7531\u5bf9\u8c61 history \uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\uff0c\u5c31\u662f\u4ea7\u751f history \u7684\u540c\u65f6\uff0c\u628a\u5b83\u8d4b\u503c\u7ed9\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf rootHistory \uff0c\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u505a\u5462\uff0c\u7b54\u6848\u4e00\u4f1a\u5c06\u63ed\u6653\u3002"),o.createElement("li",null,"\u901a\u8fc7 useEffect \u8fdb\u884c\u771f\u6b63\u7684\u8def\u7531\u76d1\u542c\uff0c\u5f53\u8def\u7531\u6539\u53d8\uff0c\u901a\u8fc7 useState \uff0c\u6539\u53d8 location \u5bf9\u8c61\uff0c\u4f1a\u6539\u53d8 Provider \u91cc\u9762 value \u7684\u5185\u5bb9\uff0c\u901a\u77e5\u6d88\u8d39 context \u7684 Route \uff0cSwitch \u7b49\u7ec4\u4ef6\u66f4\u65b0\u3002 useEffect \u7684 destory \u7528\u4e8e\u89e3\u7ed1\u8def\u7531\u76d1\u542c\u5668\u3002")),o.createElement("p",null,o.createElement("strong",null,"\u63a7\u5236\u66f4\u65b0\u2014\u2014Route")),o.createElement(l.Z,{code:"import React , { useContext } from 'react'\nimport { matchPath } from 'react-router'\nimport { RouterContext } from './Router'\n\nfunction  Route(props) {\n    const context = useContext(RouterContext)\n    /* \u83b7\u53d6location\u5bf9\u8c61 */\n    const location = props.location || context.location\n    /* \u662f\u5426\u5339\u914d\u5f53\u524d\u8def\u7531\uff0c\u5982\u679c\u7236\u7ea7\u6709switch\uff0c\u5c31\u4f1a\u4f20\u5165computedMatch\u6765\u7cbe\u786e\u5339\u914d\u6e32\u67d3\u6b64\u8def\u7531 */\n    const match = props.computedMatch ? props.computedMatch\n                 : props.path ?  matchPath(location.pathname,props) : context.match\n     /* \u8fd9\u4e2aprops\u7528\u4e8e\u4f20\u9012\u7ed9\u8def\u7531\u7ec4\u4ef6 */\n    const newRouterProps = { ...context, location, match  }\n    let { children, component, render  } = props\n    if(Array.isArray(children) && children.length ===0 ) children = null\n    let renderChildren = null\n    if(newRouterProps.match){\n        if(children){\n            /* \u5f53Router \u662f props children \u6216\u8005 render props \u5f62\u5f0f\u3002*/\n            renderChildren =  typeof children === 'function' ? children(newRouterProps) : children\n        }else if(component){\n            /*  Route\u6709component\u5c5e\u6027 */\n            renderChildren = React.createElement(component, newRouterProps)\n        }else if(render){\n            /*  Route\u6709render\u5c5e\u6027 */\n            renderChildren = render(newRouterProps)\n        }\n    }\n    /* \u9010\u5c42\u4f20\u9012\u4e0a\u4e0b\u6587 */\n    return <RouterContext.Provider  value={newRouterProps}  >\n        {renderChildren}\n    </RouterContext.Provider>\n}\nexport default Route",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u7528 useContext \u63d0\u53d6\u51fa\u8def\u7531\u4e0a\u4e0b\u6587\uff0c\u5f53\u8def\u7531\u72b6\u6001 location \u6539\u53d8\uff0c\u56e0\u4e3a\u6d88\u8d39context \u7684\u7ec4\u4ef6\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\u5f53\u524dRoute\u4f1a\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u901a\u8fc7\u5f53\u524d\u7684 location \u7684 pathname \u8fdb\u884c\u5339\u914d\uff0c\u5224\u65ad\u5f53\u524d\u7ec4\u4ef6\u662f\u5426\u6e32\u67d3\uff0c\u56e0\u4e3a Route \u5b50\u7ec4\u4ef6\u6709\u56db\u79cd\u5f62\u5f0f\uff0c\u6240\u4ee5\u4f1a\u4f18\u5148\u8fdb\u884c\u5224\u65ad\u3002"),o.createElement("li",null,"\u4e3a\u4e86\u8ba9 Route \u7684\u5b50\u7ec4\u4ef6\u8bbf\u95ee\u5230\u5f53\u524d Route \u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u8981\u9009\u62e9\u901a\u8fc7 Provider \u9010\u5c42\u4f20\u9012\u7684\u7279\u70b9\uff0c\u518d\u4e00\u6b21\u4f20\u9012\u5f53\u524d Route \u7684\u4fe1\u606f\uff0c\u8fd9\u6837\u4e5f\u80fd\u591f\u8ba9\u5d4c\u5957\u8def\u7531\u66f4\u7b80\u5355\u7684\u5b9e\u73b0\u3002"),o.createElement("li",null,"\u56e0\u4e3a\u5982\u679c\u7236\u7ea7\u5143\u7d20\u662f Switch \uff0c\u5c31\u4e0d\u9700\u8981\u5339\u914d\u8def\u7531\u4e86\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90fd\u662f Switch \u8be5\u5e72\u7684\u6d3b\uff0c\u6240\u4ee5\u7528 computedMatch \u6765\u8bc6\u522b\u662f\u5426\u4e0a\u4e00\u5c42\u7684 Switch \u5df2\u7ecf\u5339\u914d\u5b8c\u6210\u4e86\u3002")),o.createElement("p",null,o.createElement("strong",null,"\u5339\u914d\u6b63\u786e\u8def\u7531\u2014\u2014 Switch")),o.createElement(l.Z,{code:"import React, { useContext } from 'react'\nimport { matchPath } from 'react-router'\n\nimport { RouterContext } from '../component/Router'\n\nexport default function Switch(props){\n    const context = useContext(RouterContext)\n    const location = props.location || context.location\n    let children , match\n    /* \u904d\u5386children Route \u627e\u5230\u5339\u914d\u7684\u90a3\u4e00\u4e2a */\n    React.Children.forEach(props.children,child=>{\n        if(!match && React.isValidElement(child) ){ /* \u8def\u7531\u5339\u914d\u5e76\u4e3aReact.element\u5143\u7d20\u7684\u65f6\u5019 */\n           const path = child.props.path //\u83b7\u53d6Route\u4e0a\u7684path\n           children = child /* \u5339\u914d\u7684children */\n           match = path ? matchPath(location.pathname,{ ...child.props }) : context.match /* \u8ba1\u7b97\u662f\u5426\u5339\u914d */\n        }\n    })\n    /* \u514b\u9686\u4e00\u4efdChildren\uff0c\u6df7\u5165 computedMatch \u5e76\u6e32\u67d3\u3002 */\n    return  match ? React.cloneElement(children, { location, computedMatch: match }) : null\n}",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"Switch \u4e5f\u8981\u8ba2\u9605\u6765\u81ea context \u7684\u53d8\u5316\uff0c\u7136\u540e\u5bf9 children \u5143\u7d20\uff0c\u8fdb\u884c\u552f\u4e00\u6027\u7684\u8def\u7531\u5339\u914d\u3002"),o.createElement("li",null,"\u901a\u8fc7",o.createElement("code",null,"React.Children.forEach"),"\u904d\u5386\u5b50 Route\uff0c\u7136\u540e\u901a\u8fc7 matchPath \u8fdb\u884c\u5339\u914d\uff0c\u5982\u679c\u5339\u914d\u5230\u7ec4\u4ef6\uff0c\u5c06\u514b\u9686\u7ec4\u4ef6\uff0c\u6df7\u5165 computedMatch\uff0clocation \u7b49\u4fe1\u606f\u3002")),o.createElement("h3",{id:"2-hooksapi\u5c42\u9762"},o.createElement(r.AnchorLink,{to:"#2-hooksapi\u5c42\u9762","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"2 hooksAPI\u5c42\u9762"),o.createElement("p",null,"\u4e3a\u4e86\u8ba9 mini-Router \u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u90fd\u80fd\u81ea\u7531\u83b7\u53d6\u8def\u7531\u72b6\u6001\uff0c\u8fd9\u91cc\u7f16\u5199\u4e86\u4e24\u4e2a\u81ea\u5b9a\u4e49 hooks\u3002"),o.createElement("p",null,o.createElement("strong",null,"\u83b7\u53d6history\u5bf9\u8c61")),o.createElement(l.Z,{code:"import { useContext } from 'react'\nimport { RouterContext  } from '../component/Router'\n/* \u7528useContext\u83b7\u53d6\u4e0a\u4e0b\u6587\u4e2d\u7684history\u5bf9\u8c61 */\nexport default function useHistory() {\n    return useContext(RouterContext).history\n}",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u7528 useContext \u83b7\u53d6\u4e0a\u4e0b\u6587\u4e2d\u7684 history \u5bf9\u8c61\u3002")),o.createElement("p",null,o.createElement("strong",null,"\u83b7\u53d6 location \u5bf9\u8c61")),o.createElement(l.Z,{code:"import { useContext } from 'react'\nimport { RouterContext  } from '../component/Router'\n/* \u7528useContext\u83b7\u53d6\u4e0a\u4e0b\u6587\u4e2d\u7684location\u5bf9\u8c61 */\nexport default function  useLocation() {\n    return useContext(RouterContext).location\n}",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u7528 useContext \u83b7\u53d6\u4e0a\u4e0b\u6587\u4e2d\u7684 location \u5bf9\u8c61\u3002")),o.createElement("p",null,"\u4e0a\u8ff0\u7684\u4e24\u4e2a hooks \u7f16\u5199\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u4f46\u662f\u4e5f\u8981\u6ce8\u610f\u4e00\u4e2a\u95ee\u9898\uff0c\u4e24\u4e2a hooks \u672c\u8d28\u4e0a\u90fd\u662f\u6d88\u8d39\u4e86 context \uff0c\u6240\u4ee5\u7528\u5230\u4e0a\u8ff0\u4e24\u4e2a hook \u7684\u7ec4\u4ef6\uff0c\u5f53context \u53d8\u5316\uff0c\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u63a5\u4e0b\u6765\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u529f\u80fd\uff0c\u76d1\u542c\u8def\u7531\u6539\u53d8\u3002"),o.createElement("p",null,o.createElement("strong",null,"\u76d1\u542c\u8def\u7531\u6539\u53d8"),"\uff0c\u548c\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u4e0d\u540c\uff0c\u4e0d\u60f3\u8ba2\u9605 context \u53d8\u5316\uff0c\u800c\u5e26\u6765\u7684\u66f4\u65b0\u4f5c\u7528\uff0c\u53e6\u5916\u4e00\u70b9\u5c31\u662f\u8fd9\u79cd\u76d1\u542c\u6709\u53ef\u80fd\u5728 Router \u5305\u88f9\u7684\u7ec4\u4ef6\u5c42\u7ea7\u4e4b\u5916\uff0c\u90a3\u4e48\u5982\u4f55\u8fbe\u5230\u76ee\u7684\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5728 Router \u4e2d\u7684 rootHistory \u5c31\u6d3e\u4e0a\u4e86\u7528\u573a\uff0c\u8fd9\u4e2a rootHistory \u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u5168\u5c40\u80fd\u591f\u4fbf\u6377\u7684\u83b7\u53d6 history \u5bf9\u8c61\u3002\u63a5\u4e0b\u6765\u5177\u4f53\u5b9e\u73b0\u4e00\u4e2a\u76d1\u542c\u8def\u7531\u53d8\u5316\u7684\u81ea\u5b9a\u4e49 hooks \u3002"),o.createElement(l.Z,{code:"import { useEffect } from 'react'\nimport { rootHistory } from '../component/Router'\n\n/* \u76d1\u542c\u8def\u7531\u6539\u53d8 */\nfunction useListen(cb) {\n    useEffect(()=>{\n        if(!rootHistory) return ()=> {}\n        /* \u7ed1\u5b9a\u8def\u7531\u4e8b\u4ef6\u76d1\u542c\u5668 */\n        const unlisten = rootHistory.listen((location)=>{\n             cb && cb(location)\n        })\n        return function () {\n            unlisten && unlisten()\n        }\n    },[])\n}\nexport default useListen",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u5982\u679c rootHistory \u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u8fd9\u4e2a hooks \u4e5f\u5c31\u6ca1\u6709\u4efb\u4f55\u4f5c\u7528\uff0c\u76f4\u63a5\u8fd4\u56de\u7a7a\u51fd\u6570\u5c31\u53ef\u4ee5\u4e86\u3002"),o.createElement("li",null,"\u5982\u679c rootHistory \u5b58\u5728\uff0c\u901a\u8fc7 useEffect \uff0c\u7ed1\u5b9a\u76d1\u542c\u5668\uff0c\u7136\u540e\u5728\u9500\u6bc1\u51fd\u6570\u4e2d\uff0c\u89e3\u7ed1\u76d1\u542c\u5668\u3002")),o.createElement("h3",{id:"3-\u9ad8\u9636\u7ec4\u4ef6\u5c42\u9762"},o.createElement(r.AnchorLink,{to:"#3-\u9ad8\u9636\u7ec4\u4ef6\u5c42\u9762","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"3 \u9ad8\u9636\u7ec4\u4ef6\u5c42\u9762"),o.createElement("p",null,"\u5e0c\u671b\u901a\u8fc7\u4e00\u4e2a HOC \u80fd\u591f\u81ea\u7531\u83b7\u53d6\u8def\u7531\u7684\u72b6\u6001\u3002\u6240\u4ee5\u8981\u5b9e\u73b0\u4e00\u4e2a react-router \u4e2d withRouter \u529f\u80fd\u3002"),o.createElement("p",null,o.createElement("strong",null,"\u83b7\u53d6\u8def\u7531\u72b6\u6001\u2014\u2014withRouter")),o.createElement(l.Z,{code:"import React , { useContext } from 'react'\nimport hoistStatics from 'hoist-non-react-statics'\n\nimport { RouterContext  } from '../component/Router'\n\nexport default function withRouter(Component){\n    const WrapComponent = (props) =>{\n        const { wrappedComponentRef, ...remainingProps } = props\n        const context = useContext(RouterContext)\n        return  <Component {...remainingProps}\n            ref={wrappedComponentRef}\n            {...context}\n                />\n    }\n    return hoistStatics(WrapComponent,Component)",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u5728\u9ad8\u9636\u7ec4\u4ef6\u7684\u5305\u88c5\u7ec4\u4ef6\u4e2d\uff0c\u7528useContext\u83b7\u53d6\u8def\u7531\u72b6\u6001\uff0c\u5e76\u4f20\u9012\u7ed9\u539f\u59cb\u7ec4\u4ef6\u3002"),o.createElement("li",null,"\u901a\u8fc7",o.createElement("code",null,"hoist-non-react-statics"),"\u7ee7\u627f\u539f\u59cb\u7ec4\u4ef6\u7684\u9759\u6001\u5c5e\u6027\u3002")),o.createElement("h3",{id:"4-\u5165\u53e3\u6587\u4ef6"},o.createElement(r.AnchorLink,{to:"#4-\u5165\u53e3\u6587\u4ef6","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"4 \u5165\u53e3\u6587\u4ef6"),o.createElement("p",null,"\u5b8c\u6210\u4e86\u6838\u5fc3 api \u548c\u7ec4\u4ef6\uff0c\u63a5\u4e0b\u6765\u9700\u8981\u51fa\u53e3\u6587\u4ef6\uff0c\u628a\u8fd9\u4e9b\u65b9\u6cd5\u66b4\u9732\u51fa\u53bb\u3002"),o.createElement(l.Z,{code:"//component\nimport Router ,{ RouterContext } from './component/Router'\nimport Route from './component/Route'\nimport Switch from './component/Switch'\n//hooks\nimport useHistory from './hooks/useHistory'\nimport useListen from './hooks/useListen'\nimport useLocation from './hooks/useLocation'\n//hoc\nimport withRouter from './hoc/withRouter'\n\nexport {\n    Router,\n    Switch,\n    Route,\n    RouterContext,\n    useHistory,\n    useListen,\n    useLocation,\n    withRouter\n}",lang:"js"}),o.createElement("h2",{id:"\u56db-\u9a8c\u8bc1\u6548\u679c"},o.createElement(r.AnchorLink,{to:"#\u56db-\u9a8c\u8bc1\u6548\u679c","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u56db \u9a8c\u8bc1\u6548\u679c"),o.createElement("p",null,"\u4e00\u4e2a\u7b80\u5355\u7684\u8def\u7531\u5e93\u5c31\u5b9e\u73b0\u4e86\uff0c\u63a5\u4e0b\u6765\u9a8c\u8bc1\u4e00\u4e0b",o.createElement("code",null,"mini-Router"),"\u7684\u6548\u679c\uff1a"),o.createElement("h3",{id:"\u914d\u7f6e\u8def\u7531"},o.createElement(r.AnchorLink,{to:"#\u914d\u7f6e\u8def\u7531","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u914d\u7f6e\u8def\u7531"),o.createElement(l.Z,{code:"import React from 'react'\nimport { Router, Route, useHistory, useListen, Switch } from './router'\n\n/* \u5f15\u7528\u4e1a\u52a1\u7ec4\u4ef6 */\nimport Detail from './testPage/detail'  /* \u8be6\u60c5\u9875 */\nimport Home  from './testPage/home'     /* \u9996\u9875 */\nimport List from './testPage/list'      /* \u5217\u8868\u9875 */\nimport './index.scss'\n\nconst menusList = [\n    {\n        name:'\u9996\u9875',\n        path:'/home'\n    },\n    {\n        name:'\u5217\u8868',\n        path:'/list'\n    },\n    {\n        name:'\u8be6\u60c5',\n        path:'/detail'\n    }\n]\n/**/\nfunction Nav() {\n    const history  = useHistory()\n    /* \u8def\u7531\u8df3\u8f6c */\n    const RouterGo = (url) =>  history.push(url)\n    const path = history.location.pathname\n    return <div>\n        {\n            menusList.map((item=><span className={`nav ${ item.path===path ? 'active'  : '' }`} key={item.path}\n                onClick={()=>RouterGo(item.path)} >{item.name}</span>))\n        }\n    </div>\n}\n\nfunction  Top() {\n    /* \u8def\u7531\u76d1\u542c */\n    useListen((location)=>{\n        console.log( '\u5f53\u524d\u8def\u7531\u662f\uff1a', location.pathname)\n    })\n    console.log(111)\n    return <div>--------top------</div>\n}\nfunction Index() {\n    console.log('\u6839\u7ec4\u4ef6\u6e32\u67d3')\n    return <Router>\n        <Top/>\n        <Nav />\n        <Switch>\n            <Route component={Home} path=\"/home\"></Route>\n            <Route  component={Detail} path=\"/detail\" />\n            <Route path=\"/list\" render={(props)=> <List {...props} />} />\n        </Switch>\n        <div>--------bottom------</div>\n    </Router>\n}\n\nexport default Index",lang:"js"}),o.createElement("ul",null,o.createElement("li",null,"\u901a\u8fc7 Router\uff0cRoute\uff0cSwitch \u7ed9\u9996\u9875\uff0c\u5217\u8868\uff0c\u8be6\u60c5\u4e09\u4e2a\u9875\u9762\u914d\u7f6e\u8def\u7531\u3002"),o.createElement("li",null,"Top \u91cc\u9762\u8fdb\u884c\u8def\u7531\u76d1\u542c\uff0c\u8def\u7531\u53d8\u5316\uff0c\u7ec4\u4ef6\u4e0d\u6e32\u67d3\u3002"),o.createElement("li",null,"Nav \u91cc\u6539\u53d8\u8def\u7531\uff0c\u5207\u6362\u9875\u9762\u3002")),o.createElement("h3",{id:"\u4e1a\u52a1\u9875\u9762"},o.createElement(r.AnchorLink,{to:"#\u4e1a\u52a1\u9875\u9762","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e1a\u52a1\u9875\u9762"),o.createElement("p",null,o.createElement("strong",null,"\u9996\u9875")),o.createElement(l.Z,{code:"export default function Home(){\n    return <div>\n        hello,world\u3002\n        let us learn React!\n        <HomeOne />\n    </div>\n}",lang:"js"}),o.createElement("p",null,o.createElement("strong",null,"\u9ad8\u9636\u7ec4\u4ef6\u5305\u88f9\u7684 HomeOne")),o.createElement(l.Z,{code:"@withRouter\nclass HomeOne extends React.Component{\n    RouteGo=()=>{\n        const { history } = this.props\n        history.push('/detail')\n    }\n    render(){\n        return <div>\n            <p>\u6d4b\u8bd5HOC\u2014\u2014withRouter</p>\n            <button onClick={this.RouteGo} >\u8df3\u8f6c\u5230\u8be6\u60c5\u9875</button>\n        </div>\n    }\n}",lang:"js"}),o.createElement("p",null,o.createElement("strong",null,"\u5217\u8868\u9875\u9762")),o.createElement(l.Z,{code:"export default function List(){\n    return <div>\n        <li>React.js</li>\n        <li>Vue.js</li>\n        <li>nodejs</li>\n    </div>\n}",lang:"js"}),o.createElement("p",null,o.createElement("strong",null,"\u8be6\u60c5\u9875\u9762")),o.createElement(l.Z,{code:"export default function  Index() {\n    return <div>\n        <p>\u5c0f\u518c\u540d\u79f0\uff1a\u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b</p>\n        <p>\u4f5c\u8005\uff1a\u6211\u4e0d\u662f\u5916\u661f\u4eba</p>\n    </div>\n}",lang:"js"}),o.createElement("h3",{id:"\u6548\u679c"},o.createElement(r.AnchorLink,{to:"#\u6548\u679c","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u6548\u679c"),o.createElement("p",null,o.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94ae8c66f5164ecda6c0b363202adcc3~tplv-k3u1fbpfcp-watermark.awebp",alt:"1.gif"})),o.createElement("h2",{id:"\u4e94-\u603b\u7ed3"},o.createElement(r.AnchorLink,{to:"#\u4e94-\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e94 \u603b\u7ed3"),o.createElement("p",null,"\u672c\u7ae0\u8282\u901a\u8fc7\u5b9e\u73b0\u4e00\u4e2a mini-router\uff0c\u6765\u8d2f\u7a7f\u524d\u9762\u7684\u7ae0\u8282\u4e2d\u7684\u5185\u5bb9\u3002\u63a5\u4e0b\u6765\u5bf9\u8fd9\u8282\u7684\u6536\u83b7\u505a\u4e00\u4e2a\u603b\u7ed3\uff1a"),o.createElement("ul",null,o.createElement("li",null,"\u5f3a\u5316 React-Router \u7684\u6838\u5fc3\u539f\u7406\uff0cRouter\uff0cRoute \u7b49\u7ec4\u4ef6\u3002"),o.createElement("li",null,"\u6e32\u67d3\u63a7\u5236\uff0c\u64cd\u4f5c children \u3002"),o.createElement("li",null,"\u9ad8\u9636\u7ec4\u4ef6\u6df7\u5165\u8def\u7531\u72b6\u6001\u3002"),o.createElement("li",null,"hooks \u7684\u4f7f\u7528\u6307\u5357\uff0c\u6240\u6709\u7ec4\u4ef6\u90fd\u662f\u7528 hooks \u7f16\u5199\u7684\u3002"),o.createElement("li",null,"\u81ea\u5b9a\u4e49 hooks \u7684\u7f16\u5199\u3002"))))}));t["default"]=e=>{var t=o.useContext(r.context),n=t.demos;return o.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&r.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.createElement(c,{demos:n})}}}]);