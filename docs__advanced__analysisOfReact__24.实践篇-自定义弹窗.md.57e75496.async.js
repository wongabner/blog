(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[6086],{8036:function(){},55879:function(e,n,t){"use strict";t.r(n);var l=t(67294),o=t(96089),a=t(65659),r=t(4187),c=l.memo((e=>{e.demos;return l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("h2",{id:"\u4e00-\u524d\u8a00"},l.createElement(o.AnchorLink,{to:"#\u4e00-\u524d\u8a00","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e00 \u524d\u8a00"),l.createElement("p",null,"\u672c\u7ae0\u8282\uff0c\u6211\u4eec\u4e00\u8d77\u6765\u8bbe\u8ba1\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u5f39\u7a97\u7ec4\u4ef6\uff0c\u4f1a\u5305\u542b\u5982\u4e0b\u77e5\u8bc6\u70b9\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u5f39\u7a97\u7ec4\u4ef6\u8bbe\u8ba1\uff1b"),l.createElement("li",null,"ReactDOM.createPortal \u4f7f\u7528\uff1b"),l.createElement("li",null,"\u7ec4\u4ef6\u9759\u6001\u65b9\u6cd5\u4f7f\u7528\uff1b"),l.createElement("li",null,"\u4e0d\u4f9d\u8d56\u7236\u7ec4\u4ef6\u5b9e\u73b0\u6302\u8f7d/\u5378\u8f7d\u7ec4\u4ef6\u3002")),l.createElement("h2",{id:"\u4e8c-\u8bbe\u8ba1\u601d\u8def"},l.createElement(o.AnchorLink,{to:"#\u4e8c-\u8bbe\u8ba1\u601d\u8def","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e8c \u8bbe\u8ba1\u601d\u8def"),l.createElement("h3",{id:"1-\u5efa\u7acb\u76ee\u6807"},l.createElement(o.AnchorLink,{to:"#1-\u5efa\u7acb\u76ee\u6807","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 \u5efa\u7acb\u76ee\u6807"),l.createElement("p",null,"\u8981\u5b9e\u73b0\u7684\u5177\u4f53\u529f\u80fd\u4e0b\uff1a"),l.createElement("p",null,l.createElement("strong",null,"\u7f16\u5199\u7684\u81ea\u5b9a\u4e49 Modal \u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u8c03\u7528\uff1a")),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u79cd\u901a\u8fc7\u6302\u8f7d\u7ec4\u4ef6\u65b9\u5f0f\uff0c\u52a8\u6001\u8bbe\u7f6e visible \u5c5e\u6027\u3002")),l.createElement(a.Z,{code:"<Modal  title={'\u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b'}  visible={visible}  >\n    <div> hello,world </div>\n</Modal>",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e8c\u79cd\u901a\u8fc7 Modal \u9759\u6001\u5c5e\u6027\u65b9\u6cd5\uff0c\u63a7\u5236 Modal \u7684\u663e\u793a/\u9690\u85cf\u3002")),l.createElement(a.Z,{code:"Modal.show({ /* \u81ea\u5b9a\u4e49\u5f39\u7a97\u7684\u663e\u793a */\n    content:<p>\u786e\u5b9a\u8d2d\u4e70\u300aReact\u8fdb\u9636\u6307\u5357\u5c0f\u518c\u300b\u5417</p>,\n    title:'\u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b',\n    onOk:()=>console.log('\u70b9\u51fb\u786e\u5b9a'),\n    onCancel:()=>console.log('\u70b9\u51fb\u53d6\u6d88'),\n    onClose:()=> Modal.hidden() /* \u81ea\u5b9a\u4e49\u5f39\u7a97\u7684\u9690\u85cf */\n})",lang:"js"}),l.createElement("p",null,"\u5982\u4e0a\uff0cModal.show \u63a7\u5236\u81ea\u5b9a\u4e49\u5f39\u7a97\u7684\u663e\u793a\uff0c\u53ef\u4ee5\u901a\u8fc7 Modal.hidden \u63a7\u5236\u5f39\u7a97\u7684\u9690\u85cf\uff0c\u4e1a\u52a1\u5c42\u4e0d\u9700\u8981\u6302\u8f7d\u7ec4\u4ef6\u3002"),l.createElement("p",null,l.createElement("strong",null,"\u5176\u4ed6\u8981\u6c42\uff1a")),l.createElement("ul",null,l.createElement("li",null,"\u81ea\u5b9a\u4e49\u5f39\u7a97\u8981\u6709\u6e10\u53d8\u7684\u52a8\u753b\u6548\u679c\u3002")),l.createElement("h3",{id:"2-\u8bbe\u8ba1\u601d\u8def"},l.createElement(o.AnchorLink,{to:"#2-\u8bbe\u8ba1\u601d\u8def","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u8bbe\u8ba1\u601d\u8def"),l.createElement("h4",{id:"1-props\u7684\u8bbe\u5b9a"},l.createElement(o.AnchorLink,{to:"#1-props\u7684\u8bbe\u5b9a","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 props\u7684\u8bbe\u5b9a"),l.createElement("p",null,"\u5b9e\u73b0\u7684 Modal \u7ec4\u4ef6\u9700\u8981 props \u914d\u7f6e\u9879\u5982\u4e0b\u3002"),l.createElement(r.Z,null,l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,l.createElement("code",null,"props")," \u5c5e\u6027"),l.createElement("th",null,"\u5c5e\u6027\u63cf\u8ff0"),l.createElement("th",null,"\u5c5e\u6027\u7c7b\u578b"))),l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,"visible"),l.createElement("td",null,"\u5f53\u524d modal \u662f\u5426\u663e\u793a"),l.createElement("td",null,"boolean")),l.createElement("tr",null,l.createElement("td",null,"onOk \u56de\u8c03\u51fd\u6570"),l.createElement("td",null,"\u5f53\u70b9\u51fb\u786e\u5b9a\u6309\u94ae\u89e6\u53d1"),l.createElement("td",null,"function")),l.createElement("tr",null,l.createElement("td",null,"onCancel \u56de\u8c03\u51fd\u6570"),l.createElement("td",null,"\u5f53\u70b9\u51fb\u53d6\u6d88\u6309\u94ae\u89e6\u53d1"),l.createElement("td",null,"function")),l.createElement("tr",null,l.createElement("td",null,"closeCb \u56de\u8c03\u51fd\u6570"),l.createElement("td",null,"\u5f53\u5f39\u7a97\u5b8c\u5168\u5173\u95ed\u540e\u89e6\u53d1"),l.createElement("td",null,"function")),l.createElement("tr",null,l.createElement("td",null,"width"),l.createElement("td",null,"\u5f39\u7a97\u5bbd\u5ea6"),l.createElement("td",null,"number")),l.createElement("tr",null,l.createElement("td",null,"okTest"),l.createElement("td",null,"\u786e\u5b9a\u6309\u94ae\u6587\u6848"),l.createElement("td",null,"string")),l.createElement("tr",null,l.createElement("td",null,"cancelText"),l.createElement("td",null,"\u53d6\u6d88\u6309\u94ae\u6587\u6848"),l.createElement("td",null,"string")),l.createElement("tr",null,l.createElement("td",null,"title"),l.createElement("td",null,"Modal\u6807\u9898"),l.createElement("td",null,"string")),l.createElement("tr",null,l.createElement("td",null,"footer"),l.createElement("td",null,"\u81ea\u5b9a\u4e49\u5e95\u90e8\u5185\u5bb9"),l.createElement("td",null,"React Element")),l.createElement("tr",null,l.createElement("td",null,"children"),l.createElement("td",null,"Modal \u5185\u5bb9\uff08\u63d2\u69fd\u6a21\u5f0f\uff09"),l.createElement("td",null,"React Element")),l.createElement("tr",null,l.createElement("td",null,"content"),l.createElement("td",null,"Modal \u5185\u5bb9\uff08 props \u5c5e\u6027\u6a21\u5f0f\uff09"),l.createElement("td",null,"React Element")))),l.createElement("h4",{id:"2-\u7ec4\u4ef6\u4e4b\u5916\u6e32\u67d3"},l.createElement(o.AnchorLink,{to:"#2-\u7ec4\u4ef6\u4e4b\u5916\u6e32\u67d3","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u7ec4\u4ef6\u4e4b\u5916\u6e32\u67d3"),l.createElement("p",null,"\u9700\u8981\u628a\u5f39\u7a97\u7ec4\u4ef6\u6e32\u67d3\u5230\u6302\u8f7d\u7684\u5bb9\u5668\u4e4b\u5916\uff0c\u8fd9\u6837\u4e0d\u53d7\u5230\u7236\u7ec4\u4ef6\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u53ef\u4ee5\u901a\u8fc7 ",l.createElement("code",null,"ReactDOM.createPortal")," API\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002"),l.createElement("p",null,"Portal \u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06\u5b50\u8282\u70b9\u6e32\u67d3\u5230\u5b58\u5728\u4e8e\u7236\u7ec4\u4ef6\u4ee5\u5916\u7684 DOM \u8282\u70b9\u7684\u4f18\u79c0\u7684\u65b9\u6848\u3002createPortal \u53ef\u4ee5\u628a\u5f53\u524d\u7ec4\u4ef6\u6216 element \u5143\u7d20\u7684\u5b50\u8282\u70b9\uff0c\u6e32\u67d3\u5230\u7ec4\u4ef6\u4e4b\u5916\u7684\u5176\u4ed6\u5730\u65b9\u3002"),l.createElement("p",null,"createPortal \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a"),l.createElement(a.Z,{code:"ReactDOM.createPortal(child, container)",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u4e2a\uff1a child \u662f\u4efb\u4f55\u53ef\u6e32\u67d3\u7684 React Element\u5143\u7d20\u3002"),l.createElement("li",null,"\u7b2c\u4e8c\u4e2a\uff1a container \u662f\u4e00\u4e2a DOM \u5143\u7d20\u3002")),l.createElement("h4",{id:"3-\u4e0d\u4f9d\u8d56\u7236\u7ec4\u4ef6\u5b9e\u73b0\u6302\u8f7d\u5378\u8f7d\u7ec4\u4ef6"},l.createElement(o.AnchorLink,{to:"#3-\u4e0d\u4f9d\u8d56\u7236\u7ec4\u4ef6\u5b9e\u73b0\u6302\u8f7d\u5378\u8f7d\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"3 \u4e0d\u4f9d\u8d56\u7236\u7ec4\u4ef6\u5b9e\u73b0\u6302\u8f7d/\u5378\u8f7d\u7ec4\u4ef6"),l.createElement("p",null,l.createElement("strong",null,"\u6302\u8f7d\u7ec4\u4ef6")),l.createElement("p",null,"\u4e00\u4e2a React \u5e94\u7528\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a root Fiber\uff0c \u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7 ",l.createElement("code",null,"ReactDOM.render")," \u6765\u5b9e\u73b0\u7ec4\u4ef6\u7684\u81ea\u7531\u6302\u8f7d\u3002"),l.createElement("p",null,l.createElement("strong",null,"\u5378\u8f7d\u7ec4\u4ef6")),l.createElement("p",null,"\u4e0a\u9762\u65e2\u7136\u5b8c\u6210\u4e86\u6302\u8f7d\u7ec4\u4ef6\uff0c\u4e0b\u9762\u9700\u8981\u5728\u9690\u85cf Modal \u7684\u65f6\u5019\u53bb\u5378\u8f7d\u7ec4\u4ef6\u3002 \u53ef\u4ee5\u901a\u8fc7 ",l.createElement("code",null,"ReactDOM.unmountComponentAtNode")," \u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002"),l.createElement("p",null,"unmountComponentAtNode \u4ece DOM \u4e2d\u5378\u8f7d\u7ec4\u4ef6\uff0c\u4f1a\u5c06\u5176\u4e8b\u4ef6\u5904\u7406\u5668\u548c state \u4e00\u5e76\u6e05\u9664\u3002 \u5982\u679c\u6307\u5b9a\u5bb9\u5668\u4e0a\u6ca1\u6709\u5bf9\u5e94\u5df2\u6302\u8f7d\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u51fd\u6570\u4ec0\u4e48\u4e5f\u4e0d\u4f1a\u505a\u3002\u5982\u679c\u7ec4\u4ef6\u88ab\u79fb\u9664\u5c06\u4f1a\u8fd4\u56de true \uff0c\u5982\u679c\u6ca1\u6709\u7ec4\u4ef6\u53ef\u88ab\u79fb\u9664\u5c06\u4f1a\u8fd4\u56de false \u3002"),l.createElement("h2",{id:"\u4e09-\u4ee3\u7801\u5b9e\u73b0"},l.createElement(o.AnchorLink,{to:"#\u4e09-\u4ee3\u7801\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e09 \u4ee3\u7801\u5b9e\u73b0"),l.createElement("h3",{id:"1-\u7ec4\u4ef6\u5c42\u9762"},l.createElement(o.AnchorLink,{to:"#1-\u7ec4\u4ef6\u5c42\u9762","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 \u7ec4\u4ef6\u5c42\u9762"),l.createElement("h4",{id:"modal\u5206\u914d-props-\u6e32\u67d3\u89c6\u56fe"},l.createElement(o.AnchorLink,{to:"#modal\u5206\u914d-props-\u6e32\u67d3\u89c6\u56fe","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"Modal\u2014\u2014\u5206\u914d props \uff0c\u6e32\u67d3\u89c6\u56fe"),l.createElement(a.Z,{code:'import Dialog from \'./dialog\'\n\nclass Modal extends React.PureComponent{\n    /* \u6e32\u67d3\u5e95\u90e8\u6309\u94ae */\n    renderFooter=()=>{\n        const { onOk , onCancel , cancelText , okText, footer  } = this.props\n        /* \u89e6\u53d1 onOk / onCancel \u56de\u8c03  */\n        if(footer && React.isValidElement(footer)) return footer\n        return <div className="model_bottom" >\n            <div className="model_btn_box" >\n                <button className="searchbtn"  onClick={(e)=>{ onOk && onOk(e) }} >{okText || \'\u786e\u5b9a\'}</button>\n                <button className="concellbtn" onClick={(e)=>{ onCancel && onCancel(e) }} >{cancelText || \'\u53d6\u6d88\'}</button>\n            </div>\n        </div>\n    }\n\n    /* \u6e32\u67d3\u9876\u90e8 */\n    renderTop=()=>{\n        const { title , onClose  } = this.props\n        return <div className="model_top" >\n            <p>{title}</p>\n            <span className="model_top_close"  onClick={()=> onClose && onClose()} >x</span>\n        </div>\n    }\n\n    /* \u6e32\u67d3\u5f39\u7a97\u5185\u5bb9 */\n    renderContent=()=>{\n        const { content , children } = this.props\n        return  React.isValidElement(content) ? content\n                : children ? children : null\n    }\n    render(){\n        const { visible, width = 500 ,closeCb , onClose  } = this.props\n        return <Dialog\n            closeCb={closeCb}\n            onClose={onClose}\n            visible={visible}\n            width={width}\n               >\n           {this.renderTop()}\n           {this.renderContent()}\n           {this.renderFooter()}\n     </Dialog>\n    }\n}',lang:"js"}),l.createElement("p",null,"\u8bbe\u8ba1\u601d\u8def\uff1a"),l.createElement("ul",null,l.createElement("li",null,"Modal \u7ec4\u4ef6\u7684\u8bbe\u8ba1\u5b9e\u9645\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u63a5\u6536\u4e0a\u8ff0\u7684 props \u914d\u7f6e\uff0c\u7136\u540e\u5206\u914d\u7ed9 Top\uff0c Foot\uff0c Content \u7b49\u6bcf\u4e2a\u90e8\u5206\u3002"),l.createElement("li",null,"\u8fd9\u91cc\u901a\u8fc7 Dialog \u7ec4\u4ef6\uff0c\u6765\u5b9e\u73b0 Modal \u7684\u52a8\u6001\u663e\u793a/\u9690\u85cf\uff0c\u589e\u52a0\u52a8\u753b\u6548\u679c\u3002"),l.createElement("li",null,"\u7ed1\u5b9a\u786e\u5b9a onOk \uff0c\u53d6\u6d88 onCancel \uff0c\u5173\u95ed onClose \u7b49\u56de\u8c03\u51fd\u6570\u3002"),l.createElement("li",null,"\u901a\u8fc7 PureComponent \u505a\u6027\u80fd\u4f18\u5316\u3002")),l.createElement("h4",{id:"dialog\u63a7\u5236\u663e\u793a\u9690\u85cf"},l.createElement(o.AnchorLink,{to:"#dialog\u63a7\u5236\u663e\u793a\u9690\u85cf","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"Dialog\u2014\u2014\u63a7\u5236\u663e\u793a\u9690\u85cf"),l.createElement(a.Z,{code:"import React , { useMemo , useEffect ,useState  } from 'react'\nimport ReactDOM from 'react-dom'\n\n /* \u63a7\u5236\u5f39\u7a97\u9690\u85cf\u4ee5\u53ca\u52a8\u753b\u6548\u679c */\n const controlShow = (f1,f2,value,timer)=> {\n    f1(value)\n    return  setTimeout(()=>{\n        f2(value)\n    },timer)\n}\nexport default function Dialog(props){\n    const { width , visible , closeCb , onClose  } = props\n    /* \u63a7\u5236 modelShow \u52a8\u753b\u6548\u679c */\n    const [ modelShow , setModelShow ] = useState(visible)\n    const [ modelShowAync , setModelShowAync ] = useState(visible)\n    const renderChildren = useMemo(()=>{\n        /* \u628a\u5143\u7d20\u6e32\u67d3\u5230\u7ec4\u4ef6\u4e4b\u5916\u7684 document.body \u4e0a  */\n        return ReactDOM.createPortal(\n          <div style={{ display:modelShow ? 'block' : 'none'  }} >\n              <div className=\"model_container\" style={{ opacity:modelShowAync ? 1 : 0  }}  >\n                <div className=\"model_wrap\" >\n                    <div  style={{ width:width + 'px'}}  > {props.children} </div>\n                </div>\n              </div>\n              <div  className=\"model_container mast\"  onClick={()=> onClose && onClose()} style={{ opacity:modelShowAync ? 0.6 : 0  }}  />\n          </div>,\n          document.body\n         )\n    },[ modelShowAync, modelShow ])\n    useEffect(()=>{\n        let timer\n        if(visible){\n            /* \u6253\u5f00\u5f39\u7a97\uff0c\u9700\u8981\u5148\u8ba9 */\n           timer = controlShow(setModelShow,setModelShowAync,visible,30)\n        }else{\n           timer = controlShow(setModelShowAync,setModelShow,visible,1000)\n        }\n        return function (){\n            timer && clearTimeout(timer)\n        }\n    },[ visible ])\n    /* \u6267\u884c\u5173\u95ed\u5f39\u7a97\u540e\u7684\u56de\u8c03\u51fd\u6570 closeCb */\n    useEffect(()=>{\n        !modelShow && typeof closeCb  === 'function' && closeCb()\n    },[ modelShow ])\n    return renderChildren",lang:"js"}),l.createElement("p",null,"\u8bbe\u8ba1\u601d\u8def\uff1a"),l.createElement("p",null,"\u9700\u8981\u628a\u5143\u7d20\u6e32\u67d3\u5230\u7ec4\u4ef6\u4e4b\u5916\uff0c\u7528 createPortal \u628a\u5143\u7d20\u76f4\u63a5\u6e32\u67d3\u5230 ",l.createElement("code",null,"document.body")," \u4e0b\uff0c\u4e3a\u4e86\u9632\u6b62\u51fd\u6570\u7ec4\u4ef6\u6bcf\u4e00\u6b21\u6267\u884c\u90fd\u89e6\u53d1 ",l.createElement("code",null,"createPortal"),"\uff0c \u6240\u4ee5\u901a\u8fc7 useMemo \u505a\u6027\u80fd\u4f18\u5316\u3002"),l.createElement("p",null,"\u56e0\u4e3a\u9700\u8981\u6e10\u53d8\u7684\u52a8\u753b\u6548\u679c\uff0c\u6240\u4ee5\u9700\u8981\u4e24\u4e2a\u53d8\u91cf modelShow / modelShowAync \u6765\u63a7\u5236",l.createElement("strong",null,"\u663e\u793a/\u9690\u85cf"),"\uff0cmodelShow \u8ba9\u5143\u7d20\u663e\u793a/\u9690\u85cf\uff0cmodelShowAync \u63a7\u5236\u52a8\u753b\u6267\u884c\u3002"),l.createElement("ul",null,l.createElement("li",null,"\u5f53\u5f39\u7a97\u8981\u663e\u793a\u7684\u65f6\u5019\uff0c\u8981\u5148\u8bbe\u7f6e modelShow \u8ba9\u7ec4\u4ef6\u663e\u793a\uff0c\u7136\u540e\u7528 setTimeout \u8c03\u5ea6\u8ba9 modelShowAync \u89e6\u53d1\u6267\u884c\u52a8\u753b\u3002"),l.createElement("li",null,"\u5f53\u5f39\u7a97\u8981\u9690\u85cf\u7684\u65f6\u5019\uff0c\u9700\u8981\u5148\u8ba9\u52a8\u753b\u6267\u884c\uff0c\u6240\u4ee5\u5148\u63a7\u5236 modelShowAync \uff0c\u7136\u540e\u901a\u8fc7\u63a7\u5236 modelShow \u5143\u7d20\u9690\u85cf\uff0c\u548c\u4e0a\u8ff0\u6d41\u7a0b\u76f8\u53cd\u3002"),l.createElement("li",null,"\u7528\u4e00\u4e2a\u63a7\u5236\u5668 controlShow \u6765\u6d41\u7545\u6267\u884c\u66f4\u65b0\u4efb\u52a1\u3002")),l.createElement("h3",{id:"2-\u9759\u6001\u5c5e\u6027\u65b9\u6cd5"},l.createElement(o.AnchorLink,{to:"#2-\u9759\u6001\u5c5e\u6027\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u9759\u6001\u5c5e\u6027\u65b9\u6cd5"),l.createElement("p",null,"\u5bf9\u4e8e\u901a\u8fc7\u7ec4\u4ef6\u7684\u9759\u6001\u65b9\u6cd5\u6765\u5b9e\u73b0\u5f39\u7a97\u7684\u663e\u793a\u4e0e\u9690\u85cf\uff0c\u6d41\u7a0b\u5728\u4e0a\u8ff0\u57fa\u7840\u4e0a\uff0c\u8981\u66f4\u590d\u6742\u6709\u4e00\u4e9b\u3002"),l.createElement(a.Z,{code:"let ModalContainer = null\nconst modelSysbol = Symbol('$$__model__Container_hidden')\n\n/* \u9759\u6001\u5c5e\u6027show\u2014\u2014\u63a7\u5236 */\nModal.show = function(config){\n    /* \u5982\u679cmodal\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u7b2c\u4e8c\u6b21show */\n   if(ModalContainer) return\n   const props = { ...config , visible: true }\n   const container = ModalContainer =  document.createElement('div')\n   /* \u521b\u5efa\u4e00\u4e2a\u7ba1\u7406\u8005\uff0c\u7ba1\u7406moal\u72b6\u6001 */\n   const manager =  container[modelSysbol] = {\n       setShow:null,\n       mounted:false,\n       hidden(){\n          const { setShow } = manager\n          setShow && setShow(false)\n       },\n       destory(){\n           /* \u5378\u8f7d\u7ec4\u4ef6 */\n           ReactDOM.unmountComponentAtNode(container)\n          /* \u79fb\u9664\u8282\u70b9 */\n          document.body.removeChild(container)\n          /* \u7f6e\u7a7a\u5143\u7d20 */\n          ModalContainer = null\n       }\n   }\n   const ModelApp = (props) => {\n       const [ show , setShow ] = useState(false)\n       manager.setShow = setShow\n       const { visible,...trueProps } = props\n       useEffect(()=>{\n           /* \u52a0\u8f7d\u5b8c\u6210\uff0c\u8bbe\u7f6e\u72b6\u6001 */\n           manager.mounted = true\n           setShow(visible)\n        },[])\n       return <Modal  {...trueProps} closeCb={() => manager.mounted &&  manager.destory()}  visible={show}  />\n   }\n   /* \u63d2\u5165\u5230body\u4e2d */\n   document.body.appendChild(container)\n   /* \u6e32\u67d3React\u5143\u7d20 */\n   ReactDOM.render(<ModelApp  {...props}  />,container)\n   return manager\n}\n\n/* \u9759\u6001\u5c5e\u6027\u2014\u2014hidden\u63a7\u5236\u9690\u85cf */\nModal.hidden = function(){\n   if(!ModalContainer) return\n   /* \u5982\u679c\u5b58\u5728 ModalContainer \u90a3\u4e48\u9690\u85cf ModalContainer  */\n   ModalContainer[modelSysbol] && ModalContainer[modelSysbol].hidden()\n}\n\nexport default Modal",lang:"js"}),l.createElement("p",null,"\u63a5\u4e0b\u6765\uff0c\u63cf\u8ff0\u4e00\u4e0b\u6d41\u7a0b\u548c\u7ec6\u8282\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u70b9\uff1a\u56e0\u4e3a\u8981\u901a\u8fc7\u8c03\u7528 Modal \u7684\u9759\u6001\u5c5e\u6027\u6765\u5b9e\u73b0\u7ec4\u4ef6\u7684\u663e\u793a\u4e0e\u9690\u85cf\u3002\u6240\u4ee5\u7528 ",l.createElement("code",null,"Modal.show")," \u6765\u63a7\u5236\u663e\u793a\uff0c",l.createElement("code",null,"Modal.hidden"),"\u6765\u63a7\u5236\u9690\u85cf\u3002\u4f46\u662f\u4e24\u8005\u8981\u5efa\u7acb\u8d77\u5173\u8054\uff0c\u6240\u4ee5\u901a\u8fc7\u5168\u5c40",l.createElement("code",null,"ModalContainer"),"\u5c5e\u6027\uff0c\u80fd\u591f\u9690\u85cf\u6389",l.createElement("code",null,"Modal.show")," \u4ea7\u751f\u7684\u5143\u7d20\u4e0e\u7ec4\u4ef6\u3002"),l.createElement("li",null,"\u7b2c\u4e8c\u70b9\uff1a\u5982\u679c\u8c03\u7528 ",l.createElement("code",null,"Modal.show"),"\uff0c\u9996\u5148\u4f1a\u521b\u5efa\u4e00\u4e2a\u5143\u7d20\u5bb9\u5668 container \uff0c\u7528\u6765\u6302\u8f7d Modal \u7ec4\u4ef6\uff0c\u901a\u8fc7 ReactDOM.render \u6302\u8f7d\uff0c\u8fd9\u91cc\u9700\u8981\u628a contianer \u63d2\u5165\u5230 document.body \u4e0a\u3002"),l.createElement("li",null,"\u7b2c\u4e09\u70b9\uff1a\u56e0\u4e3a Modal \u7ec4\u4ef6\u8981\u52a8\u6001\u6df7\u5165 visible \u5c5e\u6027\uff0c\u5e76\u4e14\u505a\u4e00\u4e9b\u521d\u59cb\u5316\u7684\u5de5\u4f5c\uff0c\u6bd4\u5982\u63d0\u4f9b\u9690\u85cf\u5f39\u7a97\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u521b\u5efa\u4e00\u4e2a ModelApp \u5bb9\u5668\u7ec4\u4ef6\u5305\u88f9 Modal\u3002"),l.createElement("li",null,"\u7b2c\u56db\u70b9\uff1a\u56e0\u4e3a\u8981\u5728\u5f39\u7a97\u6d88\u5931\u7684\u52a8\u753b\u6267\u884c\u540e\uff0c\u518d\u7edf\u4e00\u5378\u8f7d\u7ec4\u4ef6\u548c\u5143\u7d20\uff0c\u6240\u4ee5\u5230\u4e86\u672c\u6a21\u5757\u96be\u70b9\uff0c\u5c31\u662f\u521b\u5efa\u4e00\u4e2a modal manager \u7ba1\u7406\u8005\uff0c\u901a\u8fc7 ",l.createElement("code",null,"Symbol('$$__model__Container_hidden')")," \u628a\u7ba1\u7406\u8005\u548c\u5bb9\u5668\u4e4b\u95f4\u5efa\u7acb\u8d77\u5173\u8054\u3002\u5bb9\u5668\u4e0b\u6709 hidden \u53ea\u662f\u9690\u85cf\u7ec4\u4ef6\uff0c\u5e76\u6ca1\u6709\u9500\u6bc1\u7ec4\u4ef6\uff0c\u5f53\u7ec4\u4ef6\u9690\u85cf\u52a8\u753b\u6267\u884c\u5b8c\u6bd5\uff0c\u4f1a\u6267\u884c closeCb \u56de\u8c03\u51fd\u6570\uff0c\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u518d\u7edf\u4e00\u5378\u8f7d\u5143\u7d20\u548c\u7ec4\u4ef6\u3002"),l.createElement("li",null,"\u7b2c\u4e94\u70b9\uff1a\u8c03\u7528",l.createElement("code",null,"Modal.hidden")," \u672c\u8d28\u4e0a\u8c03\u7528\u7684\u662f manager \u4e0a\u7684 hidden \u65b9\u6cd5 \uff0c\u7136\u540e\u6267\u884c\u52a8\u753b\uff0c\u6267\u884c\u9690\u85cf\u5143\u7d20\u3002\u7136\u540e\u518d\u89e6\u53d1 destory \uff0c\u7528 unmountComponentAtNode \u548c removeChild \u505a\u4e00\u4e9b\u6536\u5c3e\u5de5\u4f5c\u3002\u5b8c\u6210\u6574\u4e2a\u6d41\u7a0b\u3002")),l.createElement("p",null,"\u521b\u5efa\u5f39\u7a97\u6d41\u7a0b\u56fe\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6178f43140c487892a4a42e5d6c62b2~tplv-k3u1fbpfcp-watermark.awebp",alt:"3.jpg"})),l.createElement("p",null,"\u5173\u95ed\u5f39\u7a97\u6d41\u7a0b\u56fe\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f9a9f513989494294bfb9e6209f0c62~tplv-k3u1fbpfcp-watermark.awebp",alt:"4.jpg"})),l.createElement("h2",{id:"\u56db-\u9a8c\u8bc1\u73af\u8282"},l.createElement(o.AnchorLink,{to:"#\u56db-\u9a8c\u8bc1\u73af\u8282","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u56db \u9a8c\u8bc1\u73af\u8282"),l.createElement("h3",{id:"\u9a8c\u8bc1\u7b2c\u4e00\u79cd\u901a\u8fc7\u6302\u8f7d\u7ec4\u4ef6\u65b9\u5f0f"},l.createElement(o.AnchorLink,{to:"#\u9a8c\u8bc1\u7b2c\u4e00\u79cd\u901a\u8fc7\u6302\u8f7d\u7ec4\u4ef6\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u9a8c\u8bc1\u7b2c\u4e00\u79cd\u2014\u2014\u901a\u8fc7\u6302\u8f7d\u7ec4\u4ef6\u65b9\u5f0f"),l.createElement(a.Z,{code:"/* \u6302\u8f7d\u65b9\u5f0f\u8c03\u7528modal */\nexport default function Index() {\n    const [ visible , setVisible ] = useState(false)\n    const [ nameShow , setNameShow ] = useState(false)\n    const handleClick = () => {\n        console.log('\u70b9\u51fb')\n        setVisible(!visible)\n        setNameShow(!nameShow)\n    }\n    /* \u9632\u6b62 Model \u7684 PureComponent \u5931\u53bb\u4f5c\u7528 */\n    const [ handleClose ,handleOk, handleCancel ] = useMemo(()=>{\n        const Ok = () =>  console.log('\u70b9\u51fb\u786e\u5b9a\u6309\u94ae')\n        const Close = () => setVisible(false)\n        const Cancel = () => console.log('\u70b9\u51fb\u53d6\u6d88\u6309\u94ae')\n        return [ Close , Ok , Cancel  ]\n    },[])\n\n    return <div>\n        <Modal\n            onCancel={handleCancel}\n            onClose={handleClose}\n            onOk={handleOk}\n            title={'\u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b'}\n            visible={visible}\n            width={700}\n        >\n           <div className=\"feel\" >\n              \u5c0f\u518c\u9605\u8bfb\u611f\u53d7\uff1a <input placeholder=\"\u5199\u4e0b\u4f60\u7684\u611f\u53d7\" />\n              {nameShow && <p>\u4f5c\u8005\uff1a \u6211\u4e0d\u662f\u5916\u661f\u4eba</p>}\n           </div>\n        </Modal>\n        <button onClick={() => {\n            setVisible(!visible)\n            setNameShow(false)\n        }}\n        > model show </button>\n        <button onClick={handleClick} > model show ( \u663e\u793a\u4f5c\u8005 ) </button>\n    </div>\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u5c31\u662f\u6302\u8f7d\u7684\u65b9\u5f0f\u4f7f\u7528 Modal\uff0c\u6ce8\u610f Modal \u7528\u7684\u662f PureComponent \uff0c\u7236\u7ec4\u4ef6\u662f\u51fd\u6570\u7ec4\u4ef6\u5728\u7ed9 PureComponent \u7ed1\u5b9a\u65b9\u6cd5\u7684\u65f6\u5019 \uff0c\u8981\u7528 useMemo \u6216 useCallback \u5904\u7406\u3002")),l.createElement("p",null,"\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b19d0ca825aa496e9aa4faf2b7056616~tplv-k3u1fbpfcp-watermark.awebp",alt:"1.gif"})),l.createElement("h3",{id:"\u9a8c\u8bc1\u7b2c\u4e8c\u79cd\u901a\u8fc7\u9759\u6001\u5c5e\u6027\u65b9\u5f0f"},l.createElement(o.AnchorLink,{to:"#\u9a8c\u8bc1\u7b2c\u4e8c\u79cd\u901a\u8fc7\u9759\u6001\u5c5e\u6027\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u9a8c\u8bc1\u7b2c\u4e8c\u79cd\u2014\u2014\u901a\u8fc7\u9759\u6001\u5c5e\u6027\u65b9\u5f0f"),l.createElement(a.Z,{code:"export default function Index(){\n    const handleClick =() => {\n        Modal.show({\n            content:<p>\u786e\u5b9a\u8d2d\u4e70\u300aReact\u8fdb\u9636\u6307\u5357\u5c0f\u518c\u300b\u5417</p>,\n            title:'\u300aReact\u8fdb\u9636\u5b9e\u8df5\u6307\u5357\u300b',\n            onOk:()=>console.log('\u70b9\u51fb\u786e\u5b9a'),\n            onCancel:()=>console.log('\u70b9\u51fb\u53d6\u6d88'),\n            onClose:()=> Modal.hidden()\n        })\n    }\n    return <div>\n        <button onClick={() => handleClick()} >\u9759\u6001\u65b9\u5f0f\u8c03\u7528\uff0c\u663e\u793amodal</button>\n    </div>\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u8fd9\u79cd\u65b9\u5f0f\u7528\u8d77\u6765\u6bd4\u4e0a\u4e00\u79cd\u8981\u7b80\u5355\u3002\u6d41\u7a0b\u6211\u5c31\u4e0d\u7ec6\u8bf4\u4e86\u3002")),l.createElement("p",null,"\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a81ecfe551e4907bc551b820cd0f007~tplv-k3u1fbpfcp-watermark.awebp",alt:"2.gif"})),l.createElement("h2",{id:"\u4e94-\u603b\u7ed3"},l.createElement(o.AnchorLink,{to:"#\u4e94-\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e94 \u603b\u7ed3"),l.createElement("p",null,"\u672c\u7ae0\u8282\u7684\u77e5\u8bc6\u70b9\u603b\u7ed3\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u81ea\u5b9a\u4e49\u5f39\u7a97\u7ec4\u4ef6\u7684\u7f16\u5199\u2014\u2014\u6302\u8f7d\u7ec4\u4ef6/\u8c03\u7528\u9759\u6001\u5c5e\u6027\u4e24\u79cd\u65b9\u5f0f\u3002"),l.createElement("li",null,"ReactDOM.createPortal \u4f7f\u7528\u3002"),l.createElement("li",null,"ReactDOM.unmountComponentAtNode \u548c ReactDOM.render \u5b9e\u73b0\u81ea\u7531\u6302\u8f7d/\u5378\u8f7d\u7ec4\u4ef6\u3002"),l.createElement("li",null,"hooks \u7684\u4f7f\u7528\u4e0e\u6027\u80fd\u4f18\u5316\u3002"))))}));n["default"]=e=>{var n=l.useContext(o.context),t=n.demos;return l.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(c,{demos:t})}},4187:function(e,n,t){"use strict";var l=t(67294),o=t(97397),a=t.n(o);t(8036);function r(e,n){return s(e)||m(e,n)||i(e,n)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,n){if(e){if("string"===typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function m(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,o,a=[],r=!0,c=!1;try{for(t=t.call(e);!(r=(l=t.next()).done);r=!0)if(a.push(l.value),n&&a.length===n)break}catch(i){c=!0,o=i}finally{try{r||null==t["return"]||t["return"]()}finally{if(c)throw o}}return a}}function s(e){if(Array.isArray(e))return e}var u=function(e){var n=e.children,t=(0,l.useRef)(),o=(0,l.useState)(!1),c=r(o,2),i=c[0],d=c[1],m=(0,l.useState)(!1),s=r(m,2),u=s[0],E=s[1];return(0,l.useEffect)((function(){var e=t.current,n=a()((function(){d(e.scrollLeft>0),E(e.scrollLeft<e.scrollWidth-e.offsetWidth)}),100);return n(),e.addEventListener("scroll",n),window.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),window.removeEventListener("resize",n)}}),[]),l.createElement("div",{className:"__dumi-default-table"},l.createElement("div",{className:"__dumi-default-table-content",ref:t,"data-left-folded":i||void 0,"data-right-folded":u||void 0},l.createElement("table",null,n)))};n["Z"]=u}}]);