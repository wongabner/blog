(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[4549],{28950:function(n,t,e){"use strict";e.r(t);var i=e(67294),a=e(96089),h=e(65659),d=i.memo((n=>{n.demos;return i.createElement(i.Fragment,null,i.createElement("div",{className:"markdown"},i.createElement(h.Z,{code:"import html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\n\nconst ExportUtils = (title, ele) => {\n  // \u6839\u636edpi\u653e\u5927\uff0c\u9632\u6b62\u56fe\u7247\u6a21\u7cca\n  const scale = window.devicePixelRatio > 1 ? window.devicePixelRatio : 2;\n  // \u4e0b\u8f7d\u5c3a\u5bf8 a4 \u7eb8 \u6bd4\u4f8b\n  let pdf = new jsPDF('p', 'pt', 'a4');\n  let width = ele.offsetWidth;\n  let height = ele.offsetHeight;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width * scale;\n  canvas.height = height * scale;\n  var contentWidth = canvas.width;\n  var contentHeight = canvas.height;\n\n  //\u4e00\u9875pdf\u663e\u793ahtml\u9875\u9762\u751f\u6210\u7684canvas\u9ad8\u5ea6;\n  var pageHeight = contentWidth / 592.28 * 841.89;\n  //\u672a\u751f\u6210pdf\u7684html\u9875\u9762\u9ad8\u5ea6\n  var leftHeight = contentHeight;\n  //\u9875\u9762\u504f\u79fb\n  var position = 0;\n  //a4\u7eb8\u7684\u5c3a\u5bf8[595.28,841.89]\uff0chtml\u9875\u9762\u751f\u6210\u7684canvas\u5728pdf\u4e2d\u56fe\u7247\u7684\u5bbd\u9ad8\n  var imgWidth = 595.28;\n  var imgHeight = 592.28 / contentWidth * contentHeight;\n  html2canvas(ele, {\n    useCORS: true,\n    canvas,\n    scale,\n    width,\n    height,\n    x: 0,\n    y: 0,\n  }).then(pdfCanvas => {\n    const imgDataUrl = pdfCanvas.toDataURL();\n\n    if (height > 14400) { // \u8d85\u51fajspdf\u9ad8\u5ea6\u9650\u5236\u65f6\n      const ratio = 14400 / height;\n      // height = 14400;\n      width = width * ratio;\n    }\n\n    // \u7f29\u653e\u4e3a a4 \u5927\u5c0f  pdfpdf.internal.pageSize \u83b7\u53d6\u5f53\u524dpdf\u8bbe\u5b9a\u7684\u5bbd\u9ad8\n    height = height * pdf.internal.pageSize.getWidth() / width;\n    width = pdf.internal.pageSize.getWidth();\n    if (leftHeight < pageHeight) {\n      pdf.addImage(imgDataUrl, 'png', 0, 0, imgWidth, imgHeight);\n    } else {    // \u5206\u9875\n      while (leftHeight > 0) {\n        pdf.addImage(imgDataUrl, 'png', 0, position, imgWidth, imgHeight)\n        leftHeight -= pageHeight;\n        position -= 841.89;\n        //\u907f\u514d\u6dfb\u52a0\u7a7a\u767d\u9875\n        if (leftHeight > 0) {\n          pdf.addPage();\n        }\n      }\n    }\n    // \u5bfc\u51fa\u4e0b\u8f7d \n    pdf.save(`${title}.pdf`);\n  });\n}\n\nexport default ExportUtils;",lang:"js"})))}));t["default"]=n=>{var t=i.useContext(a.context),e=t.demos;return i.useEffect((()=>{var t;null!==n&&void 0!==n&&null!==(t=n.location)&&void 0!==t&&t.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(n.location.hash.slice(1)))}),[]),i.createElement(d,{demos:e})}}}]);