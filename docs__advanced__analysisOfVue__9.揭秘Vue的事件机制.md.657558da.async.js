(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[7798],{7460:function(e,n,t){"use strict";t.r(n);var l=t(67294),a=t(96089),r=t(65659),i=l.memo((e=>{e.demos;return l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("blockquote",null,l.createElement("p",null,"\u8fd9\u4e2a\u7cfb\u5217\u8bb2\u5230\u8fd9\u91cc\uff0cVue\u57fa\u672c\u6838\u5fc3\u7684\u4e1c\u897f\u5df2\u7ecf\u5206\u6790\u5b8c\uff0c\u4f46\u662fVue\u4e4b\u6240\u4ee5\u5f3a\u5927\uff0c\u79bb\u4e0d\u5f00\u5b83\u63d0\u4f9b\u7ed9\u7528\u6237\u7684\u4e00\u4e9b\u5b9e\u7528\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u66f4\u504f\u5411\u4e8e\u4e1a\u52a1\u903b\u8f91\u800c\u975e\u57fa\u672c\u529f\u80fd\u7684\u5b9e\u73b0\u3002\u4f8b\u5982\uff0c\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u5c06",l.createElement("code",null,"@click=***"),"\u7528\u5f97\u98de\u8d77\uff0c\u4f46\u662f\u6211\u4eec\u662f\u5426\u601d\u8003\uff0cVue\u5982\u4f55\u5728\u540e\u9762\u4e3a\u6211\u4eec\u7684\u6a21\u677f\u505a\u4e8b\u4ef6\u76f8\u5173\u7684\u5904\u7406\uff0c\u5e76\u4e14\u6211\u4eec\u7ecf\u5e38\u5229\u7528\u7ec4\u4ef6\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53bb\u5b9e\u73b0\u7236\u5b50\u95f4\u7684\u901a\u4fe1\uff0c\u90a3\u8fd9\u4e2a\u4e8b\u4ef6\u548c\u548c\u539f\u751fdom\u4e8b\u4ef6\u53c8\u6709\u4e0d\u540c\u7684\u5730\u65b9\u5417\uff0c\u80fd\u591f\u5b9e\u73b0\u901a\u4fe1\u7684\u539f\u7406\u53c8\u662f\u4ec0\u4e48\uff0c\u5e26\u7740\u7591\u60d1\uff0c\u6211\u4eec\u6df1\u5165\u6e90\u7801\u5c55\u5f00\u5206\u6790\u3002")),l.createElement("h2",{id:"91-\u6a21\u677f\u7f16\u8bd1"},l.createElement(a.AnchorLink,{to:"#91-\u6a21\u677f\u7f16\u8bd1","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.1. \u6a21\u677f\u7f16\u8bd1"),l.createElement("p",null,l.createElement("code",null,"Vue"),"\u5728\u6302\u8f7d\u5b9e\u4f8b\u524d\uff0c\u6709\u76f8\u5f53\u591a\u7684\u5de5\u4f5c\u662f\u8fdb\u884c\u6a21\u677f\u7684\u7f16\u8bd1\uff0c\u5c06",l.createElement("code",null,"template"),"\u6a21\u677f\u8fdb\u884c\u7f16\u8bd1\uff0c\u89e3\u6790\u6210",l.createElement("code",null,"AST"),"\u6811\uff0c\u518d\u8f6c\u6362\u6210",l.createElement("code",null,"render"),"\u51fd\u6570\uff0c\u800c\u6709\u4e86",l.createElement("code",null,"render"),"\u51fd\u6570\u540e\u624d\u4f1a\u8fdb\u5165\u5b9e\u4f8b\u6302\u8f7d\u8fc7\u7a0b\u3002\u5bf9\u4e8e\u4e8b\u4ef6\u800c\u8a00\uff0c\u6211\u4eec\u7ecf\u5e38\u4f7f\u7528",l.createElement("code",null,"v-on"),"\u6216\u8005",l.createElement("code",null,"@"),"\u5728\u6a21\u677f\u4e0a\u7ed1\u5b9a\u4e8b\u4ef6\u3002\u56e0\u6b64\u5bf9\u4e8b\u4ef6\u7684\u7b2c\u4e00\u6b65\u5904\u7406\uff0c\u5c31\u662f\u5728\u7f16\u8bd1\u9636\u6bb5\u5bf9\u4e8b\u4ef6\u6307\u4ee4\u505a\u6536\u96c6\u5904\u7406\u3002"),l.createElement("p",null,"\u4ece\u4e00\u4e2a\u7b80\u5355\u7684\u7528\u6cd5\u5206\u6790\u7f16\u8bd1\u9636\u6bb5\u6536\u96c6\u7684\u4fe1\u606f\uff1a"),l.createElement(r.Z,{code:'<div id="app">\n    <div v-on:click.stop="doThis">\u70b9\u51fb</div>\n    <span>{{count}}</span>\n</div>',lang:"html"}),l.createElement(r.Z,{code:"<script>\nvar vm = new Vue({\n    el: '#app',\n    data() {\n        return {\n            count: 1\n        }\n    },\n    methods: {\n        doThis() {\n            ++this.count\n        }\n    }\n})\n<\/script>",lang:"js"}),l.createElement("p",null,"\u6211\u4eec\u4e4b\u524d\u5728\u5c06\u6a21\u677f\u7f16\u8bd1\u7684\u65f6\u5019\u5927\u81f4\u8bf4\u8fc7\u7f16\u8bd1\u7684\u6d41\u7a0b\uff0c\u6a21\u677f\u7f16\u8bd1\u7684\u5165\u53e3\u662f\u5728",l.createElement("code",null,"var ast = parse(template.trim(), options);"),"\u4e2d\uff0c",l.createElement("code",null,"parse"),"\u901a\u8fc7\u62c6\u5206\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u5c06\u5176\u89e3\u6790\u4e3a\u4e00\u4e2a",l.createElement("code",null,"AST"),"\u6811\uff0c\u5176\u4e2d\u5bf9\u4e8e\u5c5e\u6027\u7684\u5904\u7406\uff0c\u5728",l.createElement("code",null,"processAttr"),"\u4e2d,\u7531\u4e8e\u5206\u652f\u8f83\u591a\uff0c\u6211\u4eec\u53ea\u5206\u6790\u4f8b\u5b50\u4e2d\u7684\u6d41\u7a0b\u3002"),l.createElement(r.Z,{code:"var dirRE = /^v-|^@|^:/;\n\nfunction processAttrs (el) {\n    var list = el.attrsList;\n    var i, l, name, rawName, value, modifiers, syncGen, isDynamic;\n    for (i = 0, l = list.length; i < l; i++) {\n      name = rawName = list[i].name; // v-on:click\n      value = list[i].value; // doThis\n      if (dirRE.test(name)) { // \u5339\u914dv-\u6216\u8005@\u5f00\u5934\u7684\u6307\u4ee4\n        el.hasBindings = true;\n        modifiers = parseModifiers(name.replace(dirRE, ''));// parseModifiers('on:click')\n        if (modifiers) {\n          name = name.replace(modifierRE, '');\n        }\n        if (bindRE.test(name)) { // v-bind\u5206\u652f\n          // ...\u7559\u5230v-bind\u6307\u4ee4\u65f6\u5206\u6790\n        } else if (onRE.test(name)) { // v-on\u5206\u652f\n          name = name.replace(onRE, ''); // \u62ff\u5230\u771f\u6b63\u7684\u4e8b\u4ef6click\n          isDynamic = dynamicArgRE.test(name);// \u52a8\u6001\u4e8b\u4ef6\u7ed1\u5b9a\n          if (isDynamic) {\n            name = name.slice(1, -1);\n          }\n          addHandler(el, name, value, modifiers, false, warn$2, list[i], isDynamic);\n        } else { // normal directives\n         // \u5176\u4ed6\u6307\u4ee4\u76f8\u5173\u903b\u8f91\n      } else {}\n    }\n  }",lang:"js"}),l.createElement("p",null,l.createElement("code",null,"processAttrs"),"\u7684\u903b\u8f91\u867d\u7136\u8f83\u591a\uff0c\u4f46\u662f\u7406\u89e3\u8d77\u6765\u8f83\u4e3a\u7b80\u5355\uff0c",l.createElement("code",null,"var dirRE = /^v-|^@|^:/;"),"\u662f\u5339\u914d\u4e8b\u4ef6\u76f8\u5173\u7684\u6b63\u5219\uff0c\u547d\u4e2d\u5339\u914d\u7684\u8bb0\u8fc7\u4f1a\u5f97\u5230\u4e8b\u4ef6\u6307\u4ee4\u76f8\u5173\u5185\u5bb9\uff0c\u5305\u62ec\u4e8b\u4ef6\u672c\u8eab\uff0c\u4e8b\u4ef6\u56de\u8c03\u4ee5\u53ca\u4e8b\u4ef6\u4fee\u9970\u7b26\u3002\u6700\u7ec8\u901a\u8fc7",l.createElement("code",null,"addHandler"),"\u65b9\u6cd5\uff0c\u4e3a",l.createElement("code",null,"AST"),"\u6811\u6dfb\u52a0\u4e8b\u4ef6\u76f8\u5173\u7684\u5c5e\u6027\u3002\u800c",l.createElement("code",null,"addHandler"),"\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u529f\u80fd\u662f\u5bf9\u4e8b\u4ef6\u4fee\u9970\u7b26\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u3002"),l.createElement(r.Z,{code:"// el\u662f\u5f53\u524d\u89e3\u6790\u7684AST\u6811\nfunction addHandler (el,name,value,modifiers,important,warn,range,dynamic) {\n    modifiers = modifiers || emptyObject;\n    // passive \u548c prevent\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\uff0c\u53ef\u4ee5\u53c2\u7167\u5b98\u65b9\u6587\u6863\u8bf4\u660e\n    if (\n      warn &&\n      modifiers.prevent && modifiers.passive\n    ) {\n      warn(\n        'passive and prevent can\\'t be used together. ' +\n        'Passive handler can\\'t prevent default event.',\n        range\n      );\n    }\n    // \u8fd9\u90e8\u5206\u7684\u903b\u8f91\u4f1a\u5bf9\u7279\u6b8a\u7684\u4fee\u9970\u7b26\u505a\u5b57\u7b26\u4e32\u62fc\u63a5\u7684\u5904\u7406\uff0c\u4ee5\u5907\u540e\u7eed\u7684\u4f7f\u7528\n    if (modifiers.right) {\n      if (dynamic) {\n        name = \"(\" + name + \")==='click'?'contextmenu':(\" + name + \")\";\n      } else if (name === 'click') {\n        name = 'contextmenu';\n        delete modifiers.right;\n      }\n    } else if (modifiers.middle) {\n      if (dynamic) {\n        name = \"(\" + name + \")==='click'?'mouseup':(\" + name + \")\";\n      } else if (name === 'click') {\n        name = 'mouseup';\n      }\n    }\n    if (modifiers.capture) {\n      delete modifiers.capture;\n      name = prependModifierMarker('!', name, dynamic);\n    }\n    if (modifiers.once) {\n      delete modifiers.once;\n      name = prependModifierMarker('~', name, dynamic);\n    }\n    /* istanbul ignore if */\n    if (modifiers.passive) {\n      delete modifiers.passive;\n      name = prependModifierMarker('&', name, dynamic);\n    }\n    // events \u7528\u6765\u8bb0\u5f55\u7ed1\u5b9a\u7684\u4e8b\u4ef6\n    var events;\n    if (modifiers.native) {\n      delete modifiers.native;\n      events = el.nativeEvents || (el.nativeEvents = {});\n    } else {\n      events = el.events || (el.events = {});\n    }\n\n    var newHandler = rangeSetItem({ value: value.trim(), dynamic: dynamic }, range);\n    if (modifiers !== emptyObject) {\n      newHandler.modifiers = modifiers;\n    }\n\n    var handlers = events[name];\n    /* istanbul ignore if */\n    // \u7ed1\u5b9a\u7684\u4e8b\u4ef6\u53ef\u4ee5\u591a\u4e2a\uff0c\u56de\u8c03\u4e5f\u53ef\u4ee5\u591a\u4e2a\uff0c\u6700\u7ec8\u4f1a\u5408\u5e76\u5230\u6570\u7ec4\u4e2d\n    if (Array.isArray(handlers)) {\n      important ? handlers.unshift(newHandler) : handlers.push(newHandler);\n    } else if (handlers) {\n      events[name] = important ? [newHandler, handlers] : [handlers, newHandler];\n    } else {\n      events[name] = newHandler;\n    }\n    el.plain = false;\n  }",lang:"js"}),l.createElement("p",null,"\u4fee\u9970\u7b26\u7684\u5904\u7406\u4f1a\u6539\u53d8\u6700\u7ec8\u5b57\u7b26\u4e32\u7684\u62fc\u63a5\u7ed3\u679c\uff0c\u6211\u4eec\u770b\u6700\u7ec8\u8f6c\u6362\u7684",l.createElement("code",null,"AST"),"\u6811\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://wongabner.coding.net/p/picgo/d/analysisOfVue/git/raw/master/9.1.png",alt:""})),l.createElement("h2",{id:"92-\u4ee3\u7801\u751f\u6210"},l.createElement(a.AnchorLink,{to:"#92-\u4ee3\u7801\u751f\u6210","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.2. \u4ee3\u7801\u751f\u6210"),l.createElement("p",null,"\u6a21\u677f\u7f16\u8bd1\u7684\u6700\u540e\u4e00\u6b65\u662f\u6839\u636e\u89e3\u6790\u5b8c\u7684",l.createElement("code",null,"AST"),"\u6811\u751f\u6210\u5bf9\u5e94\u5e73\u53f0\u7684\u6e32\u67d3\u51fd\u6570\uff0c\u4e5f\u5c31\u662f",l.createElement("code",null,"render"),"\u51fd\u6570\u7684\u751f\u6210\u8fc7\u7a0b, \u5bf9\u5e94",l.createElement("code",null,"var code = generate(ast, options);"),"\u3002"),l.createElement(r.Z,{code:'function generate (ast,options) {\n    var state = new CodegenState(options);\n    var code = ast ? genElement(ast, state) : \'_c("div")\';\n    return {\n      render: ("with(this){return " + code + "}"), // with\u51fd\u6570\n      staticRenderFns: state.staticRenderFns\n    }\n  }',lang:"js"}),l.createElement("p",null,"\u5176\u4e2d\u6838\u5fc3\u5904\u7406\u5728",l.createElement("code",null,"genElement"),"\u4e2d,",l.createElement("code",null,"genElement"),"\u51fd\u6570\u4f1a\u6839\u636e\u4e0d\u540c\u6307\u4ee4\u7c7b\u578b\u5904\u7406\u4e0d\u540c\u7684\u5206\u652f\uff0c\u5bf9\u4e8e\u666e\u901a\u6a21\u677f\u7684\u7f16\u8bd1\u4f1a\u8fdb\u5165",l.createElement("code",null,"genData"),"\u51fd\u6570\u4e2d\u5904\u7406\uff0c\u540c\u6837\u5206\u6790\u53ea\u9488\u5bf9\u4e8b\u4ef6\u76f8\u5173\u7684\u5904\u7406\uff0c\u4ece\u524d\u9762\u89e3\u6790\u51fa\u7684",l.createElement("code",null,"AST"),"\u6811\u660e\u663e\u770b\u51fa\uff0c",l.createElement("code",null,"AST"),"\u6811\u4e2d\u591a\u4e86",l.createElement("code",null,"events"),"\u7684\u5c5e\u6027,",l.createElement("code",null,"genHandlers"),"\u51fd\u6570\u4f1a\u4e3a",l.createElement("code",null,"event"),"\u5c5e\u6027\u505a\u903b\u8f91\u5904\u7406\u3002"),l.createElement(r.Z,{code:"function genData (el, state) {\n    var data = '{';\n\n    // directives first.\n    // directives may mutate the el's other properties before they are generated.\n    var dirs = genDirectives(el, state);\n    if (dirs) { data += dirs + ','; }\n    //\u5176\u4ed6\u5904\u7406\n    \xb7\xb7\xb7\n\n    // event handlers\n    if (el.events) {\n      data += (genHandlers(el.events, false)) + \",\";\n    }\n\n    \xb7\xb7\xb7\n\n    return data\n  }",lang:"js"}),l.createElement("p",null,l.createElement("code",null,"genHandlers"),"\u7684\u903b\u8f91\uff0c\u4f1a\u904d\u5386\u89e3\u6790\u597d\u7684",l.createElement("code",null,"AST"),"\u6811\uff0c\u62ff\u5230",l.createElement("code",null,"event"),"\u5bf9\u8c61\u5c5e\u6027\uff0c\u5e76\u6839\u636e\u5c5e\u6027\u4e0a\u7684\u4e8b\u4ef6\u5bf9\u8c61\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\u3002"),l.createElement(r.Z,{code:'function genHandlers (events,isNative) {\n    var prefix = isNative ? \'nativeOn:\' : \'on:\';\n    var staticHandlers = "";\n    var dynamicHandlers = "";\n    // \u904d\u5386ast\u6811\u89e3\u6790\u597d\u7684event\u5bf9\u8c61\n    for (var name in events) {\n      //genHandler\u672c\u8d28\u4e0a\u662f\u5c06\u4e8b\u4ef6\u5bf9\u8c61\u8f6c\u6362\u6210\u53ef\u62fc\u63a5\u7684\u5b57\u7b26\u4e32\n      var handlerCode = genHandler(events[name]);\n      if (events[name] && events[name].dynamic) {\n        dynamicHandlers += name + "," + handlerCode + ",";\n      } else {\n        staticHandlers += "\\"" + name + "\\":" + handlerCode + ",";\n      }\n    }\n    staticHandlers = "{" + (staticHandlers.slice(0, -1)) + "}";\n    if (dynamicHandlers) {\n      return prefix + "_d(" + staticHandlers + ",[" + (dynamicHandlers.slice(0, -1)) + "])"\n    } else {\n      return prefix + staticHandlers\n    }\n  }\n// \u4e8b\u4ef6\u6a21\u677f\u4e66\u5199\u5339\u914d\nvar isMethodPath = simplePathRE.test(handler.value); // doThis\nvar isFunctionExpression = fnExpRE.test(handler.value); // () => {} or function() {}\nvar isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, \'\')); // doThis($event)\n\n\nfunction genHandler (handler) {\n    if (!handler) {\n      return \'function(){}\'\n    }\n    // \u4e8b\u4ef6\u7ed1\u5b9a\u53ef\u4ee5\u591a\u4e2a\uff0c\u591a\u4e2a\u5728\u89e3\u6790ast\u6811\u65f6\u4f1a\u4ee5\u6570\u7ec4\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u5982\u679c\u6709\u591a\u4e2a\u5219\u4f1a\u9012\u5f52\u8c03\u7528getHandler\u65b9\u6cd5\u8fd4\u56de\u6570\u7ec4\u3002\n    if (Array.isArray(handler)) {\n      return ("[" + (handler.map(function (handler) { return genHandler(handler); }).join(\',\')) + "]")\n    }\n    // value\uff1a doThis \u53ef\u4ee5\u6709\u4e09\u79cd\u65b9\u5f0f\n    var isMethodPath = simplePathRE.test(handler.value); // doThis\n    var isFunctionExpression = fnExpRE.test(handler.value); // () => {} or function() {}\n    var isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, \'\')); // doThis($event)\n\n    // \u6ca1\u6709\u4efb\u4f55\u4fee\u9970\u7b26\n    if (!handler.modifiers) {\n      // \u7b26\u5408\u51fd\u6570\u5b9a\u4e49\u89c4\u8303\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u8c03\u7528\u51fd\u6570\u540d doThis\n      if (isMethodPath || isFunctionExpression) {\n        return handler.value\n      }\n      // \u4e0d\u7b26\u5408\u5219\u901a\u8fc7function\u51fd\u6570\u5c01\u88c5\u8fd4\u56de\n      return ("function($event){" + (isFunctionInvocation ? ("return " + (handler.value)) : handler.value) + "}") // inline statement\n    } else {\n    // \u5305\u542b\u4fee\u9970\u7b26\u7684\u573a\u666f\n    }\n  }',lang:"js"}),l.createElement("p",null,"\u6a21\u677f\u4e2d\u4e8b\u4ef6\u7684\u5199\u6cd5\u6709\u4e09\u79cd,\u5206\u522b\u5bf9\u5e94\u4e0a\u8bc9\u4e0a\u4e2a\u6b63\u5219\u5339\u914d\u7684\u5185\u5bb9\u3002"),l.createElement("ol",null,l.createElement("li",null,l.createElement("code",null,'<div @click="doThis"></div>')),l.createElement("li",null,l.createElement("code",null,'<div @click="doThis($event)"></div>')),l.createElement("li",null,l.createElement("code",null,'<div @click="()=>',"{","}",'"></div> <div @click="function()',"{","}",'"></div>'))),l.createElement("p",null,"\u4e0a\u8ff0\u5bf9\u4e8b\u4ef6\u5bf9\u8c61\u7684\u8f6c\u6362\uff0c\u5982\u679c\u4e8b\u4ef6\u4e0d\u5e26\u4efb\u4f55\u4fee\u9970\u7b26\uff0c\u5e76\u4e14\u6ee1\u8db3\u6b63\u786e\u7684\u6a21\u677f\u5199\u6cd5\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u8c03\u7528\u4e8b\u4ef6\u540d\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u5219\u6709\u53ef\u80fd\u662f",l.createElement("code",null,'<div @click="console.log(11)"></div>'),"\u7684\u5199\u6cd5\uff0c\u6b64\u65f6\u4f1a\u5c01\u88c5\u5230",l.createElement("code",null,"function($event)","{","}"),"\u4e2d\u3002"),l.createElement("p",null,"\u5305\u542b\u4fee\u9970\u7b26\u7684\u573a\u666f\u8f83\u591a\uff0c\u6211\u4eec\u5355\u72ec\u5217\u51fa\u5206\u6790\u3002\u4ee5\u4e0a\u6587\u4e2d\u7684\u4f8b\u5b50\u8bf4\u660e\uff0c",l.createElement("code",null,"modifiers: ","{"," stop: true ","}"),"\u4f1a\u62ff\u5230",l.createElement("code",null,"stop"),"\u5bf9\u5e94\u9700\u8981\u6dfb\u52a0\u7684\u903b\u8f91\u811a\u672c",l.createElement("code",null,"'$event.stopPropagation();'"),",\u5e76\u5c06\u5b83\u6dfb\u52a0\u5230\u51fd\u6570\u5b57\u7b26\u4e32\u4e2d\u8fd4\u56de\u3002"),l.createElement(r.Z,{code:'function genHandler() {\n  // \xb7\xb7\xb7\n  } else {\n    var code = \'\';\n    var genModifierCode = \'\';\n    var keys = [];\n    // \u904d\u5386modifiers\u4e0a\u8bb0\u5f55\u7684\u4fee\u9970\u7b26\n    for (var key in handler.modifiers) {\n      if (modifierCode[key]) {\n        // \u6839\u636e\u4fee\u9970\u7b26\u6dfb\u52a0\u5bf9\u5e94js\u7684\u4ee3\u7801\n        genModifierCode += modifierCode[key];\n        // left/right\n        if (keyCodes[key]) {\n          keys.push(key);\n        }\n        // \u9488\u5bf9exact\u7684\u5904\u7406\n      } else if (key === \'exact\') {\n        var modifiers = (handler.modifiers);\n        genModifierCode += genGuard(\n          [\'ctrl\', \'shift\', \'alt\', \'meta\']\n            .filter(function (keyModifier) { return !modifiers[keyModifier]; })\n            .map(function (keyModifier) { return ("$event." + keyModifier + "Key"); })\n            .join(\'||\')\n        );\n      } else {\n        keys.push(key);\n      }\n    }\n    if (keys.length) {\n      code += genKeyFilter(keys);\n    }\n    // Make sure modifiers like prevent and stop get executed after key filtering\n    if (genModifierCode) {\n      code += genModifierCode;\n    }\n    // \u6839\u636e\u4e09\u79cd\u4e0d\u540c\u7684\u4e66\u5199\u6a21\u677f\u8fd4\u56de\u4e0d\u540c\u7684\u5b57\u7b26\u4e32\n    var handlerCode = isMethodPath\n      ? ("return " + (handler.value) + "($event)")\n      : isFunctionExpression\n        ? ("return (" + (handler.value) + ")($event)")\n        : isFunctionInvocation\n          ? ("return " + (handler.value))\n          : handler.value;\n    return ("function($event){" + code + handlerCode + "}")\n  }\n}\nvar modifierCode = {\n  stop: \'$event.stopPropagation();\',\n  prevent: \'$event.preventDefault();\',\n  self: genGuard("$event.target !== $event.currentTarget"),\n  ctrl: genGuard("!$event.ctrlKey"),\n  shift: genGuard("!$event.shiftKey"),\n  alt: genGuard("!$event.altKey"),\n  meta: genGuard("!$event.metaKey"),\n  left: genGuard("\'button\' in $event && $event.button !== 0"),\n  middle: genGuard("\'button\' in $event && $event.button !== 1"),\n  right: genGuard("\'button\' in $event && $event.button !== 2")\n};',lang:"js"}),l.createElement("p",null,"\u7ecf\u8fc7\u8fd9\u4e00\u8f6c\u6362\u540e\uff0c\u751f\u6210",l.createElement("code",null,"with"),"\u5c01\u88c5\u7684",l.createElement("code",null,"render"),"\u51fd\u6570\u5982\u4e0b\uff1a"),l.createElement(r.Z,{code:'"_c(\'div\',{attrs:{"id":"app"}},[_c(\'div\',{on:{"click":function($event){$event.stopPropagation();return doThis($event)}}},[_v("\u70b9\u51fb")]),_v(" "),_c(\'span\',[_v(_s(count))])])"',lang:"js"}),l.createElement("h2",{id:"93-\u4e8b\u4ef6\u7ed1\u5b9a"},l.createElement(a.AnchorLink,{to:"#93-\u4e8b\u4ef6\u7ed1\u5b9a","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.3. \u4e8b\u4ef6\u7ed1\u5b9a"),l.createElement("p",null,"\u524d\u9762\u82b1\u4e86\u5927\u91cf\u7684\u7bc7\u5e45\u4ecb\u7ecd\u4e86\u6a21\u677f\u4e0a\u7684\u4e8b\u4ef6\u6807\u8bb0\u5728\u6784\u5efa",l.createElement("code",null,"AST"),"\u6811\u4e0a\u662f\u600e\u4e48\u5904\u7406\uff0c\u5e76\u4e14\u5982\u4f55\u6839\u636e\u6784\u5efa\u7684",l.createElement("code",null,"AST"),"\u6811\u8fd4\u56de\u6b63\u786e\u7684",l.createElement("code",null,"render"),"\u6e32\u67d3\u51fd\u6570\uff0c",l.createElement("strong",null,"\u4f46\u662f\u771f\u6b63\u4e8b\u4ef6\u7ed1\u5b9a\u8fd8\u662f\u79bb\u4e0d\u5f00\u7ed1\u5b9a\u6ce8\u518c\u4e8b\u4ef6"),"\u3002\u8fd9\u4e00\u4e2a\u9636\u6bb5\u5c31\u662f\u53d1\u751f\u5728\u7ec4\u4ef6\u6302\u8f7d\u7684\u9636\u6bb5\u3002 \u6709\u4e86",l.createElement("code",null,"render"),"\u51fd\u6570\uff0c\u81ea\u7136\u53ef\u4ee5\u751f\u6210\u5b9e\u4f8b\u6302\u8f7d\u9700\u8981\u7684",l.createElement("code",null,"Vnode"),"\u6811\uff0c\u5e76\u4e14\u4f1a\u8fdb\u884c",l.createElement("code",null,"patchVnode"),"\u7684\u73af\u8282\u8fdb\u884c\u771f\u5b9e\u8282\u70b9\u7684\u6784\u5efa\uff0c\u5982\u679c\u53d1\u73b0\u8fc7\u7a0b\u5df2\u7ecf\u9057\u5fd8\uff0c\u53ef\u4ee5\u56de\u987e\u4ee5\u5f80\u7ae0\u8282\u3002",l.createElement("code",null,"Vnode"),"\u6811\u7684\u6784\u5efa\u8fc7\u7a0b\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684\u5185\u5bb9\u6ca1\u6709\u660e\u663e\u7684\u533a\u522b\uff0c\u6240\u4ee5\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u4e0d\u505a\u8d58\u8ff0\uff0c\u6700\u7ec8\u751f\u6210\u7684",l.createElement("code",null,"vnode"),"\u5982\u4e0b\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://wongabner.coding.net/p/picgo/d/analysisOfVue/git/raw/master/9.2.png",alt:""})),l.createElement("p",null,"\u6709\u4e86",l.createElement("code",null,"Vnode"),",\u63a5\u4e0b\u6765\u4f1a\u904d\u5386\u5b50\u8282\u70b9\u9012\u5f52\u8c03\u7528",l.createElement("code",null,"createElm"),"\u4e3a\u6bcf\u4e2a\u5b50\u8282\u70b9\u521b\u5efa\u771f\u5b9e\u7684",l.createElement("code",null,"DOM"),",\u7531\u4e8e",l.createElement("code",null,"Vnode"),"\u4e2d\u6709",l.createElement("code",null,"data"),"\u5c5e\u6027\uff0c\u5728\u521b\u5efa\u771f\u5b9e",l.createElement("code",null,"DOM"),"\u65f6\u4f1a\u8fdb\u884c\u6ce8\u518c\u76f8\u5173\u94a9\u5b50\u7684\u8fc7\u7a0b\uff0c\u5176\u4e2d\u4e00\u4e2a\u5c31\u662f\u6ce8\u518c\u4e8b\u4ef6\u76f8\u5173\u5904\u7406\u3002"),l.createElement(r.Z,{code:"function createElm() {\n  \xb7\xb7\xb7\n  // \u9488\u5bf9\u6307\u4ee4\u7684\u5904\u7406\n   if (isDef(data)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n    }\n}\n\n\nfunction invokeCreateHooks (vnode, insertedVnodeQueue) {\n  for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n    cbs.create[i$1](emptyNode, vnode);\n  }\n  i = vnode.data.hook; // Reuse variable\n  if (isDef(i)) {\n    if (isDef(i.create)) { i.create(emptyNode, vnode); }\n    if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n  }\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};",lang:"js"}),l.createElement("p",null,"\u6211\u4eec\u7ecf\u5e38\u4f1a\u5728",l.createElement("code",null,"template"),"\u6a21\u677f\u4e2d\u5b9a\u4e49",l.createElement("code",null,"v-on"),"\u4e8b\u4ef6\uff0c",l.createElement("code",null,"v-bind"),"\u52a8\u6001\u5c5e\u6027\uff0c",l.createElement("code",null,"v-text"),"\u52a8\u6001\u6307\u4ee4\u7b49\uff0c\u548c",l.createElement("code",null,"v-on"),"\u4e8b\u4ef6\u6307\u4ee4\u4e00\u6837\uff0c\u4ed6\u4eec\u90fd\u4f1a\u5728\u7f16\u8bd1\u9636\u6bb5\u548c",l.createElement("code",null,"Vnode"),"\u751f\u6210\u9636\u6bb5\u521b\u5efa",l.createElement("code",null,"data"),"\u5c5e\u6027\uff0c\u56e0\u6b64",l.createElement("code",null,"invokeCreateHooks"),"\u5c31\u662f\u4e00\u4e2a\u6a21\u677f\u6307\u4ee4\u5904\u7406\u7684\u4efb\u52a1\uff0c\u4ed6\u5206\u522b\u9488\u5bf9\u4e0d\u540c\u7684\u6307\u4ee4\u4e3a\u771f\u5b9e\u9636\u6bb5\u521b\u5efa\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u9488\u5bf9\u4e8b\u4ef6\uff0c\u8fd9\u91cc\u4f1a\u8c03\u7528",l.createElement("code",null,"updateDOMListeners"),"\u5bf9\u771f\u5b9e\u7684",l.createElement("code",null,"DOM"),"\u8282\u70b9\u6ce8\u518c\u4e8b\u4ef6\u4efb\u52a1\u3002"),l.createElement(r.Z,{code:"function updateDOMListeners (oldVnode, vnode) {\n  // on\u662f\u4e8b\u4ef6\u6307\u4ee4\u7684\u6807\u5fd7\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  // \u65b0\u65e7\u8282\u70b9\u4e0d\u540c\u7684\u4e8b\u4ef6\u7ed1\u5b9a\u89e3\u7ed1\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  // \u62ff\u5230\u9700\u8981\u6dfb\u52a0\u4e8b\u4ef6\u7684\u771f\u5b9eDOM\u8282\u70b9\n  target$1 = vnode.elm;\n  // normalizeEvents\u662f\u5bf9\u4e8b\u4ef6\u517c\u5bb9\u6027\u7684\u5904\u7406\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}",lang:"js"}),l.createElement("p",null,"\u5176\u4e2d",l.createElement("code",null,"normalizeEvents"),"\u662f\u9488\u5bf9",l.createElement("code",null,"v-model"),"\u7684\u5904\u7406,\u4f8b\u5982\u5728IE\u4e0b\u4e0d\u652f\u6301",l.createElement("code",null,"change"),"\u4e8b\u4ef6\uff0c\u53ea\u80fd\u7528",l.createElement("code",null,"input"),"\u4e8b\u4ef6\u4ee3\u66ff\u3002"),l.createElement("p",null,l.createElement("code",null,"updateListeners"),"\u7684\u903b\u8f91\u4e5f\u5f88\u7b80\u5355\uff0c\u5b83\u4f1a\u904d\u5386",l.createElement("code",null,"on"),"\u4e8b\u4ef6\u5bf9\u65b0\u8282\u70b9\u4e8b\u4ef6\u7ed1\u5b9a\u6ce8\u518c\u4e8b\u4ef6\uff0c\u5bf9\u65e7\u8282\u70b9\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\uff0c\u5b83\u5373\u8981\u5904\u7406\u539f\u751f",l.createElement("code",null,"DOM"),"\u4e8b\u4ef6\u7684\u6dfb\u52a0\u548c\u79fb\u9664\uff0c\u4e5f\u8981\u5904\u7406\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u6dfb\u52a0\u548c\u79fb\u9664\uff0c\u5173\u4e8e\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u540e\u7eed\u5185\u5bb9\u518d\u5206\u6790\u3002"),l.createElement(r.Z,{code:'function updateListeners (on,oldOn,add,remove###1,createOnceHandler,vm) {\n    var name, def###1, cur, old, event;\n    // \u904d\u5386\u4e8b\u4ef6\n    for (name in on) {\n      def###1 = cur = on[name];\n      old = oldOn[name];\n      event = normalizeEvent(name);\n      if (isUndef(cur)) {\n        // \u4e8b\u4ef6\u540d\u975e\u6cd5\u7684\u62a5\u9519\u5904\u7406\n        warn(\n          "Invalid handler for event \\"" + (event.name) + "\\": got " + String(cur),\n          vm\n        );\n      } else if (isUndef(old)) {\n        // \u65e7\u8282\u70b9\u4e0d\u5b58\u5728\n        if (isUndef(cur.fns)) {\n          // createFunInvoker\u8fd4\u56de\u4e8b\u4ef6\u6700\u7ec8\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\n          cur = on[name] = createFnInvoker(cur, vm);\n        }\n        // \u53ea\u89e6\u53d1\u4e00\u6b21\u7684\u4e8b\u4ef6\n        if (isTrue(event.once)) {\n          cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n        }\n        // \u6267\u884c\u771f\u6b63\u6ce8\u518c\u4e8b\u4ef6\u7684\u6267\u884c\u51fd\u6570\n        add(event.name, cur, event.capture, event.passive, event.params);\n      } else if (cur !== old) {\n        old.fns = cur;\n        on[name] = old;\n      }\n    }\n    // \u65e7\u8282\u70b9\u5b58\u5728\uff0c\u63a5\u89e6\u65e7\u8282\u70b9\u4e0a\u7684\u7ed1\u5b9a\u4e8b\u4ef6\n    for (name in oldOn) {\n      if (isUndef(on[name])) {\n        event = normalizeEvent(name);\n        remove###1(event.name, oldOn[name], event.capture);\n      }\n    }\n  }',lang:"js"}),l.createElement("p",null,"\u5728\u521d\u59cb\u6784\u5efa\u5b9e\u4f8b\u65f6\uff0c\u65e7\u8282\u70b9\u662f\u4e0d\u5b58\u5728\u7684,\u6b64\u65f6\u4f1a\u8c03\u7528",l.createElement("code",null,"createFnInvoker"),"\u51fd\u6570\u5bf9\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\u505a\u4e00\u5c42\u5c01\u88c5\uff0c\u7531\u4e8e\u5355\u4e2a\u4e8b\u4ef6\u7684\u56de\u8c03\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u56e0\u6b64",l.createElement("code",null,"createFnInvoker"),"\u7684\u4f5c\u7528\u662f\u5bf9\u5355\u4e2a\uff0c\u591a\u4e2a\u56de\u8c03\u4e8b\u4ef6\u7edf\u4e00\u5c01\u88c5\u5904\u7406\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f53\u4e8b\u4ef6\u89e6\u53d1\u65f6\u771f\u6b63\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\u3002"),l.createElement(r.Z,{code:'function createFnInvoker (fns, vm) {\n  // \u5f53\u4e8b\u4ef6\u89e6\u53d1\u65f6\uff0c\u6267\u884cinvoker\u65b9\u6cd5\uff0c\u65b9\u6cd5\u6267\u884cfns\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    // fns\u662f\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u7ec4\u6210\u7684\u6570\u7ec4\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        // \u904d\u5386\u6267\u884c\u771f\u6b63\u7684\u56de\u8c03\u51fd\u6570\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, "v-on handler");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, "v-on handler")\n    }\n  }\n  invoker.fns = fns;\n  // \u8fd4\u56de\u6700\u7ec8\u4e8b\u4ef6\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\n  return invoker\n}',lang:"js"}),l.createElement("p",null,"\u5176\u4e2d",l.createElement("code",null,"invokeWithErrorHandling"),"\u4f1a\u6267\u884c\u5b9a\u4e49\u597d\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u91cc\u505a\u4e86\u540c\u6b65\u5f02\u6b65\u56de\u8c03\u7684\u9519\u8bef\u5904\u7406\u3002",l.createElement("code",null,"try-catch"),"\u7528\u4e8e\u540c\u6b65\u56de\u8c03\u6355\u83b7\u5f02\u5e38\u9519\u8bef\uff0c",l.createElement("code",null,"Promise.catch"),"\u7528\u4e8e\u6355\u83b7\u5f02\u6b65\u4efb\u52a1\u8fd4\u56de\u9519\u8bef\u3002"),l.createElement(r.Z,{code:'function invokeWithErrorHandling (handler,context,args,vm,info) {\n    var res;\n    try {\n      res = args ? handler.apply(context, args) : handler.call(context);\n      if (res && !res._isVue && isPromise(res)) {\n        // issue #9511\n        // reassign to res to avoid catch triggering multiple times when nested calls\n        // \u5f53\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\u5185\u90e8\u6267\u884c\u8fd4\u56depromise\u5bf9\u8c61\u662f\uff0c\u5982\u679c\u6355\u83b7\u5f02\u5e38\uff0c\u5219\u4f1a\u5bf9\u5f02\u5e38\u4fe1\u606f\u505a\u4e00\u5c42\u5305\u88c5\u8fd4\u56de\n        res = res.catch(function (e) { return handleError(e, vm, info + " (Promise/async)"); });\n      }\n    } catch (e) {\n      handleError(e, vm, info);\n    }\n    return res\n  }',lang:"js"}),l.createElement("p",null,"\u5982\u679c\u4e8b\u4ef6\u53ea\u89e6\u53d1\u4e00\u6b21(\u5373\u4f7f\u7528\u4e86",l.createElement("code",null,"once"),"\u4fee\u9970\u7b26)\uff0c\u5219\u8c03\u7528",l.createElement("code",null,"createOnceHandler"),"\u533f\u540d\uff0c\u5728\u6267\u884c\u5b8c\u56de\u8c03\u4e4b\u540e\uff0c\u79fb\u9664\u4e8b\u4ef6\u7ed1\u5b9a\u3002"),l.createElement(r.Z,{code:"function createOnceHandler (event, handler, capture) {\n    var _target = target$1; \n    return function onceHandler () {\n      //\u8c03\u7528\u4e8b\u4ef6\u56de\u8c03\n      var res = handler.apply(null, arguments);\n      if (res !== null) {\n        // \u79fb\u9664\u4e8b\u4ef6\u7ed1\u5b9a\n        remove$2(event, onceHandler, capture, _target);\n      }\n    }\n  }",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,l.createElement("code",null,"add"),"\u548c",l.createElement("code",null,"remove"),"\u662f\u771f\u6b63\u5728",l.createElement("code",null,"DOM"),"\u4e0a\u7ed1\u5b9a\u4e8b\u4ef6\u548c\u89e3\u7ed1\u4e8b\u4ef6\u7684\u8fc7\u7a0b\uff0c\u5b83\u7684\u5b9e\u73b0\u4e5f\u662f\u5229\u7528\u4e86\u539f\u751f",l.createElement("code",null,"DOM"),"\u7684",l.createElement("code",null,"addEventListener,removeEventListener api"),"\u3002")),l.createElement(r.Z,{code:"function add (name,handler,capture,passive){\n  \xb7\xb7\xb7\n  target$1.addEventListener(name,handler,\n      supportsPassive\n        ? { capture: capture, passive: passive }\n        : capture);\n}\nfunction remove (name,handler,capture,_target) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}",lang:"js"}),l.createElement("p",null,"\u53e6\u5916\u4e8b\u4ef6\u7684\u89e3\u7ed1\u9664\u4e86\u53d1\u751f\u5728\u53ea\u89e6\u53d1\u4e00\u6b21\u7684\u4e8b\u4ef6\uff0c\u4e5f\u53d1\u751f\u5728\u7ec4\u4ef6\u66f4\u65b0",l.createElement("code",null,"patchVnode"),"\u8fc7\u7a0b\uff0c\u5177\u4f53\u4e0d\u5c55\u5f00\u5206\u6790\uff0c\u53ef\u4ee5\u53c2\u8003\u4e4b\u524d\u4ecb\u7ecd\u7ec4\u4ef6\u66f4\u65b0\u7684\u5185\u5bb9\u7814\u7a76",l.createElement("code",null,"updateListeners"),"\u7684\u8fc7\u7a0b\u3002"),l.createElement("h2",{id:"94-\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},l.createElement(a.AnchorLink,{to:"#94-\u81ea\u5b9a\u4e49\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.4. \u81ea\u5b9a\u4e49\u4e8b\u4ef6"),l.createElement("p",null,l.createElement("code",null,"Vue"),"\u5982\u4f55\u5904\u7406\u539f\u751f\u7684",l.createElement("code",null,"Dom"),"\u4e8b\u4ef6\u57fa\u672c\u6d41\u7a0b\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u7136\u800c\u9488\u5bf9\u4e8b\u4ef6\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\u4e0d\u53ef\u5ffd\u7565\uff0c\u90a3\u5c31\u662f\u7ec4\u4ef6\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002\u6211\u4eec\u77e5\u9053\u7236\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u5229\u7528\u4e8b\u4ef6\u8fdb\u884c\u901a\u4fe1\uff0c\u5b50\u7ec4\u4ef6\u901a\u8fc7",l.createElement("code",null,"vm.$emit"),"\u5411\u7236\u7ec4\u4ef6\u5206\u53d1\u4e8b\u4ef6\uff0c\u7236\u7ec4\u4ef6\u901a\u8fc7",l.createElement("code",null,"v-on:(event)"),"\u63a5\u6536\u4fe1\u606f\u5e76\u5904\u7406\u56de\u8c03\u3002\u56e0\u6b64\u9488\u5bf9\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u5728\u6e90\u7801\u4e2d\u81ea\u7136\u6709\u4e0d\u540c\u7684\u5904\u7406\u903b\u8f91\u3002\u6211\u4eec\u5148\u901a\u8fc7\u7b80\u5355\u7684\u4f8b\u5b50\u5c55\u5f00\u3002"),l.createElement(r.Z,{code:'<script>\n    var child = {\n      template: `<div @click="emitToParent">\u70b9\u51fb\u4f20\u9012\u4fe1\u606f\u7ed9\u7236\u7ec4\u4ef6</div>`,\n      methods: {\n        emitToParent() {\n          this.$emit(\'myevent\', 1)\n        }\n      }\n    }\n    new Vue({\n      el: \'#app\',\n      components: {\n        child\n      },\n      template: `<div id="app"><child @myevent="myevent" @click.native="nativeClick"></child></div>`,\n      methods: {\n        myevent(num) {\n          console.log(num)\n        },\n        nativeClick() {\n          console.log(\'nativeClick\')\n        }\n      }\n    })\n  <\/script>',lang:"js"}),l.createElement("p",null,"\u4ece\u4f8b\u5b50\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u666e\u901a\u8282\u70b9\u53ea\u80fd\u4f7f\u7528\u539f\u751f",l.createElement("code",null,"DOM"),"\u4e8b\u4ef6\uff0c\u800c\u7ec4\u4ef6\u4e0a\u5374\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u548c\u539f\u751f\u7684",l.createElement("code",null,"DOM"),"\u4e8b\u4ef6\uff0c\u5e76\u4e14\u901a\u8fc7",l.createElement("code",null,"native"),"\u4fee\u9970\u7b26\u533a\u5206\uff0c\u6709\u4e86\u539f\u751f",l.createElement("code",null,"DOM"),"\u5bf9\u4e8e\u4e8b\u4ef6\u5904\u7406\u7684\u57fa\u7840\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u6709\u4ec0\u4e48\u7279\u522b\u4e4b\u5904\u3002"),l.createElement("h3",{id:"941-\u6a21\u677f\u7f16\u8bd1"},l.createElement(a.AnchorLink,{to:"#941-\u6a21\u677f\u7f16\u8bd1","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.4.1 \u6a21\u677f\u7f16\u8bd1"),l.createElement("p",null,"\u56de\u8fc7\u5934\u6765\u770b\u770b\u4e8b\u4ef6\u7684\u6a21\u677f\u7f16\u8bd1\uff0c\u5728\u751f\u6210",l.createElement("code",null,"AST"),"\u6811\u9636\u6bb5\uff0c\u4e4b\u524d\u5206\u6790\u8bf4\u8fc7",l.createElement("code",null,"addHandler"),"\u65b9\u6cd5\u4f1a\u5bf9\u4e8b\u4ef6\u7684\u4fee\u9970\u7b26\u505a\u4e0d\u540c\u7684\u5904\u7406\uff0c\u5f53\u9047\u5230",l.createElement("code",null,"native"),"\u4fee\u9970\u7b26\u65f6\uff0c\u4e8b\u4ef6\u76f8\u5173\u5c5e\u6027\u65b9\u6cd5\u4f1a\u6dfb\u52a0\u5230",l.createElement("code",null,"nativeEvents"),"\u5c5e\u6027\u4e2d\u3002 \u4e0b\u56fe\u662f",l.createElement("code",null,"child"),"\u751f\u6210\u7684",l.createElement("code",null,"AST"),"\u6811:"),l.createElement("p",null,l.createElement("img",{src:"https://wongabner.coding.net/p/picgo/d/analysisOfVue/git/raw/master/9.3.png",alt:""})),l.createElement("h3",{id:"942-\u4ee3\u7801\u751f\u6210"},l.createElement(a.AnchorLink,{to:"#942-\u4ee3\u7801\u751f\u6210","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.4.2 \u4ee3\u7801\u751f\u6210"),l.createElement("p",null,"\u4e0d\u7ba1\u662f\u7ec4\u4ef6\u8fd8\u662f\u666e\u901a\u6807\u7b7e\uff0c\u4e8b\u4ef6\u5904\u7406\u4ee3\u7801\u90fd\u5728",l.createElement("code",null,"genData"),"\u7684\u8fc7\u7a0b\u4e2d\uff0c\u548c\u4e4b\u524d\u5206\u6790\u539f\u751f\u4e8b\u4ef6\u4e00\u81f4\uff0c",l.createElement("code",null,"genHandlers"),"\u7528\u6765\u5904\u7406\u4e8b\u4ef6\u5bf9\u8c61\u5e76\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\u3002"),l.createElement(r.Z,{code:'function genData() {\n  \xb7\xb7\xb7\n  if (el.events) {\n    data += (genHandlers(el.events, false)) + ",";\n  }\n  if (el.nativeEvents) {\n    data += (genHandlers(el.nativeEvents, true)) + ",";\n  }\n}',lang:"js"}),l.createElement("p",null,l.createElement("code",null,"getHandlers"),"\u7684\u903b\u8f91\u524d\u9762\u5df2\u7ecf\u8bb2\u8fc7\uff0c\u5904\u7406\u7ec4\u4ef6\u539f\u751f\u4e8b\u4ef6\u548c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u533a\u522b\u5728",l.createElement("code",null,"isNative"),"\u9009\u9879\u4e0a\uff0c\u6211\u4eec\u770b\u6700\u7ec8\u751f\u6210\u7684\u4ee3\u7801\u4e3a\uff1a"),l.createElement(r.Z,{code:'with(this){return _c(\'div\',{attrs:{"id":"app"}},[_c(\'child\',{on:{"myevent":myevent},nativeOn:{"click":function($event){return nativeClick($event)}}})],1)}',lang:"js"}),l.createElement("p",null,"\u6709\u4e86",l.createElement("code",null,"render"),"\u51fd\u6570\u63a5\u4e0b\u6765\u4f1a\u6839\u636e\u5b83\u521b\u5efa",l.createElement("code",null,"Vnode"),"\u5b9e\u4f8b\uff0c\u5176\u4e2d\u9047\u5230\u7ec4\u4ef6\u5360\u4f4d\u7b26\u8282\u70b9\u65f6\u4f1a\u521b\u5efa\u5b50\u7ec4\u4ef6",l.createElement("code",null,"Vnode"),"\uff0c \u6b64\u65f6\u4e3a",l.createElement("code",null,"on,nativeOn"),"\u505a\u4e86\u4e00\u5c42\u7279\u6b8a\u7684\u8f6c\u6362\uff0c\u5c06",l.createElement("code",null,"nativeOn"),"\u8d4b\u503c\u7ed9",l.createElement("code",null,"on"),",\u8fd9\u6837\u540e\u7eed\u7684\u5904\u7406\u65b9\u5f0f\u548c\u666e\u901a\u8282\u70b9\u4e00\u81f4\u3002\u53e6\u5916\uff0c\u5c06",l.createElement("code",null,"on"),"\u8d4b\u503c\u7ed9",l.createElement("code",null,"listeners"),",\u5728\u521b\u5efa",l.createElement("code",null,"VNode"),"\u65f6\u4ee5\u7ec4\u4ef6\u914d\u7f6e",l.createElement("code",null,"componentOptions"),"\u4f20\u5165\u3002"),l.createElement(r.Z,{code:'// \u521b\u5efa\u5b50\u7ec4\u4ef6\u8fc7\u7a0b\nfunction createComponent (){\n  \xb7\xb7\xb7\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n  \xb7\xb7\xb7\n\n  var vnode = new VNode(\n    ("vue-component-" + (Ctor.cid) + (name ? ("-" + name) : \'\')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}',lang:"js"}),l.createElement("h3",{id:"943-\u5b50\u7ec4\u4ef6\u5b9e\u4f8b"},l.createElement(a.AnchorLink,{to:"#943-\u5b50\u7ec4\u4ef6\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.4.3 \u5b50\u7ec4\u4ef6\u5b9e\u4f8b"),l.createElement("p",null,"\u63a5\u4e0b\u6765\u662f\u901a\u8fc7",l.createElement("code",null,"Vnode"),"\u751f\u6210\u771f\u5b9e\u8282\u70b9\u7684\u8fc7\u7a0b\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u9047\u5230\u5b50",l.createElement("code",null,"Vnode"),"\u4f1a\u5b9e\u4f8b\u5316\u5b50\u7ec4\u4ef6\u5b9e\u4f8b\u3002\u5b9e\u4f8b\u5316\u5b50\u7c7b\u6784\u9020\u5668\u7684\u8fc7\u7a0b\u53c8\u56de\u5230\u4e4b\u524d\u6587\u7ae0\u5206\u6790\u7684\u521d\u59cb\u5316\u9009\u9879\u914d\u7f6e\u7684\u8fc7\u7a0b\uff0c\u5728\u7cfb\u5217\u6700\u5f00\u59cb\u7684\u65f6\u5019\u5206\u6790",l.createElement("code",null,"Vue.prototype.init"),"\u7684\u8fc7\u7a0b\uff0c\u8df3\u8fc7\u4e86\u7ec4\u4ef6\u521d\u59cb\u5316\u7684\u6d41\u7a0b\uff0c\u5176\u4e2d\u9488\u5bf9\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u5904\u7406\u7684\u5173\u952e\u5982\u4e0b"),l.createElement(r.Z,{code:"Vue.prototype._init = function(options) {\n  \xb7\xb7\xb7\n  // \u9488\u5bf9\u5b50\u7ec4\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u903b\u8f91\n  if (options && options._isComponent) {\n    // \u521d\u59cb\u5316\u5185\u90e8\u7ec4\u4ef6\n    initInternalComponent(vm, options);\n  } else {\n    // \u9009\u9879\u5408\u5e76\uff0c\u5c06\u5408\u5e76\u540e\u7684\u9009\u9879\u8d4b\u503c\u7ed9\u5b9e\u4f8b\u7684$options\u5c5e\u6027\n    vm.$options = mergeOptions(\n      resolveConstructorOptions(vm.constructor),\n      options || {},\n      vm\n    );\n  }\n  // \u521d\u59cb\u5316\u4e8b\u4ef6\u5904\u7406\n  initEvents(vm);\n}\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  \xb7\xb7\xb7\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  \xb7\xb7\xb7\n}",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,"\u6b64\u65f6\uff0c\u5b50\u7ec4\u4ef6\u62ff\u5230\u4e86\u7236\u5360\u4f4d\u7b26\u8282\u70b9\u5b9a\u4e49\u7684",l.createElement("code",null,'@myevent="myevent"'),"\u4e8b\u4ef6"),"\u3002\u63a5\u4e0b\u6765\u8fdb\u884c\u5b50\u7ec4\u4ef6\u7684\u521d\u59cb\u5316\u4e8b\u4ef6\u5904\u7406\uff0c\u6b64\u65f6",l.createElement("code",null,"vm.$options._parentListeners"),"\u4f1a\u62ff\u5230\u7236\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u3002\u800c\u5e26\u6709\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u7ec4\u4ef6\u4f1a\u6267\u884c",l.createElement("code",null,"updateComponentListeners"),"\u51fd\u6570\u3002"),l.createElement(r.Z,{code:"function initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    // \u5e26\u6709\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u5c5e\u6027\u7684\u5b9e\u4f8b\n    updateComponentListeners(vm, listeners);\n  }\n}",lang:"js"}),l.createElement("p",null,"\u4e4b\u540e\u53c8\u56de\u5230\u4e86\u4e4b\u524d\u5206\u6790\u7684",l.createElement("code",null,"updateListeners"),"\u8fc7\u7a0b\uff0c\u548c\u539f\u751f",l.createElement("code",null,"DOM"),"\u4e8b\u4ef6\u4e0d\u540c\u7684\u662f\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u6dfb\u52a0\u79fb\u9664\u7684\u65b9\u6cd5\u4e0d\u540c\u3002"),l.createElement(r.Z,{code:"var target = vm;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n} \n\nfunction updateComponentListeners (vm,listeners,oldListeners) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}",lang:"js"}),l.createElement("h3",{id:"944-\u4e8b\u4ef6api"},l.createElement(a.AnchorLink,{to:"#944-\u4e8b\u4ef6api","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.4.4 \u4e8b\u4ef6API"),l.createElement("p",null,"\u6211\u4eec\u56de\u5934\u6765\u770b\u770b",l.createElement("code",null,"Vue"),"\u5728\u5f15\u5165\u9636\u6bb5\u5bf9\u4e8b\u4ef6\u7684\u5904\u7406\u8fd8\u505a\u4e86\u54ea\u4e9b\u521d\u59cb\u5316\u64cd\u4f5c\u3002",l.createElement("code",null,"Vue"),"\u5728\u5b9e\u4f8b\u4e0a\u7528\u4e00\u4e2a",l.createElement("code",null,"_events"),"\u5c5e\u6027\u5b58\u8d2e\u7ba1\u7406\u4e8b\u4ef6\u7684\u6d3e\u53d1\u548c\u66f4\u65b0\uff0c\u66b4\u9732\u51fa",l.createElement("code",null,"$on, $once, $off, $emit"),"\u65b9\u6cd5\u7ed9\u5916\u90e8\u7ba1\u7406\u4e8b\u4ef6\u548c\u6d3e\u53d1\u6267\u884c\u4e8b\u4ef6\u3002"),l.createElement(r.Z,{code:'eventsMixin(Vue); // \u5b9a\u4e49\u4e8b\u4ef6\u76f8\u5173\u51fd\u6570\n\n  function eventsMixin (Vue) {\n    var hookRE = /^hook:/;\n    // $on\u65b9\u6cd5\u7528\u6765\u76d1\u542c\u4e8b\u4ef6\uff0c\u6267\u884c\u56de\u8c03\n    Vue.prototype.$on = function (event, fn) {\n      var vm = this;\n      // event\u652f\u6301\u6570\u7ec4\u5f62\u5f0f\u3002\n      if (Array.isArray(event)) {\n        for (var i = 0, l = event.length; i < l; i++) {\n          vm.$on(event[i], fn);\n        }\n      } else {\n        // _events\u6570\u7ec4\u4e2d\u8bb0\u5f55\u9700\u8981\u76d1\u542c\u7684\u4e8b\u4ef6\u4ee5\u53ca\u4e8b\u4ef6\u89e6\u53d1\u7684\u56de\u8c03\n        (vm._events[event] || (vm._events[event] = [])).push(fn);\n        if (hookRE.test(event)) {\n          vm._hasHookEvent = true;\n        }\n      }\n      return vm\n    };\n    // $once\u65b9\u6cd5\u7528\u6765\u76d1\u542c\u4e00\u6b21\u4e8b\u4ef6\uff0c\u6267\u884c\u56de\u8c03\n    Vue.prototype.$once = function (event, fn) {\n      var vm = this;\n      // \u5bf9fn\u505a\u4e00\u5c42\u5305\u88c5\uff0c\u5148\u89e3\u9664\u7ed1\u5b9a\u518d\u6267\u884cfn\u56de\u8c03\n      function on () {\n        vm.$off(event, on);\n        fn.apply(vm, arguments);\n      }\n      on.fn = fn;\n      vm.$on(event, on);\n      return vm\n    };\n    // $off\u65b9\u6cd5\u7528\u6765\u89e3\u9664\u4e8b\u4ef6\u76d1\u542c\n    Vue.prototype.$off = function (event, fn) {\n      var vm = this;\n      // \u5982\u679c$off\u65b9\u6cd5\u6ca1\u6709\u4f20\u9012\u4efb\u4f55\u53c2\u6570\u65f6\uff0c\u5c06_events\u5c5e\u6027\u6e05\u7a7a\u3002\n      if (!arguments.length) {\n        vm._events = Object.create(null);\n        return vm\n      }\n      // \u6570\u7ec4\u5904\u7406\n      if (Array.isArray(event)) {\n        for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n          vm.$off(event[i$1], fn);\n        }\n        return vm\n      }\n      var cbs = vm._events[event];\n      if (!cbs) {\n        return vm\n      }\n      if (!fn) {\n        vm._events[event] = null;\n        return vm\n      }\n      // specific handler\n      var cb;\n      var i = cbs.length;\n      while (i--) {\n        cb = cbs[i];\n        if (cb === fn || cb.fn === fn) {\n          // \u5c06\u76d1\u542c\u7684\u4e8b\u4ef6\u56de\u8c03\u79fb\u9664\n          cbs.splice(i, 1);\n          break\n        }\n      }\n      return vm\n    };\n    // $emit\u65b9\u6cd5\u7528\u6765\u89e6\u53d1\u4e8b\u4ef6\uff0c\u6267\u884c\u56de\u8c03\n    Vue.prototype.$emit = function (event) {\n      var vm = this;\n      {\n        var lowerCaseEvent = event.toLowerCase();\n        if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n          tip(\n            "Event \\"" + lowerCaseEvent + "\\" is emitted in component " +\n            (formatComponentName(vm)) + " but the handler is registered for \\"" + event + "\\". " +\n            "Note that HTML attributes are case-insensitive and you cannot use " +\n            "v-on to listen to camelCase events when using in-DOM templates. " +\n            "You should probably use \\"" + (hyphenate(event)) + "\\" instead of \\"" + event + "\\"."\n          );\n        }\n      }\n      var cbs = vm._events[event];\n      // \u627e\u5230\u5df2\u7ecf\u76d1\u542c\u4e8b\u4ef6\u7684\u56de\u8c03\uff0c\u6267\u884c\n      if (cbs) {\n        cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n        var args = toArray(arguments, 1);\n        var info = "event handler for \\"" + event + "\\"";\n        for (var i = 0, l = cbs.length; i < l; i++) {\n          invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n        }\n      }\n      return vm\n    };\n  }',lang:"js"}),l.createElement("p",null,"\u6709\u4e86\u8fd9\u4e9b\u4e8b\u4ef6api\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u6dfb\u52a0\u79fb\u9664\u7406\u89e3\u8d77\u6765\u4e5f\u7b80\u5355\u5f88\u591a\u3002\u7ec4\u4ef6\u901a\u8fc7",l.createElement("code",null,"this.$emit"),"\u5728\u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u6d3e\u53d1\u4e86\u4e8b\u4ef6\uff0c\u800c\u5728\u8fd9\u4e4b\u524d\uff0c\u7ec4\u4ef6\u5df2\u7ecf\u5c06\u9700\u8981\u76d1\u542c\u7684\u4e8b\u4ef6\u4ee5\u53ca\u56de\u8c03\u6dfb\u52a0\u5230\u5b9e\u4f8b\u7684",l.createElement("code",null,"_events"),"\u5c5e\u6027\u4e2d\uff0c\u89e6\u53d1\u4e8b\u4ef6\u65f6\u4fbf\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\u76d1\u542c\u4e8b\u4ef6\u7684\u56de\u8c03\u3002"),l.createElement("p",null,l.createElement("strong",null,"\u6700\u540e\uff0c\u6211\u4eec\u6362\u4e00\u4e2a\u89d2\u5ea6\u7406\u89e3\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1\uff0c\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u89e6\u53d1\u548c\u76d1\u542c\u672c\u8d28\u4e0a\u90fd\u662f\u5728\u5f53\u524d\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u8fdb\u884c\uff0c\u4e4b\u6240\u4ee5\u80fd\u4ea7\u751f\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1\u7684\u6548\u679c\u662f\u56e0\u4e3a\u4e8b\u4ef6\u76d1\u542c\u7684\u56de\u8c03\u51fd\u6570\u5199\u5728\u4e86\u7236\u7ec4\u4ef6\u4e2d\u3002")),l.createElement("h2",{id:"95-\u5c0f\u7ed3"},l.createElement(a.AnchorLink,{to:"#95-\u5c0f\u7ed3","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"9.5 \u5c0f\u7ed3"),l.createElement("p",null,"\u4e8b\u4ef6\u662f\u6211\u4eec\u65e5\u5e38\u5f00\u53d1\u4e2d\u5fc5\u4e0d\u53ef\u5c11\u7684\u529f\u80fd\u70b9\uff0c",l.createElement("code",null,"Vue"),"\u5728\u5e94\u7528\u5c42\u66b4\u9732\u4e86",l.createElement("code",null,"@,v-on"),"\u7684\u6307\u4ee4\u4f9b\u5f00\u53d1\u8005\u5728\u6a21\u677f\u4e2d\u7ed1\u5b9a\u4e8b\u4ef6\u3002\u4e8b\u4ef6\u6307\u4ee4\u5728\u6a21\u677f\u7f16\u8bd1\u9636\u6bb5\u4f1a\u4ee5\u5c5e\u6027\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u800c\u5728\u771f\u5b9e\u8282\u70b9\u6e32\u67d3\u9636\u6bb5\u4f1a\u6839\u636e\u4e8b\u4ef6\u5c5e\u6027\u53bb\u7ed1\u5b9a\u76f8\u5173\u7684\u4e8b\u4ef6\u3002\u5bf9\u4e8e\u7ec4\u4ef6\u7684\u4e8b\u4ef6\u800c\u8a00\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e8b\u4ef6\u8fdb\u884c\u5b50\u7236\u7ec4\u4ef6\u95f4\u7684\u901a\u4fe1\uff0c\u4ed6\u672c\u8d28\u4e0a\u662f\u5728\u540c\u4e2a\u5b50\u7ec4\u4ef6\u5185\u90e8\u7ef4\u62a4\u4e86\u4e00\u4e2a\u4e8b\u4ef6\u603b\u7ebf\uff0c\u4ece\u5206\u6790\u7ed3\u679c\u53ef\u4ee5\u770b\u51fa\uff0c\u4e4b\u6240\u4ee5\u6709\u5b50\u7236\u7ec4\u4ef6\u901a\u4fe1\u7684\u6548\u679c\uff0c\u539f\u56e0\u4ec5\u4ec5\u662f\u56e0\u4e3a\u56de\u8c03\u51fd\u6570\u5199\u5728\u4e86\u7236\u7ec4\u4ef6\u4e2d\u3002")))}));n["default"]=e=>{var n=l.useContext(a.context),t=n.demos;return l.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(i,{demos:t})}}}]);