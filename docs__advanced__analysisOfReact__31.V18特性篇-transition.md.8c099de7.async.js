(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[3531],{34596:function(e,t,n){"use strict";n.r(t);var l=n(67294),a=n(96089),r=n(65659),c=l.memo((e=>{e.demos;return l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("p",null,"\u5728 React 18 \u4e2d\uff0c\u5f15\u8fdb\u4e86\u4e00\u4e2a\u65b0\u7684 API \u2014\u2014 ",l.createElement("code",null,"startTransition")," \u8fd8\u6709\u4e8c\u4e2a\u65b0\u7684 hooks \u2014\u2014 ",l.createElement("code",null,"useTransition")," \u548c ",l.createElement("code",null,"useDeferredValue"),"\uff0c\u672c\u8d28\u4e0a\u5b83\u4eec\u79bb\u4e0d\u5f00\u4e00\u4e2a\u6982\u5ff5 ",l.createElement("code",null,"transition")," \u3002"),l.createElement("p",null,"\u901a\u8fc7\u672c\u7ae0\u8282\u5b66\u4e60\uff0c\u4f60\u5c06\u6536\u83b7\u4ee5\u4e0b\u5185\u5bb9\uff1a"),l.createElement("ul",null,l.createElement("li",null,l.createElement("code",null,"Transition")," \u4ea7\u751f\u521d\u8877\uff0c\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\u3002"),l.createElement("li",null,l.createElement("code",null,"startTransition")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002"),l.createElement("li",null,l.createElement("code",null,"useTranstion")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002"),l.createElement("li",null,l.createElement("code",null,"useDeferredValue")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002")),l.createElement("p",null,"\u4ec0\u4e48\u53eb\u505a ",l.createElement("code",null,"transition")," \u82f1\u6587\u7ffb\u8bd1\u4e3a ",l.createElement("strong",null,"\u2018\u8fc7\u6e21\u2019"),"\uff0c\u90a3\u4e48\u8fd9\u91cc\u7684\u8fc7\u6e21\u6307\u7684\u5c31\u662f\u5728\u4e00\u6b21\u66f4\u65b0\u4e2d\uff0c\u6570\u636e\u5c55\u73b0\u4ece\u65e0\u5230\u6709\u7684\u8fc7\u6e21\u6548\u679c\u3002\u7528 ",l.createElement(a.Link,{to:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Freactwg%2Freact-18%2Fdiscussions%2F41"},"ReactWg")," \u4e2d\u7684\u4e00\u53e5\u8bdd\u63cf\u8ff0 startTransition \u3002"),l.createElement("blockquote",null,l.createElement("p",null,"\u5728\u5927\u5c4f\u5e55\u89c6\u56fe\u66f4\u65b0\u7684\u65f6\uff0cstartTransition \u80fd\u591f\u4fdd\u6301\u9875\u9762\u6709\u54cd\u5e94\uff0c\u8fd9\u4e2a api \u80fd\u591f\u628a React \u66f4\u65b0\u6807\u8bb0\u6210\u4e00\u4e2a\u7279\u6b8a\u7684\u66f4\u65b0\u7c7b\u578b ",l.createElement("code",null,"transitions")," \uff0c\u5728\u8fd9\u79cd\u7279\u6b8a\u7684\u66f4\u65b0\u4e0b\uff0cReact \u80fd\u591f\u4fdd\u6301\u89c6\u89c9\u53cd\u9988\u548c\u6d4f\u89c8\u5668\u7684\u6b63\u5e38\u54cd\u5e94\u3002")),l.createElement("p",null,"\u5355\u5355\u4ece\u4e0a\u8ff0\u5bf9 ",l.createElement("code",null,"startTransition")," \u7684\u63cf\u8ff0\uff0c\u6211\u4eec\u5f88\u96be\u7406\u89e3\u8fd9\u4e2a\u65b0\u7684 api \u5230\u5e95\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u3002\u4e0d\u8fc7\u4e0d\u8981\u7d27\uff0c\u63a5\u4e0b\u6765\u8ba9\u6211\u9010\u6b65\u5206\u6790\u8fd9\u4e2a api \u5230\u5e95\u505a\u4e86\u4ec0\u4e48\uff0c\u4ee5\u53ca\u5b83\u7684\u5e94\u7528\u573a\u666f\u3002"),l.createElement("h2",{id:"\u4e8c-transition-\u4f7f\u547d"},l.createElement(a.AnchorLink,{to:"#\u4e8c-transition-\u4f7f\u547d","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e8c transition \u4f7f\u547d"),l.createElement("h3",{id:"1-transition-\u7684\u8bde\u751f"},l.createElement(a.AnchorLink,{to:"#1-transition-\u7684\u8bde\u751f","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 transition \u7684\u8bde\u751f"),l.createElement("p",null,"\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0 Transition \u5462\uff1f Transition \u672c\u8d28\u4e0a\u89e3\u51b3\u4e86\u6e32\u67d3\u5e76\u53d1\u7684\u95ee\u9898\uff0c\u5728 React 18 \u5173\u4e8e startTransition \u63cf\u8ff0\u7684\u65f6\u5019\uff0c\u591a\u6b21\u63d0\u5230 \u2018\u5927\u5c4f\u5e55\u2019 \u7684\u60c5\u51b5\uff0c\u8fd9\u91cc\u7684\u5927\u5c4f\u5e55\u5e76\u4e0d\u662f\u5355\u7eaf\u6307\u7684\u662f\u5c3a\u5bf8\uff0c\u800c\u662f\u4e00\u79cd\u6570\u636e\u91cf\u5927\uff0cDOM \u5143\u7d20\u8282\u70b9\u591a\u7684\u573a\u666f\uff0c\u6bd4\u5982\u6570\u636e\u53ef\u89c6\u5316\u5927\u5c4f\u60c5\u51b5\uff0c\u5728\u8fd9\u4e00\u573a\u666f\u4e0b\uff0c\u4e00\u6b21\u66f4\u65b0\u5e26\u6765\u7684\u53d8\u5316\u53ef\u80fd\u662f\u5de8\u5927\u7684\uff0c\u6240\u4ee5\u9891\u7e41\u7684\u66f4\u65b0\uff0c\u6267\u884c js \u4e8b\u52a1\u9891\u7e41\u8c03\u7528\uff0c\u6d4f\u89c8\u5668\u8981\u6267\u884c\u5927\u91cf\u7684\u6e32\u67d3\u5de5\u4f5c\uff0c\u6240\u4ee5\u7ed9\u7528\u6237\u611f\u89c9\u5c31\u662f\u5361\u987f\u3002"),l.createElement("p",null,"Transition \u672c\u8d28\u4e0a\u662f\u7528\u4e8e\u4e00\u4e9b\u4e0d\u662f\u5f88\u6025\u8feb\u7684\u66f4\u65b0\u4e0a\uff0c\u5728 React 18 \u4e4b\u524d\uff0c\u6240\u6709\u7684\u66f4\u65b0\u4efb\u52a1\u90fd\u88ab\u89c6\u4e3a\u6025\u8feb\u7684\u4efb\u52a1\uff0c\u5728 React 18 \u8bde\u751f\u4e86 ",l.createElement("code",null,"concurrent Mode")," \u6a21\u5f0f\uff0c\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\uff0c\u6e32\u67d3\u662f\u53ef\u4ee5\u4e2d\u65ad\uff0c\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\uff0c\u53ef\u4ee5\u8ba9\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u5148\u66f4\u65b0\u6e32\u67d3\u3002\u53ef\u4ee5\u8bf4 React 18 \u66f4\u9752\u7750\u4e8e\u826f\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002\u4ece ",l.createElement("code",null,"concurrent Mode")," \u5230 ",l.createElement("code",null,"susponse")," \u518d\u5230 ",l.createElement("code",null,"startTransition")," \u65e0\u7591\u90fd\u662f\u56f4\u7ed5\u7740\u66f4\u4f18\u8d28\u7684\u7528\u6237\u4f53\u9a8c\u5c55\u5f00\u3002"),l.createElement("p",null,"startTransition \u4f9d\u8d56\u4e8e ",l.createElement("code",null,"concurrent Mode")," \u6e32\u67d3\u5e76\u53d1\u6a21\u5f0f\u3002\u4e5f\u5c31\u662f\u8bf4\u5728 React 18 \u4e2d\u4f7f\u7528 ",l.createElement("code",null,"startTransition")," \uff0c\u90a3\u4e48\u8981\u5148\u5f00\u542f\u5e76\u53d1\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u901a\u8fc7 ",l.createElement("code",null,"createRoot")," \u521b\u5efa Root \u3002\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e0b\u4e24\u79cd\u6a21\u5f0f\u4e0b\uff0c\u521b\u5efa Root \u533a\u522b\u3002"),l.createElement("p",null,l.createElement("strong",null,"\u4f20\u7edf legacy \u6a21\u5f0f")),l.createElement(r.Z,{code:"import ReactDOM from 'react-dom'\n/* \u901a\u8fc7 ReactDOM.render  */\nReactDOM.render(\n    <App />,\n    document.getElementById('app')\n)",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,"v18 concurrent Mode\u5e76\u53d1\u6a21\u5f0f")),l.createElement(r.Z,{code:"import ReactDOM from 'react-dom'\n/* \u901a\u8fc7 createRoot \u521b\u5efa root */\nconst root =  ReactDOM.createRoot(document.getElementById('app'))\n/* \u8c03\u7528 root \u7684 render \u65b9\u6cd5 */\nroot.render(<App/>)",lang:"js"}),l.createElement("p",null,"\u4e0a\u9762\u8bf4\u4e86 startTransition \u4f7f\u7528\u6761\u4ef6\uff0c\u63a5\u4e0b\u6765\u63a2\u8ba8\u4e00\u4e0b startTransition \u5230\u5e95\u5e94\u7528\u4e8e\u4ec0\u4e48\u573a\u666f\u3002 \u524d\u9762\u8bf4\u4e86 React 18 \u786e\u5b9a\u4e86\u4e0d\u540c\u4f18\u5148\u7ea7\u7684\u66f4\u65b0\u4efb\u52a1\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u6709\u4e0d\u540c\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u3002\u4e16\u754c\u4e0a\u672c\u6765\u6ca1\u6709\u8def\uff0c\u8d70\u7684\u4eba\u591a\u4e86\u5c31\u6210\u4e86\u8def\uff0c\u4f18\u5148\u7ea7\u4ea7\u751f\u4e5f\u662f\u5982\u6b64\uff0cReact \u4e16\u754c\u91cc\u672c\u6765\u6ca1\u6709\u4f18\u5148\u7ea7\uff0c\u573a\u666f\u591a\u4e86\u5c31\u51fa\u73b0\u4e86\u4f18\u5148\u7ea7\u3002"),l.createElement("p",null,"\u5982\u679c\u4e00\u6b21\u66f4\u65b0\u4e2d\uff0c\u90fd\u662f\u540c\u6837\u7684\u4efb\u52a1\uff0c\u90a3\u4e48\u4e5f\u5c31\u65e0\u4efb\u52a1\u4f18\u5148\u7ea7\u53ef\u8a00\uff0c\u7edf\u4e00\u6309\u6279\u6b21\u5904\u7406\u4efb\u52a1\u5c31\u53ef\u4ee5\u4e86\uff0c\u53ef\u73b0\u5b9e\u6070\u597d\u4e0d\u662f\u8fd9\u6837\u5b50\u3002\u4e3e\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u573a\u666f\uff1a",l.createElement("strong",null,"\u5c31\u662f\u6709\u4e00\u4e2a ",l.createElement("code",null,"input")," \u8868\u5355\u3002\u5e76\u4e14\u6709\u4e00\u4e2a\u5927\u91cf\u6570\u636e\u7684\u5217\u8868\uff0c\u901a\u8fc7\u8868\u5355\u8f93\u5165\u5185\u5bb9\uff0c\u5bf9\u5217\u8868\u6570\u636e\u8fdb\u884c\u641c\u7d22\uff0c\u8fc7\u6ee4\u3002\u90a3\u4e48\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u5b58\u5728\u4e86\u591a\u4e2a\u5e76\u53d1\u7684\u66f4\u65b0\u4efb\u52a1\u3002\u5206\u522b\u4e3a")),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u79cd\uff1ainput \u8868\u5355\u8981\u5b9e\u65f6\u83b7\u53d6\u72b6\u6001\uff0c\u6240\u4ee5\u662f\u53d7\u63a7\u7684\uff0c\u90a3\u4e48\u66f4\u65b0 input \u7684\u5185\u5bb9\uff0c\u5c31\u8981\u89e6\u53d1\u66f4\u65b0\u4efb\u52a1\u3002"),l.createElement("li",null,"\u7b2c\u4e8c\u79cd\uff1ainput \u5185\u5bb9\u6539\u53d8\uff0c\u8fc7\u6ee4\u5217\u8868\uff0c\u91cd\u65b0\u6e32\u67d3\u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u4efb\u52a1\u3002")),l.createElement("p",null,"\u7b2c\u4e00\u79cd\u7c7b\u578b\u7684\u66f4\u65b0\uff0c\u5728\u8f93\u5165\u7684\u65f6\u5019\uff0c\u5e0c\u671b\u662f\u7684\u89c6\u89c9\u4e0a\u9a6c\u4e0a\u5448\u73b0\u53d8\u5316\uff0c\u5982\u679c\u8f93\u5165\u7684\u65f6\u5019\uff0c\u8f93\u5165\u7684\u5185\u5bb9\u5ef6\u65f6\u663e\u793a\uff0c\u4f1a\u7ed9\u7528\u6237\u4e00\u79cd\u6781\u5dee\u7684\u89c6\u89c9\u4f53\u9a8c\u3002\u7b2c\u4e8c\u79cd\u7c7b\u578b\u7684\u66f4\u65b0\u5c31\u662f\u6839\u636e\u6570\u636e\u7684\u5185\u5bb9\uff0c\u53bb\u8fc7\u6ee4\u5217\u8868\u4e2d\u7684\u6570\u636e\uff0c\u6e32\u67d3\u5217\u8868\uff0c\u8fd9\u4e2a\u79cd\u7c7b\u7684\u66f4\u65b0\uff0c\u548c\u4e0a\u4e00\u79cd\u6bd4\u8d77\u6765\u4f18\u5148\u7ea7\u5c31\u6ca1\u6709\u90a3\u4e48\u9ad8\u3002\u90a3\u4e48\u5982\u679c input \u641c\u7d22\u8fc7\u7a0b\u4e2d\u7528\u6237\u66f4\u4f18\u5148\u5e0c\u671b\u7684\u662f\u8f93\u5165\u6846\u7684\u72b6\u6001\u6539\u53d8\uff0c\u90a3\u4e48\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5728 input \u4e2d\u7ed1\u5b9a onChange \u4e8b\u4ef6\u7528\u6765\u89e6\u53d1\u4e0a\u8ff0\u7684\u4e24\u79cd\u7c7b\u7684\u66f4\u65b0\u3002"),l.createElement(r.Z,{code:"const handleChange=(e)=>{\n   /* \u6539\u53d8\u641c\u7d22\u6761\u4ef6 */ \n   setInputValue(e.target.value)\n   /* \u6539\u53d8\u641c\u7d22\u8fc7\u6ee4\u540e\u5217\u8868\u72b6\u6001 */\n   setSearchQuery(e.target.value)\n}",lang:"js"}),l.createElement("p",null,"\u4e0a\u8ff0\u8fd9\u79cd\u5199\u6cd5\uff0c\u90a3\u4e48 ",l.createElement("code",null,"setInputValue")," \u548c ",l.createElement("code",null,"setSearchQuery")," \u5e26\u6765\u7684\u66f4\u65b0\u5c31\u662f\u4e00\u4e2a\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u66f4\u65b0\u3002\u800c\u524d\u9762\u8bf4\u9053\uff0c",l.createElement("strong",null,"\u8f93\u5165\u6846\u72b6\u6001\u6539\u53d8\u66f4\u65b0\u4f18\u5148\u7ea7\u8981\u5927\u4e8e\u5217\u8868\u7684\u66f4\u65b0\u7684\u4f18\u5148\u7ea7\u3002")," \uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u7684\u4e3b\u89d2\u5c31\u767b\u573a\u4e86\u3002\u7528 ",l.createElement("code",null,"startTransition")," \u628a\u4e24\u79cd\u66f4\u65b0\u533a\u522b\u5f00\u3002"),l.createElement(r.Z,{code:"const handleChange=()=>{\n    /* \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1 \u2014\u2014 \u6539\u53d8\u641c\u7d22\u6761\u4ef6 */\n    setInputValue(e.target.value)\n    /* \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1 \u2014\u2014 \u6539\u53d8\u641c\u7d22\u8fc7\u6ee4\u540e\u5217\u8868\u72b6\u6001  */\n    startTransition(()=>{\n        setSearchQuery(e.target.value)\n    })\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u901a\u8fc7 startTransition \u628a\u4e0d\u662f\u7279\u522b\u8feb\u5207\u7684\u66f4\u65b0\u4efb\u52a1 setSearchQuery \u9694\u79bb\u51fa\u6765\u3002\u8fd9\u6837\u5728\u771f\u5b9e\u7684\u60c5\u666f\u6548\u679c\u5982\u4f55\u5462\uff1f\u6211\u4eec\u6765\u6d4b\u8bd5\u4e00\u4e0b\u3002")),l.createElement("h3",{id:"2-\u6a21\u62df\u573a\u666f"},l.createElement(a.AnchorLink,{to:"#2-\u6a21\u62df\u573a\u666f","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u6a21\u62df\u573a\u666f"),l.createElement("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u6a21\u62df\u4e00\u4e0b\u4e0a\u8ff0\u573a\u666f\u3002\u6d41\u7a0b\u5927\u81f4\u662f\u8fd9\u6837\u7684\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u6709\u4e00\u4e2a\u641c\u7d22\u6846\u548c\u4e00\u4e2a 10000 \u6761\u6570\u636e\u7684\u5217\u8868\uff0c\u5217\u8868\u4e2d\u6bcf\u4e00\u9879\u6709\u76f8\u540c\u7684\u6587\u6848\u3002"),l.createElement("li",null,"input \u6539\u53d8\u8981\u5b9e\u65f6\u6539\u53d8 input \u7684\u5185\u5bb9\uff08\u7b2c\u4e00\u79cd\u66f4\u65b0\uff09\uff0c\u7136\u540e\u9ad8\u4eae\u5217\u8868\u91cc\u9762\u7684\u76f8\u540c\u7684\u641c\u7d22\u503c\uff08\u7b2c\u4e8c\u79cd\u66f4\u65b0\uff09\u3002"),l.createElement("li",null,"\u7528\u4e00\u4e2a\u6309\u94ae\u63a7\u5236 \u5e38\u89c4\u6a21\u5f0f \uff5c ",l.createElement("code",null,"transition")," \u6a21\u5f0f\u3002")),l.createElement(r.Z,{code:"/*  \u6a21\u62df\u6570\u636e  */\nconst mockDataArray = new Array(10000).fill(1)\n/* \u9ad8\u91cf\u663e\u793a\u5185\u5bb9 */\nfunction ShowText({ query }){\n   const text = 'asdfghjk'\n   let children\n   if(text.indexOf(query) > 0 ){\n       /* \u627e\u5230\u5339\u914d\u7684\u5173\u952e\u8bcd */\n       const arr = text.split(query)\n       children = <div>{arr[0]}<span style={{ color:'pink' }} >{query}</span>{arr[1]} </div>\n   }else{\n      children = <div>{text}</div>\n   }\n   return <div>{children}</div>\n}\n/* \u5217\u8868\u6570\u636e */\nfunction List ({ query }){\n    console.log('List\u6e32\u67d3')\n    return <div>\n        {\n           mockDataArray.map((item,index)=><div key={index} >\n              <ShowText query={query} />\n           </div>)\n        }\n    </div>\n}\n/* memo \u505a\u4f18\u5316\u5904\u7406  */\nconst NewList = memo(List)",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,l.createElement("code",null,"List")," \u7ec4\u4ef6\u6e32\u67d3\u4e00\u4e07\u4e2a ",l.createElement("code",null,"ShowText")," \u7ec4\u4ef6\u3002\u5728 ShowText \u7ec4\u4ef6\u4e2d\u4f1a\u901a\u8fc7\u4f20\u5165\u7684 query \u5b9e\u73b0\u52a8\u6001\u9ad8\u4eae\u5c55\u793a\u3002"),l.createElement("li",null,"\u56e0\u4e3a\u6bcf\u4e00\u6b21\u6539\u53d8 ",l.createElement("code",null,"query")," \u90fd\u4f1a\u8ba9 10000 \u4e2a\u91cd\u65b0\u6e32\u67d3\u66f4\u65b0\uff0c\u5e76\u4e14\u8fd8\u8981\u5c55\u793a query \u7684\u9ad8\u4eae\u5185\u5bb9\uff0c\u6240\u4ee5\u6ee1\u8db3",l.createElement("strong",null,"\u5e76\u53d1\u6e32\u67d3"),"\u7684\u573a\u666f\u3002")),l.createElement("p",null,"\u63a5\u4e0b\u6765\u5c31\u662f App \u7ec4\u4ef6\u7f16\u5199\u3002"),l.createElement(r.Z,{code:"export default function App(){\n    const [ value ,setInputValue ] = React.useState('')\n    const [ isTransition , setTransion ] = React.useState(false)\n    const [ query ,setSearchQuery  ] = React.useState('')\n    const handleChange = (e) => {\n        /* \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1 \u2014\u2014 \u6539\u53d8\u641c\u7d22\u6761\u4ef6 */\n        setInputValue(e.target.value)\n        if(isTransition){ /* transition \u6a21\u5f0f */\n            React.startTransition(()=>{\n                /* \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1 \u2014\u2014 \u6539\u53d8\u641c\u7d22\u8fc7\u6ee4\u540e\u5217\u8868\u72b6\u6001  */\n                setSearchQuery(e.target.value)\n            })\n        }else{ /* \u4e0d\u52a0\u4f18\u5316\uff0c\u4f20\u7edf\u6a21\u5f0f */\n            setSearchQuery(e.target.value)\n        }\n    }\n    return <div>\n        <button onClick={()=>setTransion(!isTransition)} >{isTransition ? 'transition' : 'normal'} </button>\n        <input onChange={handleChange}\n            placeholder=\"\u8f93\u5165\u641c\u7d22\u5185\u5bb9\"\n            value={value}\n        />\n       <NewList  query={query} />\n    </div>\n}",lang:"js"}),l.createElement("p",null,"\u6211\u4eec\u770b\u4e00\u4e0b App \u505a\u4e86\u54ea\u4e9b\u4e8b\u60c5\u3002"),l.createElement("ul",null,l.createElement("li",null,"\u9996\u5148\u901a\u8fc7 handleChange \u4e8b\u4ef6\u6765\u5904\u7406 onchange \u4e8b\u4ef6\u3002"),l.createElement("li",null,l.createElement("code",null,"button"),"\u6309\u94ae\u7528\u6765\u5207\u6362 ",l.createElement("strong",null,"transition")," \uff08\u8bbe\u7f6e\u4f18\u5148\u7ea7\uff09 \u548c ",l.createElement("strong",null,"normal")," \uff08\u6b63\u5e38\u6a21\u5f0f\uff09\u3002\u63a5\u4e0b\u6765\u5c31\u662f\u89c1\u8bc1\u795e\u5947\u7684\u65f6\u523b\u3002")),l.createElement("p",null,l.createElement("strong",null,"\u5e38\u89c4\u6a21\u5f0f\u4e0b\u6548\u679c\uff1a")),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de9fe6361fe84fc189d058eb2aac871d~tplv-k3u1fbpfcp-watermark.awebp?",alt:"1.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u53ef\u4ee5\u6e05\u695a\u7684\u770b\u5230\u5728\u5e38\u89c4\u6a21\u5f0f\u4e0b\uff0c\u8f93\u5165\u5185\u5bb9\uff0c\u5185\u5bb9\u5448\u73b0\u90fd\u53d8\u7684\u5f02\u5e38\u5361\u987f\uff0c\u7ed9\u4eba\u4e00\u79cd\u6781\u5dee\u7684\u7528\u6237\u4f53\u9a8c\u3002")),l.createElement("p",null,l.createElement("strong",null,"transtion \u6a21\u5f0f\u4e0b\u6548\u679c\uff1a")),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03ace3d59982418ea20a20a44257ae0d~tplv-k3u1fbpfcp-watermark.awebp?",alt:"2.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u628a\u5927\u91cf\u5e76\u53d1\u4efb\u52a1\u901a\u8fc7 startTransition \u5904\u7406\u4e4b\u540e\uff0c\u53ef\u4ee5\u6e05\u695a\u770b\u5230\uff0cinput \u4f1a\u6b63\u5e38\u7684\u5448\u73b0\uff0c\u66f4\u65b0\u5217\u8868\u4efb\u52a1\u53d8\u5f97\u6ede\u540e\uff0c\u4e0d\u8fc7\u7528\u6237\u4f53\u9a8c\u5927\u5e45\u5ea6\u63d0\u5347\uff0c")),l.createElement("p",null,l.createElement("strong",null,"\u6574\u4f53\u6548\u679c\uff1a")),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fda3c374cc0e43c3bcbbdc42aafd5ba1~tplv-k3u1fbpfcp-watermark.awebp?",alt:"3.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u6765\u611f\u53d7\u4e00\u4e9b startTransition \u7684\u9b45\u529b\u3002")),l.createElement("p",null,l.createElement("strong",null,"\u603b\u7ed3\uff1a")," \u901a\u8fc7\u4e0a\u9762\u53ef\u4ee5\u76f4\u89c2\u7684\u770b\u5230 startTransition \u5728\u5904\u7406\u8fc7\u6e21\u4efb\u52a1\uff0c\u4f18\u5316\u7528\u6237\u4f53\u9a8c\u4e0a\u8d77\u5230\u4e86\u4e3e\u8db3\u8f7b\u91cd\u7684\u4f5c\u7528\u3002"),l.createElement("h3",{id:"3-\u4e3a\u4ec0\u4e48\u4e0d\u662f-settimeout"},l.createElement(a.AnchorLink,{to:"#3-\u4e3a\u4ec0\u4e48\u4e0d\u662f-settimeout","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"3 \u4e3a\u4ec0\u4e48\u4e0d\u662f setTimeout"),l.createElement("p",null,"\u4e0a\u8ff0\u7684\u95ee\u9898\u80fd\u591f\u628a ",l.createElement("code",null,"setSearchQuery")," \u7684\u66f4\u65b0\u5305\u88c5\u5728 ",l.createElement("code",null,"setTimeout")," \u5185\u90e8\u5462\uff0c\u50cf\u5982\u4e0b\u8fd9\u6837\u3002"),l.createElement(r.Z,{code:"const handleChange=()=>{\n    /* \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1 \u2014\u2014 \u6539\u53d8\u641c\u7d22\u6761\u4ef6 */\n    setInputValue(e.target.value)\n    /* \u628a setSearchQuery \u901a\u8fc7\u5ef6\u65f6\u5668\u5305\u88f9  */\n    setTimeout(()=>{\n        setSearchQuery(e.target.value)\n    },0)\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u8fd9\u91cc\u901a\u8fc7 setTimeout \uff0c\u628a\u66f4\u65b0\u653e\u5728 setTimeout \u5185\u90e8\uff0c\u90a3\u4e48\u6211\u4eec\u90fd\u77e5\u9053 setTimeout \u662f\u5c5e\u4e8e\u5ef6\u65f6\u5668\u4efb\u52a1\uff0c\u5b83\u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7684\u6b63\u5e38\u7ed8\u5236\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u4e0b\u6b21\u7a7a\u95f2\u65f6\u95f4\u4e4b\u884c setTimeout \u3002\u90a3\u4e48\u6548\u679c\u5982\u4f55\u5462\uff1f\u6211\u4eec\u6765\u770b\u4e00\u4e0b\uff1a")),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3dad3d51d40421cbec2aea31b00a2e4~tplv-k3u1fbpfcp-watermark.awebp?",alt:"4.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7 setTimeout \u786e\u5b9e\u53ef\u4ee5\u8ba9\u8f93\u5165\u72b6\u6001\u597d\u4e00\u4e9b\uff0c\u4f46\u662f\u7531\u4e8e setTimeout \u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u800c\u6bcf\u4e00\u6b21\u89e6\u53d1 onchange \u4e5f\u662f\u5b8f\u4efb\u52a1\uff0c\u6240\u4ee5 setTimeout \u8fd8\u4f1a\u5f71\u54cd\u9875\u9762\u7684\u4ea4\u4e92\u4f53\u9a8c\u3002")),l.createElement("p",null,"\u7efc\u4e0a\u6240\u8ff0\uff0cstartTransition \u76f8\u6bd4 setTimeout \u7684\u4f18\u52bf\u548c\u5f02\u540c\u662f\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u4e00\u65b9\u9762\uff1astartTransition \u7684\u5904\u7406\u903b\u8f91\u548c setTimeout \u6709\u4e00\u4e2a",l.createElement("strong",null,"\u5f88\u91cd\u8981\u7684\u533a\u522b"),"\uff0csetTimeout \u662f\u5f02\u6b65\u5ef6\u65f6\u6267\u884c\uff0c\u800c startTransition \u7684\u56de\u8c03\u51fd\u6570\u662f\u540c\u6b65\u6267\u884c\u7684\u3002\u5728 startTransition \u4e4b\u4e2d\u4efb\u4f55\u66f4\u65b0\uff0c\u90fd\u4f1a\u6807\u8bb0\u4e0a ",l.createElement("code",null,"transition"),"\uff0cReact \u5c06\u5728\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u5224\u65ad\u8fd9\u4e2a\u6807\u8bb0\u6765\u51b3\u5b9a\u662f\u5426\u5b8c\u6210\u6b64\u6b21\u66f4\u65b0\u3002\u6240\u4ee5 Transition \u53ef\u4ee5\u7406\u89e3\u6210\u6bd4 setTimeout \u66f4\u65e9\u7684\u66f4\u65b0\u3002\u4f46\u662f\u540c\u65f6\u8981\u4fdd\u8bc1 ui \u7684\u6b63\u5e38\u54cd\u5e94\uff0c\u5728\u6027\u80fd\u597d\u7684\u8bbe\u5907\u4e0a\uff0ctransition \u4e24\u6b21\u66f4\u65b0\u7684\u5ef6\u8fdf\u4f1a\u5f88\u5c0f\uff0c\u4f46\u662f\u5728\u6162\u7684\u8bbe\u5907\u4e0a\uff0c\u5ef6\u65f6\u4f1a\u5f88\u5927\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd UI \u7684\u54cd\u5e94\u3002"),l.createElement("li",null,"\u53e6\u4e00\u65b9\u9762\uff0c\u5c31\u662f\u901a\u8fc7\u4e0a\u9762\u4f8b\u5b50\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u6e32\u67d3\u5e76\u53d1\u7684\u573a\u666f\u4e0b\uff0csetTimeout \u4ecd\u7136\u4f1a\u4f7f\u9875\u9762\u5361\u987f\u3002\u56e0\u4e3a\u8d85\u65f6\u540e\uff0c\u8fd8\u4f1a\u6267\u884c setTimeout \u7684\u4efb\u52a1\uff0c\u5b83\u4eec\u4e0e\u7528\u6237\u4ea4\u4e92\u540c\u6837\u5c5e\u4e8e\u5b8f\u4efb\u52a1\uff0c\u6240\u4ee5\u4ecd\u7136\u4f1a\u963b\u6b62\u9875\u9762\u7684\u4ea4\u4e92\u3002\u90a3\u4e48 ",l.createElement("code",null,"transition")," \u5c31\u4e0d\u540c\u4e86\uff0c\u5728 conCurrent mode \u4e0b\uff0c",l.createElement("code",null,"startTransition")," \u662f\u53ef\u4ee5\u4e2d\u65ad\u6e32\u67d3\u7684 \uff0c\u6240\u4ee5\u5b83\u4e0d\u4f1a\u8ba9\u9875\u9762\u5361\u987f\uff0cReact \u8ba9\u8fd9\u4e9b\u4efb\u52a1\uff0c\u5728\u6d4f\u89c8\u5668\u7a7a\u95f2\u65f6\u95f4\u6267\u884c\uff0c\u6240\u4ee5\u4e0a\u8ff0\u8f93\u5165 input \u5185\u5bb9\u65f6\uff0cstartTransition \u4f1a\u4f18\u5148\u5904\u7406 input \u503c\u7684\u66f4\u65b0\uff0c\u800c\u4e4b\u540e\u624d\u662f\u5217\u8868\u7684\u6e32\u67d3\u3002")),l.createElement("h3",{id:"4-\u4e3a\u4ec0\u4e48\u4e0d\u662f\u8282\u6d41\u9632\u6296"},l.createElement(a.AnchorLink,{to:"#4-\u4e3a\u4ec0\u4e48\u4e0d\u662f\u8282\u6d41\u9632\u6296","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"4 \u4e3a\u4ec0\u4e48\u4e0d\u662f\u8282\u6d41\u9632\u6296"),l.createElement("p",null,"\u90a3\u4e48\u6211\u4eec\u518d\u60f3\u4e00\u4e2a\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u662f\u8282\u6d41\u548c\u9632\u6296\u3002\u9996\u5148\u8282\u6d41\u548c\u9632\u6296\u80fd\u591f\u89e3\u51b3\u5361\u987f\u7684\u95ee\u9898\u5417\uff1f\u7b54\u6848\u662f\u4e00\u5b9a\u7684\uff0c\u5728\u6ca1\u6709 transition \u8fd9\u6837\u7684 api \u4e4b\u524d\uff0c\u5c31\u53ea\u80fd\u901a\u8fc7",l.createElement("strong",null,"\u9632\u6296"),"\u548c",l.createElement("strong",null,"\u8282\u6d41"),"\u6765\u5904\u7406\u8fd9\u4ef6\u4e8b\uff0c\u63a5\u4e0b\u6765\u7528\u9632\u6296\u5904\u7406\u4e00\u4e0b\u3002"),l.createElement(r.Z,{code:"const SetSearchQueryDebounce = useMemo(()=> debounce((value)=> setSearchQuery(value),1000)  ,[])\nconst handleChange = (e) => {\n    setInputValue(e.target.value)\n    /* \u901a\u8fc7\u9632\u6296\u5904\u7406\u540e\u7684 setSearchQuery \u51fd\u6570\u3002  */\n    SetSearchQueryDebounce(e.target.value)\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u5c06 setSearchQuery \u9632\u6296\u5904\u7406\u3002\u7136\u540e\u6211\u4eec\u770b\u4e00\u4e0b\u6548\u679c\u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0db256f94a147f697bcb0c2f86b4fe5~tplv-k3u1fbpfcp-watermark.awebp?",alt:"5.gif"})),l.createElement("p",null,"\u901a\u8fc7\u4e0a\u9762\u53ef\u4ee5\u76f4\u89c2\u611f\u53d7\u5230\u901a\u8fc7\u9632\u6296\u5904\u7406\u540e\uff0c\u57fa\u672c\u4e0a\u5df2\u7ecf\u4e0d\u5f71\u54cd input \u8f93\u5165\u4e86\u3002\u4f46\u662f\u9762\u4e34\u4e00\u4e2a\u95ee\u9898\u5c31\u662f list \u89c6\u56fe\u6539\u53d8\u7684\u5ef6\u65f6\u65f6\u95f4\u53d8\u957f\u4e86\u3002\u90a3\u4e48 transition \u548c",l.createElement("strong",null,"\u8282\u6d41\u9632\u6296")," \u672c\u8d28\u4e0a\u7684\u533a\u522b\u662f\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u4e00\u65b9\u9762\uff0c\u8282\u6d41\u9632\u6296 \u672c\u8d28\u4e0a\u4e5f\u662f setTimeout \uff0c\u53ea\u4e0d\u8fc7\u63a7\u5236\u4e86\u6267\u884c\u7684\u9891\u7387\uff0c\u90a3\u4e48\u901a\u8fc7\u6253\u5370\u7684\u5185\u5bb9\u5c31\u80fd\u53d1\u73b0\uff0c\u539f\u7406\u5c31\u662f\u8ba9 render \u6b21\u6570\u51cf\u5c11\u4e86\u3002\u800c transitions \u548c\u5b83\u76f8\u6bd4\uff0c\u5e76\u6ca1\u6709\u51cf\u5c11\u6e32\u67d3\u7684\u6b21\u6570\u3002"),l.createElement("li",null,"\u53e6\u4e00\u65b9\u9762\uff0c\u8282\u6d41\u548c\u9632\u6296\u9700\u8981\u6709\u6548\u638c\u63e1 ",l.createElement("code",null,"Delay Time")," \u5ef6\u65f6\u65f6\u95f4\uff0c\u5982\u679c\u65f6\u95f4\u8fc7\u957f\uff0c\u90a3\u4e48\u7ed9\u4eba\u4e00\u79cd\u6e32\u67d3\u6ede\u540e\u7684\u611f\u89c9\uff0c\u5982\u679c\u65f6\u95f4\u8fc7\u77ed\uff0c\u90a3\u4e48\u5c31\u7c7b\u4f3c\u4e8e setTimeout(fn,0) \u8fd8\u4f1a\u9020\u6210\u524d\u9762\u7684\u95ee\u9898\u3002\u800c startTransition \u5c31\u4e0d\u9700\u8981\u8003\u8651\u8fd9\u4e48\u591a\u3002")),l.createElement("h3",{id:"5-\u53d7\u5230\u8ba1\u7b97\u673a\u6027\u80fd\u5f71\u54cd"},l.createElement(a.AnchorLink,{to:"#5-\u53d7\u5230\u8ba1\u7b97\u673a\u6027\u80fd\u5f71\u54cd","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"5 \u53d7\u5230\u8ba1\u7b97\u673a\u6027\u80fd\u5f71\u54cd"),l.createElement("p",null,"transition \u5728\u5904\u7406\u6162\u7684\u8ba1\u7b97\u673a\u4e0a\u6548\u679c\u66f4\u52a0\u660e\u663e\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b ",l.createElement(a.Link,{to:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Freactwg%2Freact-18%2Fdiscussions%2F65"},"Real world example")),l.createElement("p",null,l.createElement("strong",null,"\u6ce8\u610f\u770b\u6ed1\u5757\u901f\u5ea6")),l.createElement("ul",null,l.createElement("li",null,"\u5904\u7406\u6027\u80fd\u9ad8\uff0c\u66f4\u5feb\u901f\u7684\u8bbe\u5907\u4e0a\u3002\u4e0d\u4f7f\u7528 startTransition \u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b68327a51b484e69b6ef000a2ae40207~tplv-k3u1fbpfcp-watermark.awebp?",alt:"12.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u5904\u7406\u6027\u80fd\u9ad8\uff0c\u66f4\u5feb\u901f\u7684\u8bbe\u5907\u4e0a\u3002\u4f7f\u7528 startTransition\u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/735dcc84cc0b49a78009bc3652778e49~tplv-k3u1fbpfcp-watermark.awebp?",alt:"13.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u5904\u7406\u6027\u80fd\u5dee\uff0c\u6162\u901f\u7684\u8bbe\u5907\u4e0a\uff0c\u4e0d\u4f7f\u7528 startTransition\u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6008c22fed1d4f699867bffd6e2269b9~tplv-k3u1fbpfcp-watermark.awebp?",alt:"14.gif"})),l.createElement("ul",null,l.createElement("li",null,"\u5904\u7406\u6027\u80fd\u5dee\uff0c\u6162\u901f\u7684\u8bbe\u5907\u4e0a\uff0c\u4f7f\u7528 startTransition\u3002")),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/438aaeec2f4148e5ae1319d6f290137d~tplv-k3u1fbpfcp-watermark.awebp?",alt:"15.gif"})),l.createElement("h2",{id:"\u4e09-transition-\u7279\u6027"},l.createElement(a.AnchorLink,{to:"#\u4e09-transition-\u7279\u6027","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e09 transition \u7279\u6027"),l.createElement("p",null,"\u65e2\u7136\u5df2\u7ecf\u8bb2\u4e86 transition \u7684\u4ea7\u751f\u521d\u8877\uff0c\u63a5\u4e0b\u6765\u770b transition \u7684\u529f\u80fd\u4ecb\u7ecd \u3002"),l.createElement("h3",{id:"1-\u4ec0\u4e48\u662f\u8fc7\u5ea6\u4efb\u52a1"},l.createElement(a.AnchorLink,{to:"#1-\u4ec0\u4e48\u662f\u8fc7\u5ea6\u4efb\u52a1","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 \u4ec0\u4e48\u662f\u8fc7\u5ea6\u4efb\u52a1\u3002"),l.createElement("p",null,"\u4e00\u822c\u4f1a\u628a\u72b6\u6001\u66f4\u65b0\u5206\u4e3a\u4e24\u7c7b\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u7c7b\u7d27\u6025\u66f4\u65b0\u4efb\u52a1\u3002\u6bd4\u5982\u4e00\u4e9b\u7528\u6237\u4ea4\u4e92\u884c\u4e3a\uff0c\u6309\u952e\uff0c\u70b9\u51fb\uff0c\u8f93\u5165\u7b49\u3002"),l.createElement("li",null,"\u7b2c\u4e8c\u7c7b\u5c31\u662f\u8fc7\u6e21\u66f4\u65b0\u4efb\u52a1\u3002\u6bd4\u5982 UI \u4ece\u4e00\u4e2a\u89c6\u56fe\u8fc7\u6e21\u5230\u53e6\u5916\u4e00\u4e2a\u89c6\u56fe\u3002")),l.createElement("h3",{id:"2-\u4ec0\u4e48\u662f-starttransition"},l.createElement(a.AnchorLink,{to:"#2-\u4ec0\u4e48\u662f-starttransition","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 \u4ec0\u4e48\u662f startTransition"),l.createElement("p",null,"\u4e0a\u8fb9\u5df2\u7ecf\u7528\u4e86 ",l.createElement("code",null,"startTransition")," \u5f00\u542f\u8fc7\u5ea6\u4efb\u52a1\uff0c\u5bf9\u4e8e startTransition \u7684\u7528\u6cd5\uff0c\u76f8\u4fe1\u5f88\u591a\u540c\u5b66\u5df2\u7ecf\u6e05\u695a\u4e86\u3002"),l.createElement(r.Z,{code:"startTransition(scope)",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"scope \u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u91cc\u9762\u7684\u66f4\u65b0\u4efb\u52a1\u90fd\u4f1a\u88ab\u6807\u8bb0\u6210",l.createElement("strong",null,"\u8fc7\u6e21\u66f4\u65b0\u4efb\u52a1"),"\uff0c\u8fc7\u6e21\u66f4\u65b0\u4efb\u52a1\u5728\u6e32\u67d3\u5e76\u53d1\u573a\u666f\u4e0b\uff0c\u4f1a\u88ab\u964d\u7ea7\u66f4\u65b0\u4f18\u5148\u7ea7\uff0c\u4e2d\u65ad\u66f4\u65b0\u3002")),l.createElement("p",null,l.createElement("strong",null,"\u4f7f\u7528")),l.createElement(r.Z,{code:"startTransition(()=>{\n   /* \u66f4\u65b0\u4efb\u52a1 */\n   setSearchQuery(value)\n})",lang:"js"}),l.createElement("h3",{id:"3-\u4ec0\u4e48\u662f-usetranstion"},l.createElement(a.AnchorLink,{to:"#3-\u4ec0\u4e48\u662f-usetranstion","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"3 \u4ec0\u4e48\u662f useTranstion"),l.createElement("p",null,"\u4e0a\u9762\u4ecb\u7ecd\u4e86 startTransition \uff0c\u53c8\u8bb2\u5230\u4e86\u8fc7\u6e21\u4efb\u52a1\uff0c\u672c\u8d28\u4e0a\u8fc7\u6e21\u4efb\u52a1\u6709\u4e00\u4e2a\u8fc7\u6e21\u671f\uff0c\u5728\u8fd9\u4e2a\u671f\u95f4\u5f53\u524d\u4efb\u52a1\u672c\u8d28\u4e0a\u662f\u88ab\u4e2d\u65ad\u7684\uff0c\u90a3\u4e48\u5728\u8fc7\u6e21\u671f\u95f4\uff0c\u5e94\u8be5\u5982\u4f55\u5904\u7406\u5462\uff0c\u6216\u8005\u8bf4\u544a\u8bc9\u7528\u6237\u4ec0\u4e48\u65f6\u5019\u8fc7\u6e21\u4efb\u52a1\u5904\u4e8e ",l.createElement("code",null,"pending")," \u72b6\u6001\uff0c\u4ec0\u4e48\u65f6\u5019 ",l.createElement("code",null,"pending")," \u72b6\u6001\u5b8c\u6bd5\u3002"),l.createElement("p",null,"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cReact \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5e26\u6709 isPending \u72b6\u6001\u7684 hooks \u2014\u2014 useTransition \u3002useTransition \u6267\u884c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\u3002\u6570\u7ec4\u6709\u4e24\u4e2a\u72b6\u6001\u503c\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u7b2c\u4e00\u4e2a\u662f\uff0c\u5f53\u5904\u4e8e\u8fc7\u6e21\u72b6\u6001\u7684\u6807\u5fd7\u2014\u2014isPending\u3002"),l.createElement("li",null,"\u7b2c\u4e8c\u4e2a\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e0a\u8ff0\u7684 startTransition\u3002\u53ef\u4ee5\u628a\u91cc\u9762\u7684\u66f4\u65b0\u4efb\u52a1\u53d8\u6210\u8fc7\u6e21\u4efb\u52a1\u3002")),l.createElement(r.Z,{code:"import { useTransition } from 'react' \n\n/* \u4f7f\u7528 */\nconst  [ isPending , startTransition ] = useTransition ()",lang:"js"}),l.createElement("p",null,"\u90a3\u4e48\u5f53\u4efb\u52a1\u5904\u4e8e\u60ac\u505c\u72b6\u6001\u7684\u65f6\u5019\uff0c",l.createElement("code",null,"isPending")," \u4e3a ",l.createElement("code",null,"true"),"\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u7528\u6237\u7b49\u5f85\u7684 UI \u5448\u73b0\u3002\u6bd4\u5982\uff1a"),l.createElement(r.Z,{code:"{ isPending  &&  < Spinner  / > }",lang:"js"}),l.createElement("h4",{id:"usetranstion-\u5b9e\u8df5"},l.createElement(a.AnchorLink,{to:"#usetranstion-\u5b9e\u8df5","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"useTranstion \u5b9e\u8df5"),l.createElement("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u505a\u4e00\u4e2a useTranstion \u7684\u5b9e\u8df5\uff0c\u8fd8\u662f\u590d\u7528\u4e0a\u8ff0 demo \u3002\u5bf9\u4e0a\u8ff0 demo \u6539\u9020\u3002"),l.createElement(r.Z,{code:"export default function App(){\n    const [ value ,setInputValue ] = React.useState('')\n    const [ query ,setSearchQuery  ] = React.useState('')\n    const [ isPending , startTransition ] = React.useTransition()\n    const handleChange = (e) => {\n        setInputValue(e.target.value)\n        startTransition(()=>{\n            setSearchQuery(e.target.value)\n        })\n    }\n    return  <div>\n    {isPending && <span>isTransiton</span>}\n    <input onChange={handleChange}\n        placeholder=\"\u8f93\u5165\u641c\u7d22\u5185\u5bb9\"\n        value={value}\n    />\n   <NewList  query={query} />\n</div>\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u7528 ",l.createElement("code",null,"useTransition")," \uff0c ",l.createElement("code",null,"isPending")," \u4ee3\u8868\u8fc7\u6e21\u72b6\u6001\uff0c\u5f53\u5904\u4e8e\u8fc7\u6e21\u72b6\u6001\u65f6\u5019\uff0c\u663e\u793a ",l.createElement("code",null,"isTransiton")," \u63d0\u793a\u3002")),l.createElement("p",null,"\u63a5\u4e0b\u6765\u770b\u4e00\u4e0b\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d256d72266974280adbaeba238d974cb~tplv-k3u1fbpfcp-watermark.awebp?",alt:"6.gif"})),l.createElement("p",null,"\u53ef\u4ee5\u770b\u5230\u80fd\u591f\u51c6\u786e\u6355\u83b7\u5230\u8fc7\u6e21\u671f\u95f4\u7684\u72b6\u6001\u3002"),l.createElement("h3",{id:"4-\u4ec0\u4e48\u662f-usedeferredvalue"},l.createElement(a.AnchorLink,{to:"#4-\u4ec0\u4e48\u662f-usedeferredvalue","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"4 \u4ec0\u4e48\u662f useDeferredValue"),l.createElement("p",null,"\u5982\u4e0a\u573a\u666f\u6211\u4eec\u53d1\u73b0\uff0c\u672c\u8d28\u4e0a query \u4e5f\u662f value \uff0c\u4e0d\u8fc7 query \u7684\u66f4\u65b0\u8981\u6ede\u540e\u4e8e value \u7684\u66f4\u65b0\u3002\u90a3\u4e48 React 18 \u63d0\u4f9b\u4e86 ",l.createElement("code",null,"useDeferredValue")," \u53ef\u4ee5\u8ba9\u72b6\u6001\u6ede\u540e\u6d3e\u751f\u3002useDeferredValue \u7684\u5b9e\u73b0\u6548\u679c\u4e5f\u7c7b\u4f3c\u4e8e ",l.createElement("code",null,"transtion"),"\uff0c\u5f53\u8feb\u5207\u7684\u4efb\u52a1\u6267\u884c\u540e\uff0c\u518d\u5f97\u5230\u65b0\u7684\u72b6\u6001\uff0c\u800c\u8fd9\u4e2a\u65b0\u7684\u72b6\u6001\u5c31\u79f0\u4e4b\u4e3a DeferredValue \u3002"),l.createElement("p",null,"useDeferredValue \u548c\u4e0a\u8ff0 useTransition \u672c\u8d28\u4e0a\u6709\u4ec0\u4e48\u5f02\u540c\u5462\uff1f"),l.createElement("p",null,l.createElement("strong",null,"\u76f8\u540c\u70b9\uff1a")),l.createElement("ul",null,l.createElement("li",null,"useDeferredValue \u672c\u8d28\u4e0a\u548c\u5185\u90e8\u5b9e\u73b0\u4e0e useTransition \u4e00\u6837\u90fd\u662f\u6807\u8bb0\u6210\u4e86\u8fc7\u6e21\u66f4\u65b0\u4efb\u52a1\u3002")),l.createElement("p",null,l.createElement("strong",null,"\u4e0d\u540c\u70b9\uff1a")),l.createElement("ul",null,l.createElement("li",null,l.createElement("strong",null,"useTransition \u662f\u628a startTransition \u5185\u90e8\u7684\u66f4\u65b0\u4efb\u52a1\u53d8\u6210\u4e86\u8fc7\u6e21\u4efb\u52a1",l.createElement("code",null,"transtion"),",\u800c useDeferredValue \u662f\u628a\u539f\u503c\u901a\u8fc7\u8fc7\u6e21\u4efb\u52a1\u5f97\u5230\u65b0\u7684\u503c\uff0c\u8fd9\u4e2a\u503c\u4f5c\u4e3a\u5ef6\u65f6\u72b6\u6001\u3002")," \u4e00\u4e2a\u662f\u5904\u7406\u4e00\u6bb5\u903b\u8f91\uff0c\u53e6\u4e00\u4e2a\u662f\u751f\u4ea7\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002"),l.createElement("li",null,"useDeferredValue \u8fd8\u6709\u4e00\u4e2a\u4e0d\u540c\u70b9\u5c31\u662f\u8fd9\u4e2a\u4efb\u52a1\uff0c\u672c\u8d28\u4e0a\u5728 useEffect \u5185\u90e8\u6267\u884c\uff0c\u800c useEffect \u5185\u90e8\u903b\u8f91\u662f\u5f02\u6b65\u6267\u884c\u7684 \uff0c\u6240\u4ee5\u5b83\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u66f4\u6ede\u540e\u4e8e ",l.createElement("code",null,"useTransition"),"\u3002 ",l.createElement("strong",null,l.createElement("code",null,"useDeferredValue")," = ",l.createElement("code",null,"useEffect")," + ",l.createElement("code",null,"transtion")))),l.createElement("p",null,"\u90a3\u4e48\u56de\u5230 demo \u4e0a\u6765\uff0c\u4f3c\u4e4e query \u53d8\u6210 DeferredValue \u66f4\u9002\u5408\u73b0\u5b9e\u60c5\u51b5\uff0c\u90a3\u4e48\u5bf9 demo \u8fdb\u884c\u4fee\u6539\u3002"),l.createElement(r.Z,{code:"export default function App(){\n    const [ value ,setInputValue ] = React.useState('')\n    const query = React.useDeferredValue(value)\n    const handleChange = (e) => {\n        setInputValue(e.target.value)\n    }\n    return  <div>\n     <button>useDeferredValue</button>\n    <input onChange={handleChange}\n        placeholder=\"\u8f93\u5165\u641c\u7d22\u5185\u5bb9\"\n        value={value}\n    />\n   <NewList  query={query} />\n   </div>\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,"\u5982\u4e0a\u53ef\u4ee5\u770b\u5230 query \u662f value \u901a\u8fc7 useDeferredValue \u4ea7\u751f\u7684\u3002")),l.createElement("p",null,"\u6548\u679c\uff1a"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/110f9db7ec21466398776a97c338a0b2~tplv-k3u1fbpfcp-watermark.awebp?",alt:"7.gif"})),l.createElement("h2",{id:"\u56db-\u539f\u7406"},l.createElement(a.AnchorLink,{to:"#\u56db-\u539f\u7406","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u56db \u539f\u7406"),l.createElement("p",null,"\u63a5\u4e0b\u6765\u53c8\u5230\u4e86\u539f\u7406\u73af\u8282\uff0c\u4ece startTransition \u5230 useTranstion \u518d\u5230 useDeferredValue \u539f\u7406\u672c\u8d28\u4e0a\u5f88\u7b80\u5355\uff0c"),l.createElement("h3",{id:"1-starttransition"},l.createElement(a.AnchorLink,{to:"#1-starttransition","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"1 startTransition"),l.createElement("p",null,"\u9996\u5148\u770b\u4e00\u4e0b\u6700\u57fa\u7840\u7684 startTransition \u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002"),l.createElement("blockquote",null,l.createElement("p",null,"react/src/ReactStartTransition.js -> startTransition")),l.createElement(r.Z,{code:"export function startTransition(scope) {\n  const prevTransition = ReactCurrentBatchConfig.transition;\n  /* \u901a\u8fc7\u8bbe\u7f6e\u72b6\u6001 */\n  ReactCurrentBatchConfig.transition = 1;\n  try {  \n      /* \u6267\u884c\u66f4\u65b0 */\n    scope();\n  } finally {\n    /* \u6062\u590d\u72b6\u6001 */  \n    ReactCurrentBatchConfig.transition = prevTransition;\n  }\n}",lang:"js"}),l.createElement("ul",null,l.createElement("li",null,l.createElement("code",null,"startTransition")," \u539f\u7406\u7279\u522b\u7b80\u5355\uff0c\u6709\u70b9\u50cf React v17 \u4e2d batchUpdate \u7684\u6279\u91cf\u5904\u7406\u903b\u8f91\u3002\u5c31\u662f\u901a\u8fc7\u8bbe\u7f6e\u5f00\u5173\u7684\u65b9\u5f0f\uff0c\u800c\u5f00\u5173\u5c31\u662f ",l.createElement("code",null,"transition = 1")," \uff0c\u7136\u540e\u6267\u884c\u66f4\u65b0\uff0c\u91cc\u9762\u7684\u66f4\u65b0\u4efb\u52a1\u90fd\u4f1a\u83b7\u5f97 ",l.createElement("code",null,"transtion")," \u6807\u5fd7\u3002"),l.createElement("li",null,"\u63a5\u4e0b\u6765\u5728 concurrent mode \u6a21\u5f0f\u4e0b\u4f1a\u5355\u72ec\u5904\u7406 ",l.createElement("code",null,"transtion")," \u7c7b\u578b\u7684\u66f4\u65b0\u3002")),l.createElement("p",null,"\u5176\u539f\u7406\u56fe\u5982\u4e0b\u6240\u793a\u3002"),l.createElement("p",null,l.createElement("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6cddf1d2a3541e88fa6998da9201e64~tplv-k3u1fbpfcp-watermark.awebp?",alt:"9.jpg"})),l.createElement("h3",{id:"2-usetranstion"},l.createElement(a.AnchorLink,{to:"#2-usetranstion","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"2 useTranstion"),l.createElement("p",null,"\u63a5\u4e0b\u6765\u770b\u4e00\u4e0b ",l.createElement("code",null,"useTranstion")," \u7684\u5185\u90e8\u5b9e\u73b0\u3002"),l.createElement("blockquote",null,l.createElement("p",null,"react-reconciler/src/ReactFiberHooks.new.js -> useTranstion")),l.createElement(r.Z,{code:"function mountTransition(){\n    const [isPending, setPending] = mountState(false);\n    const start = (callback)=>{\n        setPending(true);\n        const prevTransition = ReactCurrentBatchConfig.transition;\n        ReactCurrentBatchConfig.transition = 1;\n        try {\n            setPending(false);\n            callback();\n        } finally {\n            ReactCurrentBatchConfig.transition = prevTransition;\n        }\n    }\n     return [isPending, start];\n}",lang:"js"}),l.createElement("p",null,"\u8fd9\u6bb5\u4ee3\u7801\u4e0d\u662f\u6e90\u7801\uff0c\u6211\u628a\u6e90\u7801\u91cc\u9762\u7684\u5185\u5bb9\u8fdb\u884c\u7ec4\u5408\uff0c\u538b\u7f29\u3002"),l.createElement("ul",null,l.createElement("li",null,"\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u5230\uff0cuseTranstion \u672c\u8d28\u4e0a\u5c31\u662f ",l.createElement("strong",null,l.createElement("code",null,"useState"))," + ",l.createElement("strong",null,l.createElement("code",null,"startTransition"))," \u3002"),l.createElement("li",null,"\u901a\u8fc7 useState \u6765\u6539\u53d8 pending \u72b6\u6001\u3002\u5728 mountTransition \u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u89e6\u53d1\u4e24\u6b21 ",l.createElement("code",null,"setPending")," \uff0c\u4e00\u6b21\u5728 ",l.createElement("code",null,"transition = 1")," \u4e4b\u524d\uff0c\u4e00\u6b21\u5728\u4e4b\u540e\u3002\u4e00\u6b21\u4f1a\u6b63\u5e38\u66f4\u65b0 ",l.createElement("code",null,"setPending(true)")," \uff0c\u4e00\u6b21\u4f1a\u4f5c\u4e3a ",l.createElement("code",null,"transition")," \u8fc7\u6e21\u4efb\u52a1\u66f4\u65b0 ",l.createElement("code",null,"setPending(false);")," \uff0c\u6240\u4ee5\u80fd\u591f\u7cbe\u51c6\u6355\u83b7\u5230\u8fc7\u6e21\u65f6\u95f4\u3002")),l.createElement("p",null,"\u5176\u539f\u7406\u56fe\u5982\u4e0b\u6240\u793a\u3002"),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a97061df91ff45b690d3441e34a5f990~tplv-k3u1fbpfcp-watermark.awebp?",alt:"10.jpg"})),l.createElement("h3",{id:"3-usedeferredvalue"},l.createElement(a.AnchorLink,{to:"#3-usedeferredvalue","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"3 useDeferredValue"),l.createElement("p",null,"\u6700\u540e\uff0c\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b ",l.createElement("code",null,"useDeferredValue")," \u7684\u5185\u90e8\u5b9e\u73b0\u539f\u7406\u3002"),l.createElement("blockquote",null,l.createElement("p",null,"react-reconciler/src/ReactFiberHooks.new.js -> useTranstion")),l.createElement(r.Z,{code:"function updateDeferredValue(value){\n  const [prevValue, setValue] = updateState(value);\n  updateEffect(() => {\n    const prevTransition = ReactCurrentBatchConfig.transition;\n    ReactCurrentBatchConfig.transition = 1;\n    try {\n      setValue(value);\n    } finally {\n      ReactCurrentBatchConfig.transition = prevTransition;\n    }\n  }, [value]);\n  return prevValue;\n}",lang:"js"}),l.createElement("p",null,"useDeferredValue \u5904\u7406\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\u3002"),l.createElement("ul",null,l.createElement("li",null,"\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u5230 useDeferredValue \u672c\u8d28\u4e0a\u662f ",l.createElement("code",null,"useDeferredValue")," = ",l.createElement("code",null,"useState")," + ",l.createElement("code",null,"useEffect")," + ",l.createElement("code",null,"transition")),l.createElement("li",null,"\u901a\u8fc7\u4f20\u5165 useDeferredValue \u7684 value \u503c\uff0cuseDeferredValue \u901a\u8fc7 useState \u4fdd\u5b58\u72b6\u6001\u3002"),l.createElement("li",null,"\u7136\u540e\u5728 useEffect \u4e2d\u901a\u8fc7 ",l.createElement("code",null,"transition")," \u6a21\u5f0f\u6765\u66f4\u65b0 value \u3002 \u8fd9\u6837\u4fdd\u8bc1\u4e86 DeferredValue \u6ede\u540e\u4e8e state \u7684\u66f4\u65b0\uff0c\u5e76\u4e14\u6ee1\u8db3 ",l.createElement("code",null,"transition")," \u8fc7\u6e21\u66f4\u65b0\u539f\u5219\u3002")),l.createElement("p",null,"\u5176\u539f\u7406\u56fe\u5982\u4e0b\u6240\u793a\u3002"),l.createElement("p",null,l.createElement("img",{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b09af2e1eb74577b50e4801f1befcaf~tplv-k3u1fbpfcp-watermark.awebp?",alt:"11.jpg"})),l.createElement("h2",{id:"\u56db-\u603b\u7ed3"},l.createElement(a.AnchorLink,{to:"#\u56db-\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u56db \u603b\u7ed3"),l.createElement("p",null,"\u672c\u7ae0\u8282\u8bb2\u5230\u7684\u77e5\u8bc6\u70b9\u5982\u4e0b\uff1a"),l.createElement("ul",null,l.createElement("li",null,l.createElement("code",null,"Transition")," \u4ea7\u751f\u521d\u8877\uff0c\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\u3002"),l.createElement("li",null,l.createElement("code",null,"startTransition")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002"),l.createElement("li",null,l.createElement("code",null,"useTranstion")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002"),l.createElement("li",null,l.createElement("code",null,"useDeferredValue")," \u7684\u7528\u6cd5\u548c\u539f\u7406\u3002"))))}));t["default"]=e=>{var t=l.useContext(a.context),n=t.demos;return l.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(c,{demos:n})}}}]);